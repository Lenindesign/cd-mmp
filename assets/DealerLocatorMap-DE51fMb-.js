import{j as t,u as mt,r,g as ft,R as O}from"./iframe-DbH_ucHO.js";import{S as G}from"./star-CCn8jZI_.js";import{f as ve,a as ce,b as pt,g as gt,s as ht}from"./dealerService-CeBNsEgh.js";import{A as W}from"./award-CHcXKLbI.js";import{C as Pe}from"./chevron-right-CawSpziu.js";import{M as X}from"./map-pin-CkaJ2wjc.js";import{P as de}from"./phone-E1T5tPim.js";import{N as Q}from"./navigation-BS5u3uER.js";import{D as vt}from"./dollar-sign-CeW2Al9l.js";import{E as _t}from"./ExitIntentModal-BMzCbz8S.js";import{C as yt}from"./clock-4uI8Bx0O.js";import{B as bt}from"./bookmark-D6RNGxcZ.js";import{E as xt,L as ze,M as wt,a as De}from"./map-pV3P85xs.js";import{X as ue}from"./x-6yLSU2Ds.js";import{r as me}from"./index-B58b8P2M.js";import{C as Ct}from"./chevron-left-BGf_hjP4.js";import{M as jt}from"./MakeOfferModal-Cm0sESZj.js";import{C as Nt}from"./chevron-down-CqR443Fw.js";const fe=({vehicle:e,variant:n="full",className:a=""})=>{const s=l=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",maximumFractionDigits:0}).format(l),o=`${e.year} ${e.make} ${e.model}`;return n==="compact"?t.jsx("div",{className:`vehicle-context vehicle-context--compact ${a}`,children:t.jsxs("div",{className:"vehicle-context__mini",children:[t.jsxs("span",{className:"vehicle-context__mini-name",children:[e.year," ",e.model]}),t.jsxs("div",{className:"vehicle-context__mini-specs",children:[t.jsx("span",{className:"vehicle-context__mini-spec",children:s(e.msrp)}),e.bodyStyle&&t.jsx("span",{className:"vehicle-context__mini-spec",children:e.bodyStyle}),e.mpg&&t.jsxs("span",{className:"vehicle-context__mini-spec",children:[e.mpg," MPG"]}),e.rating&&t.jsxs("span",{className:"vehicle-context__mini-spec",children:[t.jsx(G,{size:12,fill:"var(--color-gold)",stroke:"var(--color-gold)"}),e.rating]})]})]})}):t.jsxs("header",{className:`vehicle-context ${a}`,children:[t.jsxs("h1",{className:"vehicle-context__title",children:["Find Dealers for ",o]}),t.jsx("div",{className:"vehicle-context__content",children:t.jsxs("div",{className:"vehicle-context__details",children:[t.jsxs("div",{className:"vehicle-context__specs",children:[t.jsxs("span",{className:"vehicle-context__spec",children:[t.jsx("strong",{children:"MSRP"})," ",s(e.msrp)]}),e.bodyStyle&&t.jsx("span",{className:"vehicle-context__spec vehicle-context__spec--divider",children:e.bodyStyle}),e.mpg&&t.jsxs("span",{className:"vehicle-context__spec vehicle-context__spec--divider",children:[e.mpg," MPG"]}),e.rating&&t.jsxs("span",{className:"vehicle-context__spec vehicle-context__spec--divider vehicle-context__spec--rating",children:[t.jsx(G,{size:14,fill:"var(--color-gold)",stroke:"var(--color-gold)"}),e.rating," C/D Rating"]})]}),e.trim&&t.jsx("span",{className:"vehicle-context__trim",children:e.trim})]})})]})};fe.__docgenInfo={description:"",methods:[],displayName:"VehicleContextHeader",props:{vehicle:{required:!0,tsType:{name:"VehicleInfo"},description:""},variant:{required:!1,tsType:{name:"union",raw:"'full' | 'compact'",elements:[{name:"literal",value:"'full'"},{name:"literal",value:"'compact'"}]},description:"",defaultValue:{value:"'full'",computed:!1}},className:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:"''",computed:!1}}}};const pe=({dealer:e,vehicleModel:n,index:a,isSelected:s=!1,isHovered:o=!1,variant:l="full",onSelect:i,onHover:c,onCallClick:f,onDirectionsClick:h,onMakeOfferClick:u})=>{const _=()=>{i?.(e)},p=v=>{v.stopPropagation(),f?.(e)},b=v=>{v.stopPropagation(),h?.(e)},m=v=>{v.stopPropagation(),u?.(e)},d=v=>t.jsxs("span",{className:"dealer-card__stars",children:[t.jsx(G,{size:14,fill:"var(--color-gold)",stroke:"var(--color-gold)"}),t.jsx("span",{children:v.toFixed(1)})]});return l==="compact"?t.jsxs("button",{className:`dealer-card dealer-card--compact ${s?"dealer-card--selected":""} ${o?"dealer-card--hovered":""}`,onClick:_,onMouseEnter:()=>c?.(e),onMouseLeave:()=>c?.(null),"aria-pressed":s,children:[a!==void 0&&t.jsx("span",{className:`dealer-card__number ${e.dealScore.isBestDeal?"dealer-card__number--best":""}`,children:a}),t.jsxs("div",{className:"dealer-card__info",children:[e.dealScore.isBestDeal&&t.jsxs("span",{className:"dealer-card__badge dealer-card__badge--best",children:[t.jsx(W,{size:12}),"Best Deal"]}),t.jsx("div",{className:"dealer-card__header",children:t.jsx("h3",{className:"dealer-card__name",children:e.name})}),t.jsxs("div",{className:"dealer-card__meta",children:[t.jsxs("span",{className:"dealer-card__inventory",children:[e.inventoryCount," in stock · ",ve(e.lowestPrice)]}),t.jsxs("span",{className:"dealer-card__rating-distance",children:[d(e.rating)," · ",ce(e.distance||0)]})]})]}),t.jsx(Pe,{size:16,className:"dealer-card__chevron"})]}):t.jsxs("article",{className:`dealer-card ${s?"dealer-card--selected":""} ${o?"dealer-card--hovered":""} ${e.dealScore.isBestDeal?"dealer-card--best-deal":""}`,onClick:_,onMouseEnter:()=>c?.(e),onMouseLeave:()=>c?.(null),role:"button",tabIndex:0,"aria-pressed":s,onKeyDown:v=>{(v.key==="Enter"||v.key===" ")&&(v.preventDefault(),_())},children:[a!==void 0&&t.jsx("span",{className:`dealer-card__number ${e.dealScore.isBestDeal?"dealer-card__number--best":""}`,children:a}),e.dealScore.isBestDeal&&t.jsx("div",{className:"dealer-card__badge-row",children:t.jsxs("span",{className:"dealer-card__badge dealer-card__badge--best",children:[t.jsx(W,{size:14}),"Best Deal"]})}),t.jsxs("div",{className:"dealer-card__content",children:[t.jsx("div",{className:"dealer-card__header",children:t.jsx("h3",{className:"dealer-card__name",children:e.name})}),t.jsx("div",{className:"dealer-card__inventory-row",children:t.jsxs("span",{className:"dealer-card__inventory-count",children:[e.inventoryCount," ",n," in stock"]})}),t.jsx("div",{className:"dealer-card__price-row",children:t.jsx("span",{className:"dealer-card__price",children:pt(e.lowestPrice,e.highestPrice)})}),t.jsxs("div",{className:"dealer-card__meta-row",children:[t.jsxs("span",{className:"dealer-card__rating",children:[d(e.rating),t.jsxs("span",{className:"dealer-card__review-count",children:["(",e.reviewCount,")"]})]}),t.jsxs("span",{className:"dealer-card__distance",children:[t.jsx(X,{size:14}),ce(e.distance||0)]})]}),t.jsxs("div",{className:"dealer-card__address",children:[t.jsx("span",{children:e.address}),t.jsxs("span",{children:[e.city,", ",e.state," ",e.zipCode]})]}),t.jsxs("div",{className:"dealer-card__actions",children:[t.jsxs("a",{href:`tel:${e.phone.replace(/[^0-9]/g,"")}`,className:"dealer-card__action dealer-card__action--call",onClick:p,"aria-label":`Call ${e.name}`,children:[t.jsx(de,{size:16}),t.jsx("span",{children:"Call"})]}),t.jsxs("a",{href:`https://www.google.com/maps/dir/?api=1&destination=${encodeURIComponent(`${e.address}, ${e.city}, ${e.state} ${e.zipCode}`)}`,target:"_blank",rel:"noopener noreferrer",className:"dealer-card__action dealer-card__action--directions",onClick:b,"aria-label":`Get directions to ${e.name}`,children:[t.jsx(Q,{size:16}),t.jsx("span",{children:"Directions"})]}),u&&t.jsxs("button",{className:"dealer-card__action dealer-card__action--offer",onClick:m,"aria-label":`Make an offer at ${e.name}`,children:[t.jsx(vt,{size:16}),t.jsx("span",{children:"Make Offer"})]})]})]})]})};pe.__docgenInfo={description:"",methods:[],displayName:"DealerCard",props:{dealer:{required:!0,tsType:{name:"DealerWithScore"},description:""},vehicleModel:{required:!0,tsType:{name:"string"},description:""},index:{required:!1,tsType:{name:"number"},description:""},isSelected:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},isHovered:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},variant:{required:!1,tsType:{name:"union",raw:"'full' | 'compact'",elements:[{name:"literal",value:"'full'"},{name:"literal",value:"'compact'"}]},description:"",defaultValue:{value:"'full'",computed:!1}},onSelect:{required:!1,tsType:{name:"signature",type:"function",raw:"(dealer: DealerWithScore) => void",signature:{arguments:[{type:{name:"DealerWithScore"},name:"dealer"}],return:{name:"void"}}},description:""},onHover:{required:!1,tsType:{name:"signature",type:"function",raw:"(dealer: DealerWithScore | null) => void",signature:{arguments:[{type:{name:"union",raw:"DealerWithScore | null",elements:[{name:"DealerWithScore"},{name:"null"}]},name:"dealer"}],return:{name:"void"}}},description:""},onCallClick:{required:!1,tsType:{name:"signature",type:"function",raw:"(dealer: DealerWithScore) => void",signature:{arguments:[{type:{name:"DealerWithScore"},name:"dealer"}],return:{name:"void"}}},description:""},onDirectionsClick:{required:!1,tsType:{name:"signature",type:"function",raw:"(dealer: DealerWithScore) => void",signature:{arguments:[{type:{name:"DealerWithScore"},name:"dealer"}],return:{name:"void"}}},description:""},onMakeOfferClick:{required:!1,tsType:{name:"signature",type:"function",raw:"(dealer: DealerWithScore) => void",signature:{arguments:[{type:{name:"DealerWithScore"},name:"dealer"}],return:{name:"void"}}},description:""}}};const _e=({dealer:e,vehicleModel:n,onMakeOffer:a})=>{const{user:s,isAuthenticated:o,addSavedVehicle:l,removeSavedVehicle:i}=mt(),[c,f]=r.useState(!1),[h,u]=r.useState(null),_=d=>{const v=`${d.year} ${d.make} ${d.model} ${d.trim}`;return s?.savedVehicles?.some(y=>y.name===v)||!1},p=d=>{if(!o){u(d),f(!0);return}const v=`${d.year} ${d.make} ${d.model} ${d.trim}`,y=`${d.year}-${d.make}-${d.model}-${d.trim}`.toLowerCase().replace(/\s+/g,"-");if(_(d)){const j=s?.savedVehicles?.find(x=>x.name===v);j&&i(j.id)}else l({id:y,name:v,ownership:"want"})},b=()=>{f(!1),u(null)},m=()=>{if(!e.hours)return"Hours not available";const v=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"][new Date().getDay()];return e.hours[v]||"Closed"};return t.jsxs(t.Fragment,{children:[t.jsxs("header",{className:"bottom-sheet__header",children:[e.dealScore.isBestDeal&&t.jsxs("span",{className:"bottom-sheet__badge",children:[t.jsx(W,{size:14}),"Best Deal"]}),t.jsx("h2",{className:"bottom-sheet__title",children:e.name}),t.jsxs("div",{className:"bottom-sheet__address-row",children:[t.jsxs("address",{className:"bottom-sheet__address",children:[e.address,t.jsx("br",{}),e.city,", ",e.state," ",e.zipCode]}),t.jsxs("div",{className:"bottom-sheet__quick-actions",children:[t.jsxs("a",{href:`https://www.google.com/maps/dir/?api=1&destination=${encodeURIComponent(`${e.address}, ${e.city}, ${e.state} ${e.zipCode}`)}`,target:"_blank",rel:"noopener noreferrer",className:"bottom-sheet__quick-badge bottom-sheet__quick-badge--directions","aria-label":"Get directions",children:[t.jsx(Q,{size:12}),t.jsx("span",{children:"Directions"})]}),t.jsxs("a",{href:`tel:${e.phone.replace(/[^0-9]/g,"")}`,className:"bottom-sheet__quick-badge bottom-sheet__quick-badge--call","aria-label":"Call dealer",children:[t.jsx(de,{size:12}),t.jsx("span",{children:"Call"})]})]})]}),t.jsxs("div",{className:"bottom-sheet__rating",children:[t.jsx(G,{size:16,fill:"var(--color-gold)",stroke:"var(--color-gold)"}),t.jsx("span",{className:"bottom-sheet__rating-value",children:e.rating.toFixed(1)}),t.jsxs("span",{className:"bottom-sheet__rating-count",children:["(",e.reviewCount.toLocaleString()," reviews)"]})]})]}),t.jsxs("div",{className:"bottom-sheet__hours",children:[t.jsx(yt,{size:16}),t.jsxs("span",{children:["Today: ",m()]})]}),t.jsxs("section",{className:"bottom-sheet__inventory",children:[t.jsxs("h3",{className:"bottom-sheet__section-title",children:["Inventory for ",n]}),t.jsx("ul",{className:"bottom-sheet__inventory-list",children:e.inventory.map((d,v)=>{const y=_(d);return t.jsxs("li",{className:"bottom-sheet__inventory-item",children:[t.jsxs("div",{className:"bottom-sheet__inventory-row",children:[t.jsxs("div",{className:"bottom-sheet__inventory-details",children:[t.jsxs("span",{className:"bottom-sheet__inventory-trim",children:[d.isNew?"New":"Used"," ",d.year," ",d.make," ",d.model," ",d.trim]}),t.jsxs("span",{className:"bottom-sheet__inventory-meta",children:[d.exteriorColor,!d.isNew&&d.mileage&&t.jsxs(t.Fragment,{children:[" · ",d.mileage.toLocaleString()," mi"]})]})]}),t.jsx("span",{className:"bottom-sheet__inventory-price",children:ve(d.price)})]}),t.jsxs("div",{className:"bottom-sheet__inventory-actions",children:[t.jsx("button",{className:"bottom-sheet__inventory-offer",onClick:()=>a?.(e,d),children:"Make an Offer"}),t.jsx("button",{className:`bottom-sheet__inventory-save ${y?"bottom-sheet__inventory-save--saved":""}`,onClick:()=>p(d),"aria-label":y?"Remove from saved":"Save vehicle",title:y?"Remove from saved":"Save vehicle",children:t.jsx(bt,{size:16,fill:y?"currentColor":"none"})})]})]},v)})})]}),e.certifications&&e.certifications.length>0&&t.jsxs("section",{className:"bottom-sheet__certifications",children:[t.jsx("h3",{className:"bottom-sheet__section-title",children:"Certifications"}),t.jsx("ul",{className:"bottom-sheet__cert-list",children:e.certifications.map((d,v)=>t.jsx("li",{className:"bottom-sheet__cert",children:d},v))})]}),t.jsxs("div",{className:"bottom-sheet__actions",children:[t.jsxs("a",{href:`tel:${e.phone.replace(/[^0-9]/g,"")}`,className:"bottom-sheet__action bottom-sheet__action--primary",children:[t.jsx(de,{size:18}),t.jsx("span",{children:"Call Dealer"})]}),t.jsxs("a",{href:`https://www.google.com/maps/dir/?api=1&destination=${encodeURIComponent(`${e.address}, ${e.city}, ${e.state} ${e.zipCode}`)}`,target:"_blank",rel:"noopener noreferrer",className:"bottom-sheet__action bottom-sheet__action--secondary",children:[t.jsx(Q,{size:18}),t.jsx("span",{children:"Get Directions"})]})]}),e.website&&t.jsxs("a",{href:e.website,target:"_blank",rel:"noopener noreferrer",className:"bottom-sheet__website",children:["Visit Dealer Website",t.jsx(xt,{size:14})]}),t.jsx(_t,{isOpen:c,onClose:b,vehicleName:h?`${h.year} ${h.make} ${h.model} ${h.trim}`:n,animationStyle:"elegant"})]})},$e=({dealer:e,vehicleModel:n,isOpen:a,onClose:s,onMakeOffer:o})=>{const l=r.useRef(null);return r.useEffect(()=>{const i=c=>{c.key==="Escape"&&a&&s()};return document.addEventListener("keydown",i),()=>document.removeEventListener("keydown",i)},[a,s]),r.useEffect(()=>{a&&l.current&&l.current.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])')[0]?.focus()},[a]),a?t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"bottom-sheet__backdrop",onClick:s,"aria-hidden":"true"}),t.jsxs("div",{ref:l,className:"bottom-sheet",role:"dialog","aria-modal":"true","aria-labelledby":"dealer-sheet-title",children:[t.jsx("div",{className:"bottom-sheet__handle"}),t.jsx("button",{className:"bottom-sheet__close",onClick:s,"aria-label":"Close dealer details",children:t.jsx(ue,{size:20})}),t.jsx("div",{className:"bottom-sheet__content",children:t.jsx(_e,{dealer:e,vehicleModel:n,onMakeOffer:o})})]})]}):null};_e.__docgenInfo={description:"",methods:[],displayName:"DealerDetailContent",props:{dealer:{required:!0,tsType:{name:"DealerWithScore"},description:""},vehicleModel:{required:!0,tsType:{name:"string"},description:""},onMakeOffer:{required:!1,tsType:{name:"signature",type:"function",raw:"(dealer: DealerWithScore, vehicle: VehicleInventoryItem) => void",signature:{arguments:[{type:{name:"DealerWithScore"},name:"dealer"},{type:{name:"VehicleInventoryItem"},name:"vehicle"}],return:{name:"void"}}},description:""}}};$e.__docgenInfo={description:"",methods:[],displayName:"DealerBottomSheet",props:{dealer:{required:!0,tsType:{name:"DealerWithScore"},description:""},vehicleModel:{required:!0,tsType:{name:"string"},description:""},isOpen:{required:!0,tsType:{name:"boolean"},description:""},onClose:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},onMakeOffer:{required:!1,tsType:{name:"signature",type:"function",raw:"(dealer: DealerWithScore, vehicle: VehicleInventoryItem) => void",signature:{arguments:[{type:{name:"DealerWithScore"},name:"dealer"},{type:{name:"VehicleInventoryItem"},name:"vehicle"}],return:{name:"void"}}},description:""}}};var ie,Ie;function St(){return Ie||(Ie=1,ie=function e(n,a){if(n===a)return!0;if(n&&a&&typeof n=="object"&&typeof a=="object"){if(n.constructor!==a.constructor)return!1;var s,o,l;if(Array.isArray(n)){if(s=n.length,s!=a.length)return!1;for(o=s;o--!==0;)if(!e(n[o],a[o]))return!1;return!0}if(n.constructor===RegExp)return n.source===a.source&&n.flags===a.flags;if(n.valueOf!==Object.prototype.valueOf)return n.valueOf()===a.valueOf();if(n.toString!==Object.prototype.toString)return n.toString()===a.toString();if(l=Object.keys(n),s=l.length,s!==Object.keys(a).length)return!1;for(o=s;o--!==0;)if(!Object.prototype.hasOwnProperty.call(a,l[o]))return!1;for(o=s;o--!==0;){var i=l[o];if(!e(n[i],a[i]))return!1}return!0}return n!==n&&a!==a}),ie}var kt=St();const qe=ft(kt),Et="1.7.1";function F(e,n){var a={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&n.indexOf(s)<0&&(a[s]=e[s]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,s=Object.getOwnPropertySymbols(e);o<s.length;o++)n.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(e,s[o])&&(a[s[o]]=e[s[o]]);return a}function ge(e,n,a,s){function o(l){return l instanceof a?l:new a(function(i){i(l)})}return new(a||(a=Promise))(function(l,i){function c(u){try{h(s.next(u))}catch(_){i(_)}}function f(u){try{h(s.throw(u))}catch(_){i(_)}}function h(u){u.done?l(u.value):o(u.value).then(c,f)}h((s=s.apply(e,[])).next())})}const P={NOT_LOADED:"NOT_LOADED",LOADING:"LOADING",LOADED:"LOADED",FAILED:"FAILED",AUTH_FAILURE:"AUTH_FAILURE"},Dt="https://maps.googleapis.com/maps/api/js";class ee{static load(n,a){return ge(this,void 0,void 0,function*(){var s,o;const l=n.libraries?n.libraries.split(","):[],i=this.serializeParams(n);this.listeners.push(a),!((o=(s=window.google)===null||s===void 0?void 0:s.maps)===null||o===void 0)&&o.importLibrary?(this.serializedApiParams||(this.loadingStatus=P.LOADED),this.notifyLoadingStatusListeners()):(this.serializedApiParams=i,this.initImportLibrary(n)),this.serializedApiParams&&this.serializedApiParams!==i&&console.warn("[google-maps-api-loader] The maps API has already been loaded with different parameters and will not be loaded again. Refresh the page for new values to have effect.");const c=["maps",...l];yield Promise.all(c.map(f=>google.maps.importLibrary(f)))})}static serializeParams(n){return[n.v,n.key,n.language,n.region,n.authReferrerPolicy,n.solutionChannel].join("/")}static initImportLibrary(n){if(window.google||(window.google={}),window.google.maps||(window.google.maps={}),window.google.maps.importLibrary){console.error("[google-maps-api-loader-internal]: initImportLibrary must only be called once");return}let a=null;const s=()=>a||(a=new Promise((o,l)=>{var i;const c=document.createElement("script"),f=new URLSearchParams;for(const[h,u]of Object.entries(n)){const _=h.replace(/[A-Z]/g,p=>"_"+p[0].toLowerCase());f.set(_,String(u))}f.set("loading","async"),f.set("callback","__googleMapsCallback__"),c.async=!0,c.src=Dt+"?"+f.toString(),c.nonce=((i=document.querySelector("script[nonce]"))===null||i===void 0?void 0:i.nonce)||"",c.onerror=()=>{this.loadingStatus=P.FAILED,this.notifyLoadingStatusListeners(),l(new Error("The Google Maps JavaScript API could not load."))},window.__googleMapsCallback__=()=>{this.loadingStatus=P.LOADED,this.notifyLoadingStatusListeners(),o()},window.gm_authFailure=()=>{this.loadingStatus=P.AUTH_FAILURE,this.notifyLoadingStatusListeners()},this.loadingStatus=P.LOADING,this.notifyLoadingStatusListeners(),document.head.append(c)}),a);google.maps.importLibrary=o=>s().then(()=>google.maps.importLibrary(o))}static notifyLoadingStatusListeners(){for(const n of this.listeners)n(this.loadingStatus)}}ee.loadingStatus=P.NOT_LOADED;ee.listeners=[];const It="GMP_visgl_rgmlibrary_v1_default",Mt=[`gmp_visgl_reactgooglemaps_v${Et}`],H=O.createContext(null);function Lt(){const[e,n]=r.useState({});return{mapInstances:e,addMapInstance:(l,i="default")=>{n(c=>Object.assign(Object.assign({},c),{[i]:l}))},removeMapInstance:(l="default")=>{n(i=>{var c=l;i[c];var f=F(i,[typeof c=="symbol"?c:c+""]);return f})},clearMapInstances:()=>{n({})}}}function Ot(e){const{onLoad:n,onError:a,apiKey:s,version:o,libraries:l=[]}=e,i=F(e,["onLoad","onError","apiKey","version","libraries"]),[c,f]=r.useState(ee.loadingStatus),[h,u]=r.useReducer((m,d)=>m[d.name]?m:Object.assign(Object.assign({},m),{[d.name]:d.value}),{}),_=r.useMemo(()=>l?.join(","),[l]),p=r.useMemo(()=>JSON.stringify(Object.assign({apiKey:s,version:o},i)),[s,o,i]),b=r.useCallback(m=>ge(this,void 0,void 0,function*(){var d;if(h[m])return h[m];if(!(!((d=google==null?void 0:google.maps)===null||d===void 0)&&d.importLibrary))throw new Error("[api-provider-internal] importLibrary was called before google.maps.importLibrary was defined.");const v=yield window.google.maps.importLibrary(m);return u({name:m,value:v}),v}),[h]);return r.useEffect(()=>{ge(this,void 0,void 0,function*(){try{const m=Object.assign({key:s},i);o&&(m.v=o),_?.length>0&&(m.libraries=_),(m.channel===void 0||m.channel<0||m.channel>999)&&delete m.channel,m.solutionChannel===void 0?m.solutionChannel=It:m.solutionChannel===""&&delete m.solutionChannel,yield ee.load(m,d=>f(d));for(const d of["core","maps",...l])yield b(d);n&&n()}catch(m){a?a(m):console.error("<ApiProvider> failed to load the Google Maps JavaScript API",m)}})},[s,_,p]),{status:c,loadedLibraries:h,importLibrary:b}}function Tt(e){return r.useMemo(()=>e.disableUsageAttribution?null:Mt,[e.disableUsageAttribution])}const At=e=>{const{children:n}=e,a=F(e,["children"]),{mapInstances:s,addMapInstance:o,removeMapInstance:l,clearMapInstances:i}=Lt(),{status:c,loadedLibraries:f,importLibrary:h}=Ot(a),u=Tt(a),_=r.useMemo(()=>({mapInstances:s,addMapInstance:o,removeMapInstance:l,clearMapInstances:i,status:c,loadedLibraries:f,importLibrary:h,internalUsageAttributionIds:u}),[s,o,l,i,c,f,h,u]);return O.createElement(H.Provider,{value:_},n)};function Pt(e,n){for(const a of Ft){const s=n[a],o=Fe[a];r.useEffect(()=>{if(!e||!s)return;const l=google.maps.event.addListener(e,o,i=>{s(zt(o,e,i))});return()=>l.remove()},[e,o,s])}}function zt(e,n,a){var s;const o={type:e,map:n,detail:{},stoppable:!1,stop:()=>{}};if($t.includes(e)){const l=o,i=n.getCenter(),c=n.getZoom(),f=n.getHeading()||0,h=n.getTilt()||0,u=n.getBounds();return(!i||!u||!Number.isFinite(c))&&console.warn("[createEvent] at least one of the values from the map returned undefined. This is not expected to happen. Please report an issue at https://github.com/visgl/react-google-maps/issues/new"),l.detail={center:i?.toJSON()||{lat:0,lng:0},zoom:c||0,heading:f,tilt:h,bounds:u?.toJSON()||{north:90,east:180,south:-90,west:-180}},l}else if(qt.includes(e)){if(!a)throw new Error("[createEvent] mouse events must provide a srcEvent");const l=o;return l.domEvent=a.domEvent,l.stoppable=!0,l.stop=()=>a.stop(),l.detail={latLng:((s=a.latLng)===null||s===void 0?void 0:s.toJSON())||null,placeId:a.placeId},l}return o}const Fe={onBoundsChanged:"bounds_changed",onCenterChanged:"center_changed",onClick:"click",onContextmenu:"contextmenu",onDblclick:"dblclick",onDrag:"drag",onDragend:"dragend",onDragstart:"dragstart",onHeadingChanged:"heading_changed",onIdle:"idle",onIsFractionalZoomEnabledChanged:"isfractionalzoomenabled_changed",onMapCapabilitiesChanged:"mapcapabilities_changed",onMapTypeIdChanged:"maptypeid_changed",onMousemove:"mousemove",onMouseout:"mouseout",onMouseover:"mouseover",onProjectionChanged:"projection_changed",onRenderingTypeChanged:"renderingtype_changed",onTilesLoaded:"tilesloaded",onTiltChanged:"tilt_changed",onZoomChanged:"zoom_changed",onCameraChanged:"bounds_changed"},$t=["bounds_changed","center_changed","heading_changed","tilt_changed","zoom_changed"],qt=["click","contextmenu","dblclick","mousemove","mouseout","mouseover"],Ft=Object.keys(Fe);function Rt(e){const n=r.useRef(void 0);return r.useEffect(()=>{n.current=e}),n.current}function Re(e,n){const a=Rt(e);return r.useMemo(()=>a&&n(a,e)?a:e,[e,a,n])}function Bt(e,n,a){r.useEffect(e,[Re(n,a)])}function Ut(e,n){Bt(e,n,qe)}const Vt=new Set(["backgroundColor","clickableIcons","controlSize","disableDefaultUI","disableDoubleClickZoom","draggable","draggableCursor","draggingCursor","fullscreenControl","fullscreenControlOptions","gestureHandling","headingInteractionEnabled","isFractionalZoomEnabled","keyboardShortcuts","mapTypeControl","mapTypeControlOptions","mapTypeId","maxZoom","minZoom","noClear","panControl","panControlOptions","restriction","rotateControl","rotateControlOptions","scaleControl","scaleControlOptions","scrollwheel","streetView","streetViewControl","streetViewControlOptions","styles","tiltInteractionEnabled","zoomControl","zoomControlOptions"]);function Gt(e,n){const a={},s=Object.keys(n);for(const o of s)Vt.has(o)&&(a[o]=n[o]);Ut(()=>{e&&e.setOptions(a)},[a])}function Be(){var e;return((e=r.useContext(H))===null||e===void 0?void 0:e.status)||P.NOT_LOADED}function Wt(e,n){const{viewport:a,viewState:s}=n,o=!!a;return r.useLayoutEffect(()=>{if(!e||!s)return;const{latitude:l,longitude:i,bearing:c,pitch:f,zoom:h}=s;e.moveCamera({center:{lat:l,lng:i},heading:c,tilt:f,zoom:h+1})},[e,s]),o}function Ht(e){return!e||typeof e!="object"||!("lat"in e&&"lng"in e)?!1:Number.isFinite(e.lat)&&Number.isFinite(e.lng)}function Ue(e){return Ht(e)?e:e.toJSON()}function Zt(e,n,a){const s=a.center?Ue(a.center):null;let o=null,l=null;s&&Number.isFinite(s.lat)&&Number.isFinite(s.lng)&&(o=s.lat,l=s.lng);const i=Number.isFinite(a.zoom)?a.zoom:null,c=Number.isFinite(a.heading)?a.heading:null,f=Number.isFinite(a.tilt)?a.tilt:null;r.useLayoutEffect(()=>{if(!e)return;const h={};let u=!1;o!==null&&l!==null&&(n.current.center.lat!==o||n.current.center.lng!==l)&&(h.center={lat:o,lng:l},u=!0),i!==null&&n.current.zoom!==i&&(h.zoom=i,u=!0),c!==null&&n.current.heading!==c&&(h.heading=c,u=!0),f!==null&&n.current.tilt!==f&&(h.tilt=f,u=!0),u&&e.moveCamera(h)})}const Kt=()=>{const e={position:"absolute",top:0,left:0,bottom:0,right:0,zIndex:999,display:"flex",flexFlow:"column nowrap",textAlign:"center",justifyContent:"center",fontSize:".8rem",color:"rgba(0,0,0,0.6)",background:"#dddddd",padding:"1rem 1.5rem"};return O.createElement("div",{style:e},O.createElement("h2",null,"Error: AuthFailure"),O.createElement("p",null,"A problem with your API key prevents the map from rendering correctly. Please make sure the value of the ",O.createElement("code",null,"APIProvider.apiKey")," prop is correct. Check the error-message in the console for further details."))};function Jt(){const[e,n]=r.useState(null),a=r.useCallback(s=>n(s),[n]);return[e,a]}function Ve(){return Be()===P.LOADED}function Yt(){const[,e]=r.useReducer(n=>n+1,0);return e}function Xt(e,n){const a=e.getCenter(),s=e.getZoom(),o=e.getHeading()||0,l=e.getTilt()||0,i=e.getBounds();(!a||!i||!Number.isFinite(s))&&console.warn("[useTrackedCameraState] at least one of the values from the map returned undefined. This is not expected to happen. Please report an issue at https://github.com/visgl/react-google-maps/issues/new"),Object.assign(n.current,{center:a?.toJSON()||{lat:0,lng:0},zoom:s||0,heading:o,tilt:l})}function Qt(e){const n=Yt(),a=r.useRef({center:{lat:0,lng:0},heading:0,tilt:0,zoom:0});return r.useEffect(()=>{if(!e)return;const s=google.maps.event.addListener(e,"bounds_changed",()=>{Xt(e,a),n()});return()=>s.remove()},[e,n]),a}class Y{static has(n){return this.entries[n]&&this.entries[n].length>0}static pop(n){return this.entries[n]&&this.entries[n].pop()||null}static push(n,a){this.entries[n]||(this.entries[n]=[]),this.entries[n].push(a)}}Y.entries={};function en(e,n){const a=Ve(),[s,o]=r.useState(null),[l,i]=Jt(),c=Qt(s),{id:f,defaultBounds:h,defaultCenter:u,defaultZoom:_,defaultHeading:p,defaultTilt:b,reuseMaps:m,renderingType:d,colorScheme:v}=e,y=F(e,["id","defaultBounds","defaultCenter","defaultZoom","defaultHeading","defaultTilt","reuseMaps","renderingType","colorScheme"]),j=e.zoom!==void 0||e.defaultZoom!==void 0,x=e.center!==void 0||e.defaultCenter!==void 0;!h&&(!j||!x)&&console.warn("<Map> component is missing configuration. You have to provide zoom and center (via the `zoom`/`defaultZoom` and `center`/`defaultCenter` props) or specify the region to show using `defaultBounds`. See https://visgl.github.io/react-google-maps/docs/api-reference/components/map#required"),!y.center&&u&&(y.center=u),!y.zoom&&Number.isFinite(_)&&(y.zoom=_),!y.heading&&Number.isFinite(p)&&(y.heading=p),!y.tilt&&Number.isFinite(b)&&(y.tilt=b);const S=y.internalUsageAttributionIds;S==null?y.internalUsageAttributionIds=n.internalUsageAttributionIds:y.internalUsageAttributionIds=[...n.internalUsageAttributionIds||[],...S];for(const D of Object.keys(y))y[D]===void 0&&delete y[D];const C=r.useRef(void 0);return r.useEffect(()=>{if(!l||!a)return;const{addMapInstance:D,removeMapInstance:k}=n,{mapId:E}=e,N=`${E||"default"}:${d||"default"}:${v||"LIGHT"}`;let M,I;if(m&&Y.has(N)?(I=Y.pop(N),M=I.getDiv(),l.appendChild(M),I.setOptions(y),setTimeout(()=>I.setCenter(I.getCenter()),0)):(M=document.createElement("div"),M.style.height="100%",l.appendChild(M),I=new google.maps.Map(M,Object.assign(Object.assign(Object.assign({},y),d?{renderingType:d}:{}),v?{colorScheme:v}:{}))),o(I),D(I,f),h){const{padding:L}=h,$=F(h,["padding"]);I.fitBounds($,L)}else(!j||!x)&&I.fitBounds({east:180,west:-180,south:-90,north:90});if(C.current){const{mapId:L,cameraState:$}=C.current;L!==E&&I.setOptions($)}return()=>{C.current={mapId:E,cameraState:c.current},M.remove(),m?Y.push(N,I):google.maps.event.clearInstanceListeners(I),o(null),k(f)}},[l,a,f,e.mapId,e.renderingType,e.colorScheme]),[s,i,c]}const Ge=O.createContext(null),We=e=>{const{children:n,id:a,className:s,style:o}=e,l=r.useContext(H),i=Be();if(!l)throw new Error("<Map> can only be used inside an <ApiProvider> component.");const[c,f,h]=en(e,l);Zt(c,h,e),Pt(c,e),Gt(c,e);const u=Wt(c,e),_=!!e.controlled;r.useEffect(()=>{if(c)return u&&c.setOptions({disableDefaultUI:!0}),(u||_)&&c.setOptions({gestureHandling:"none",keyboardShortcuts:!1}),()=>{c.setOptions({gestureHandling:e.gestureHandling,keyboardShortcuts:e.keyboardShortcuts})}},[c,u,_,e.gestureHandling,e.keyboardShortcuts]);const p=e.center?Ue(e.center):null;let b=null,m=null;p&&Number.isFinite(p.lat)&&Number.isFinite(p.lng)&&(b=p.lat,m=p.lng);const d=r.useMemo(()=>{var j,x,S;return{center:{lat:b??0,lng:m??0},zoom:(j=e.zoom)!==null&&j!==void 0?j:0,heading:(x=e.heading)!==null&&x!==void 0?x:0,tilt:(S=e.tilt)!==null&&S!==void 0?S:0}},[b,m,e.zoom,e.heading,e.tilt]);r.useLayoutEffect(()=>{if(!c||!_)return;c.moveCamera(d);const j=c.addListener("bounds_changed",()=>{c.moveCamera(d)});return()=>j.remove()},[c,_,d]);const v=r.useMemo(()=>Object.assign({width:"100%",height:"100%",position:"relative",zIndex:u?-1:0},o),[o,u]),y=r.useMemo(()=>({map:c}),[c]);return i===P.AUTH_FAILURE?O.createElement("div",{style:Object.assign({position:"relative"},s?{}:v),className:s},O.createElement(Kt,null)):O.createElement("div",Object.assign({ref:f,"data-testid":"map",style:s?void 0:v,className:s},a?{id:a}:{}),c?O.createElement(Ge.Provider,{value:y},n):null)};We.deckGLViewProps=!0;const Me=new Set;function tn(...e){const n=JSON.stringify(e);Me.has(n)||(Me.add(n),console.error(...e))}const te=(e=null)=>{const n=r.useContext(H),{map:a}=r.useContext(Ge)||{};if(n===null)return tn("useMap(): failed to retrieve APIProviderContext. Make sure that the <APIProvider> component exists and that the component you are calling `useMap()` from is a sibling of the <APIProvider>."),null;const{mapInstances:s}=n;return e!==null?s[e]||null:a||s.default||null};function He(e){const n=Ve(),a=r.useContext(H);return r.useEffect(()=>{!n||!a||a.importLibrary(e)},[n,a,e]),a?.loadedLibraries[e]||null}function B(e,n,a){r.useEffect(()=>{if(!e||!n||!a)return;const s=google.maps.event.addListener(e,n,a);return()=>s.remove()},[e,n,a])}function J(e,n,a){r.useEffect(()=>{e&&(e[n]=a)},[e,n,a])}function Le(e,n,a){r.useEffect(()=>{if(!(!e||!n||!a))return e.addEventListener(n,a),()=>e.removeEventListener(n,a)},[e,n,a])}class nn{constructor(){this.renderedStyles=new Set,this.styleElement=null}getStyleElement(){return this.styleElement||(this.styleElement=document.createElement("style"),this.styleElement.setAttribute("data-rgm-anchor-styles",""),document.head.appendChild(this.styleElement)),this.styleElement}addAdvancedMarkerPointerEventsOverwrite(){if(this.renderedStyles.has("marker-pointer-events"))return;const n=this.getStyleElement();n.textContent+=`
      gmp-advanced-marker[data-origin='rgm'] {
        pointer-events: none !important;
      }
    `,this.renderedStyles.add("marker-pointer-events")}cleanup(){this.styleElement&&(this.styleElement.remove(),this.styleElement=null,this.renderedStyles.clear())}}const an=new nn;function sn(e,n){var a;if(!(!((a=google==null?void 0:google.maps)===null||a===void 0)&&a.version))return;const s=google.maps.version.split("."),o=parseInt(s[0],10),l=parseInt(s[1],10);return o>e||o===e&&l>=n}const rn=O.createContext(null),on={BOTTOM:["50%","100%"]},Ze=r.forwardRef((e,n)=>{const{children:a,style:s,className:o,anchorPoint:l}=e,[i,c]=un(e),f=r.useMemo(()=>i?{marker:i}:null,[i]);return r.useImperativeHandle(n,()=>i,[i]),c?O.createElement(rn.Provider,{value:f},me.createPortal(O.createElement(dn,{anchorPoint:l,styles:s,className:o},a),c)):null});Ze.displayName="AdvancedMarker";function ln(){const[e,n]=r.useState(null);return[r.useCallback(s=>{n(s)},[]),e]}function cn(e){return e.content!==void 0}function he(e){return e.nodeType===Node.ELEMENT_NODE}const dn=({children:e,styles:n,className:a})=>O.createElement("div",{className:a,style:n},e);function un(e){const[n,a]=r.useState(null),[s,o]=r.useState(null),l=te(),i=He("marker"),{children:c,onClick:f,className:h,onMouseEnter:u,onMouseLeave:_,onDrag:p,onDragStart:b,onDragEnd:m,collisionBehavior:d,clickable:v,draggable:y,position:j,title:x,zIndex:S,anchorPoint:C,anchorLeft:D,anchorTop:k}=e,E=r.Children.count(c);return r.useEffect(()=>{if(!l||!i)return;const N=new i.AdvancedMarkerElement;N.map=l,a(N);let M=null;return E>0&&(M=document.createElement("div"),N.content=M,o(M)),()=>{N.map=null,M?.remove(),a(null),o(null)}},[l,i,E]),r.useEffect(()=>{!n?.content||!he(n.content)||E>0||(n.content.className=h??"")},[n,h,E]),mn(n,C,D,k,E>0),J(n,"position",j),J(n,"title",x??""),J(n,"zIndex",S),J(n,"collisionBehavior",d),r.useEffect(()=>{n&&(y!==void 0?n.gmpDraggable=y:p||b||m?n.gmpDraggable=!0:n.gmpDraggable=!1)},[n,y,p,m,b]),r.useEffect(()=>{if(!n)return;const N=v!==void 0||!!f||!!u||!!_;n.gmpClickable=N,N&&n?.content&&he(n.content)&&(n.content.style.pointerEvents="all",f&&(n.content.style.cursor="pointer"))},[n,v,f,u,_]),B(n,"click",f),B(n,"drag",p),B(n,"dragstart",b),B(n,"dragend",m),Le(n?.element,"mouseenter",u),Le(n?.element,"mouseleave",_),[n,s]}function mn(e,n,a,s,o){r.useEffect(()=>{if(!e||!o)return;const l=sn(3,62),i=e.content;if(!(!i||!he(i))){if(a!==void 0||s!==void 0){l||console.warn(`AdvancedMarker: The anchorLeft and anchorTop props are only supported in Google Maps API version 3.62 and above. The current version is ${google.maps.version}.`),e.anchorLeft=a,e.anchorTop=s,n!==void 0&&console.warn("AdvancedMarker: the anchorPoint prop is ignored when anchorLeft and/or anchorTop are set.");return}if(n!==void 0){const[c,f]=n??on.BOTTOM,h=`calc(-1 * ${c})`,u=`calc(-1 * ${f})`;l?(e.anchorLeft=h,e.anchorTop=u,i.style.transform=""):(i.style.transform=`translate(50%, 100%) translate(${h}, ${u})`,e.dataset.origin="rgm",an.addAdvancedMarkerPointerEventsOverwrite())}}},[e,n,a,s,o])}function fn(e,n,a){if(n!=null&&typeof n!="object")throw new Error("The `style` prop expects a mapping from style properties to values, not a string. For example, style={{marginRight: spacing + 'em'}} when using JSX.");const s=e.style;if(a==null){if(n==null)return;for(const o in n)n.hasOwnProperty(o)&&Oe(s,o,n[o]);return}for(const o in a)a.hasOwnProperty(o)&&(n==null||!n.hasOwnProperty(o))&&(o.indexOf("--")===0?s.setProperty(o,""):o==="float"?s.cssFloat="":s[o]="");if(n!=null)for(const o in n){const l=n[o];n.hasOwnProperty(o)&&a[o]!==l&&Oe(s,o,l)}}function Oe(e,n,a){const s=n.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?s?e.setProperty(n,""):n==="float"?e.cssFloat="":e[n]="":s?e.setProperty(n,a):typeof a=="number"&&a!==0&&!gn(n)?e[n]=a+"px":n==="float"?e.cssFloat=a:e[n]=(""+a).trim()}const pn=new Set(["animationIterationCount","aspectRatio","borderImageOutset","borderImageSlice","borderImageWidth","boxFlex","boxFlexGroup","boxOrdinalGroup","columnCount","columns","flex","flexGrow","flexPositive","flexShrink","flexNegative","flexOrder","gridArea","gridRow","gridRowEnd","gridRowSpan","gridRowStart","gridColumn","gridColumnEnd","gridColumnSpan","gridColumnStart","fontWeight","lineClamp","lineHeight","opacity","order","orphans","scale","tabSize","widows","zIndex","zoom","fillOpacity","floodOpacity","stopOpacity","strokeDasharray","strokeDashoffset","strokeMiterlimit","strokeOpacity","strokeWidth"]);function gn(e){return pn.has(e)}const hn=e=>{const{children:n,headerContent:a,style:s,className:o,pixelOffset:l,anchor:i,shouldFocus:c,onClose:f,onCloseClick:h}=e,u=F(e,["children","headerContent","style","className","pixelOffset","anchor","shouldFocus","onClose","onCloseClick"]),_=He("maps"),[p,b]=r.useState(null),m=r.useRef(null),d=r.useRef(null),v=Re(u,qe);r.useEffect(()=>{if(!_)return;m.current=document.createElement("div"),d.current=document.createElement("div");const x=v;l&&(x.pixelOffset=new google.maps.Size(l[0],l[1])),a&&(x.headerContent=typeof a=="string"?a:d.current);const S=new google.maps.InfoWindow(v);return S.setContent(m.current),b(S),()=>{var C,D;S.setContent(null),(C=m.current)===null||C===void 0||C.remove(),(D=d.current)===null||D===void 0||D.remove(),m.current=null,d.current=null,b(null)}},[_]);const y=r.useRef(null);r.useEffect(()=>{!p||!m.current||(fn(m.current,s||null,y.current),y.current=s||null,o!==m.current.className&&(m.current.className=o||""))},[p,o,s]),r.useEffect(()=>{if(!p)return;const x=v;l?x.pixelOffset=new google.maps.Size(l[0],l[1]):x.pixelOffset=null,a?x.headerContent=typeof a=="string"?a:d.current:x.headerContent=null,p.setOptions(v)},[v,l,a]),B(p,"close",f),B(p,"closeclick",h);const j=te();return r.useEffect(()=>{var x;if(!j||!p||i===null)return;const S=!!i,C={map:j};if(i&&(C.anchor=i,cn(i)&&i.content instanceof Element)){const D=i?.getBoundingClientRect();if(D&&i.dataset.origin==="rgm"){const k=(x=i.content.firstElementChild)===null||x===void 0?void 0:x.firstElementChild,E=k?.getBoundingClientRect(),N=E.x-D.x+(E.width-D.width)/2,M=E.y-D.y,I=v;I.pixelOffset=new google.maps.Size(l?l[0]+N:N,l?l[1]+M:M),p.setOptions(I)}}return c!==void 0&&(C.shouldFocus=c),p.open(C),()=>{S&&p.set("anchor",null),p.close()}},[p,i,j,c,v,l]),O.createElement(O.Fragment,null,m.current&&me.createPortal(n,m.current),d.current!==null&&me.createPortal(a,d.current))};function vn(e){const[n,a]=r.useState(null),s=te(),{onClick:o,onDrag:l,onDragStart:i,onDragEnd:c,onMouseOver:f,onMouseOut:h}=e,u=F(e,["onClick","onDrag","onDragStart","onDragEnd","onMouseOver","onMouseOut"]),{position:_,draggable:p}=u;return r.useEffect(()=>{if(!s){s===void 0&&console.error("<Marker> has to be inside a Map component.");return}const b=new google.maps.Marker(u);return b.setMap(s),a(b),()=>{b.setMap(null),a(null)}},[s]),r.useEffect(()=>{if(!n)return;const b=n,m=google.maps.event;return o&&m.addListener(b,"click",o),l&&m.addListener(b,"drag",l),i&&m.addListener(b,"dragstart",i),c&&m.addListener(b,"dragend",c),f&&m.addListener(b,"mouseover",f),h&&m.addListener(b,"mouseout",h),n.setDraggable(!!p),()=>{m.clearInstanceListeners(b)}},[n,p,o,l,i,c,f,h]),r.useEffect(()=>{n&&u&&n.setOptions(u)},[n,u]),r.useEffect(()=>{p||!_||!n||n.setPosition(_)},[p,_,n]),n}const _n=r.forwardRef((e,n)=>{const a=vn(e);return r.useImperativeHandle(n,()=>a,[a]),O.createElement(O.Fragment,null)});_n.displayName="Marker";const Ke=({dealer:e,index:n,isSelected:a=!1,isHovered:s=!1,onClick:o,onHover:l,vehicleImage:i,vehicleImages:c=[],vehicleName:f})=>{const[h,u]=ln(),[_,p]=r.useState(!1),[b,m]=r.useState(0),d=c.length>0?c:i?[i]:[],v=r.useCallback(E=>{E.stopPropagation(),m(N=>N===0?d.length-1:N-1)},[d.length]),y=r.useCallback(E=>{E.stopPropagation(),m(N=>N===d.length-1?0:N+1)},[d.length]),j=r.useCallback(()=>{o?.(),p(!0)},[o]),x=r.useCallback(()=>{p(!1)},[]),S=r.useCallback(()=>{l?.(e),p(!0)},[e,l]),C=r.useCallback(()=>{l?.(null),p(!1)},[l]),k=e.dealScore.isBestDeal?{background:"var(--color-gold, #DBCA8B)",borderColor:"var(--color-gold-dark, #A59143)",scale:a||s?1.3:1.1}:a||s?{background:"var(--color-blue-cobalt, #1B5F8A)",borderColor:"var(--color-blue-cobalt-dark, #154d70)",scale:1.3}:{background:"var(--color-blue-cobalt, #1B5F8A)",borderColor:"var(--color-blue-cobalt-dark, #154d70)",scale:1};return t.jsxs(t.Fragment,{children:[t.jsx(Ze,{ref:h,position:{lat:e.lat,lng:e.lng},onClick:j,title:e.name,children:t.jsxs("div",{className:`dealer-marker ${e.dealScore.isBestDeal?"dealer-marker--best":""} ${a||s?"dealer-marker--selected":""}`,style:{transform:`scale(${k.scale})`},onMouseEnter:S,onMouseLeave:C,children:[t.jsx("div",{className:"dealer-marker__pin",style:{backgroundColor:k.background,borderColor:k.borderColor},children:n!==void 0?t.jsx("span",{className:"dealer-marker__number",children:n}):e.dealScore.isBestDeal?t.jsx(W,{size:16,className:"dealer-marker__icon"}):t.jsx(X,{size:16,className:"dealer-marker__icon"})}),t.jsx("div",{className:"dealer-marker__tail",style:{borderTopColor:k.borderColor}})]})}),(_||a||s)&&u&&t.jsx(hn,{anchor:u,onCloseClick:x,className:"dealer-info-window",children:t.jsxs("div",{className:"dealer-info-window__content",children:[d.length>0&&t.jsxs("div",{className:"dealer-info-window__slideshow",children:[t.jsx("img",{src:d[b],alt:`${f||"Vehicle"} - Photo ${b+1}`,className:"dealer-info-window__slide-image",onError:E=>{const N=E.target;b!==0&&d[0]&&(N.src=d[0])}}),d.length>1&&t.jsxs(t.Fragment,{children:[t.jsx("button",{className:"dealer-info-window__nav dealer-info-window__nav--prev",onClick:v,"aria-label":"Previous image",children:t.jsx(Ct,{size:16})}),t.jsx("button",{className:"dealer-info-window__nav dealer-info-window__nav--next",onClick:y,"aria-label":"Next image",children:t.jsx(Pe,{size:16})}),t.jsx("div",{className:"dealer-info-window__dots",children:d.map((E,N)=>t.jsx("button",{className:`dealer-info-window__dot ${N===b?"dealer-info-window__dot--active":""}`,onClick:M=>{M.stopPropagation(),m(N)},"aria-label":`Go to image ${N+1}`},N))})]})]}),t.jsxs("div",{className:"dealer-info-window__body",children:[e.dealScore.isBestDeal&&t.jsxs("span",{className:"dealer-info-window__badge",children:[t.jsx(W,{size:10}),"Best Deal"]}),t.jsx("h3",{className:"dealer-info-window__name",children:e.name}),t.jsxs("div",{className:"dealer-info-window__meta",children:[t.jsxs("div",{className:"dealer-info-window__rating",children:[t.jsx(G,{size:14,fill:"var(--color-gold)",stroke:"var(--color-gold)"}),t.jsx("span",{className:"dealer-info-window__rating-value",children:e.rating.toFixed(1)}),t.jsxs("span",{className:"dealer-info-window__rating-count",children:["(",e.reviewCount," reviews)"]})]}),t.jsx("span",{className:"dealer-info-window__distance",children:ce(e.distance||0)})]}),t.jsx("div",{className:"dealer-info-window__price-row",children:t.jsxs("span",{className:"dealer-info-window__price",children:["from ",ve(e.lowestPrice)]})}),t.jsxs("div",{className:"dealer-info-window__actions",children:[t.jsx("a",{href:`tel:${e.phone.replace(/[^0-9]/g,"")}`,className:"dealer-info-window__action dealer-info-window__action--primary",children:"Call"}),t.jsx("a",{href:`https://www.google.com/maps/dir/?api=1&destination=${encodeURIComponent(`${e.address}, ${e.city}, ${e.state}`)}`,target:"_blank",rel:"noopener noreferrer",className:"dealer-info-window__action dealer-info-window__action--secondary",children:"Directions"})]})]})]})})]})};Ke.__docgenInfo={description:"",methods:[],displayName:"DealerMarker",props:{dealer:{required:!0,tsType:{name:"DealerWithScore"},description:""},index:{required:!1,tsType:{name:"number"},description:""},isSelected:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},isHovered:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},onClick:{required:!1,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},onHover:{required:!1,tsType:{name:"signature",type:"function",raw:"(dealer: DealerWithScore | null) => void",signature:{arguments:[{type:{name:"union",raw:"DealerWithScore | null",elements:[{name:"DealerWithScore"},{name:"null"}]},name:"dealer"}],return:{name:"void"}}},description:""},vehicleImage:{required:!1,tsType:{name:"string"},description:""},vehicleImages:{required:!1,tsType:{name:"Array",elements:[{name:"string"}],raw:"string[]"},description:"",defaultValue:{value:"[]",computed:!1}},vehicleName:{required:!1,tsType:{name:"string"},description:""}}};const yn=({dealers:e,center:n,selectedDealerId:a,hoveredDealerId:s,onDealerSelect:o,onDealerHover:l,vehicleImage:i,vehicleImages:c,vehicleName:f})=>{const h=te();r.useEffect(()=>{h&&h.panTo(n)},[h,n.lat,n.lng]);const u=r.useCallback(p=>{o?.(p),h&&h.panTo({lat:p.lat,lng:p.lng})},[h,o]),_=r.useCallback(p=>{l?.(p)},[l]);return t.jsx(t.Fragment,{children:e.map((p,b)=>t.jsx(Ke,{dealer:p,index:b+1,isSelected:a===p.id,isHovered:s===p.id,onClick:()=>u(p),onHover:_,vehicleImage:i,vehicleImages:c,vehicleName:f},p.id))})},Je=({dealers:e,center:n,selectedDealerId:a,hoveredDealerId:s,onDealerSelect:o,onDealerHover:l,apiKey:i,vehicleImage:c,vehicleImages:f,vehicleName:h,sidebarContent:u,sidebarTitle:_="Dealers",dealerDetailContent:p,isDealerDetailOpen:b=!1,onCloseDealerDetail:m})=>{const[d]=r.useState(null),[v,y]=r.useState(!1),[j,x]=r.useState(!0);return r.useEffect(()=>{const S=()=>{y(!!document.fullscreenElement),document.fullscreenElement&&x(!0)};return document.addEventListener("fullscreenchange",S),document.addEventListener("webkitfullscreenchange",S),()=>{document.removeEventListener("fullscreenchange",S),document.removeEventListener("webkitfullscreenchange",S)}},[]),r.useEffect(()=>{const S=async C=>{if(C.target.closest(".gm-fullscreen-control")){C.preventDefault(),C.stopPropagation();const E=document.querySelector(".google-map-view");try{document.fullscreenElement?await document.exitFullscreen():E&&await E.requestFullscreen()}catch(N){console.error("Fullscreen request failed:",N)}}};return document.addEventListener("click",S,!0),()=>{document.removeEventListener("click",S,!0)}},[]),i?d?t.jsxs("div",{className:"google-map-view google-map-view--error",children:[t.jsx("p",{children:"Unable to load map"}),t.jsx("p",{className:"google-map-view__error-detail",children:d})]}):t.jsxs("div",{className:"google-map-view",children:[t.jsx(At,{apiKey:i,onLoad:()=>console.log("Google Maps API loaded"),children:t.jsx(We,{defaultCenter:n,defaultZoom:11,mapId:"dealer-locator-map",gestureHandling:"greedy",disableDefaultUI:!1,zoomControl:!0,mapTypeControl:!1,streetViewControl:!1,fullscreenControl:!0,className:"google-map-view__map",children:t.jsx(yn,{dealers:e,center:n,selectedDealerId:a,hoveredDealerId:s,onDealerSelect:o,onDealerHover:l,vehicleImage:c,vehicleImages:f,vehicleName:h})})}),v&&u&&t.jsxs(t.Fragment,{children:[t.jsxs("button",{className:`dealer-locator__fullscreen-toggle ${j?"dealer-locator__fullscreen-toggle--hidden":""}`,onClick:()=>x(!0),children:[t.jsx(ze,{size:18}),t.jsx("span",{children:"Show Dealers"})]}),t.jsxs("div",{className:`dealer-locator__fullscreen-sidebar ${j?"":"dealer-locator__fullscreen-sidebar--hidden"}`,children:[t.jsxs("div",{className:"dealer-locator__fullscreen-sidebar-header",children:[t.jsx("h3",{className:"dealer-locator__fullscreen-sidebar-title",children:_}),t.jsx("button",{className:"dealer-locator__fullscreen-sidebar-close",onClick:()=>x(!1),"aria-label":"Close sidebar",children:t.jsx(ue,{size:18})})]}),t.jsx("div",{className:"dealer-locator__fullscreen-sidebar-content",children:u})]})]}),v&&b&&p&&t.jsxs("div",{className:"dealer-locator__fullscreen-detail",children:[t.jsx("button",{className:"dealer-locator__fullscreen-detail-close",onClick:m,"aria-label":"Close dealer details",children:t.jsx(ue,{size:20})}),t.jsx("div",{className:"dealer-locator__fullscreen-detail-content",children:p})]})]}):t.jsx("div",{className:"google-map-view google-map-view--placeholder",children:t.jsxs("div",{className:"google-map-view__placeholder-content",children:[t.jsxs("svg",{width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[t.jsx("path",{d:"M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"}),t.jsx("circle",{cx:"12",cy:"10",r:"3"})]}),t.jsx("p",{children:"Google Maps"}),t.jsx("p",{className:"google-map-view__placeholder-note",children:"Add VITE_GOOGLE_MAPS_API_KEY to enable interactive map"})]})})};Je.__docgenInfo={description:"",methods:[],displayName:"GoogleMapView",props:{dealers:{required:!0,tsType:{name:"Array",elements:[{name:"DealerWithScore"}],raw:"DealerWithScore[]"},description:""},center:{required:!0,tsType:{name:"signature",type:"object",raw:"{ lat: number; lng: number }",signature:{properties:[{key:"lat",value:{name:"number",required:!0}},{key:"lng",value:{name:"number",required:!0}}]}},description:""},selectedDealerId:{required:!1,tsType:{name:"union",raw:"string | null",elements:[{name:"string"},{name:"null"}]},description:""},hoveredDealerId:{required:!1,tsType:{name:"union",raw:"string | null",elements:[{name:"string"},{name:"null"}]},description:""},onDealerSelect:{required:!1,tsType:{name:"signature",type:"function",raw:"(dealer: DealerWithScore) => void",signature:{arguments:[{type:{name:"DealerWithScore"},name:"dealer"}],return:{name:"void"}}},description:""},onDealerHover:{required:!1,tsType:{name:"signature",type:"function",raw:"(dealer: DealerWithScore | null) => void",signature:{arguments:[{type:{name:"union",raw:"DealerWithScore | null",elements:[{name:"DealerWithScore"},{name:"null"}]},name:"dealer"}],return:{name:"void"}}},description:""},apiKey:{required:!1,tsType:{name:"string"},description:""},vehicleImage:{required:!1,tsType:{name:"string"},description:""},vehicleImages:{required:!1,tsType:{name:"Array",elements:[{name:"string"}],raw:"string[]"},description:""},vehicleName:{required:!1,tsType:{name:"string"},description:""},sidebarContent:{required:!1,tsType:{name:"ReactNode"},description:""},sidebarTitle:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:"'Dealers'",computed:!1}},dealerDetailContent:{required:!1,tsType:{name:"ReactNode"},description:""},isDealerDetailOpen:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},onCloseDealerDetail:{required:!1,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""}}};const bn=({apiKey:e,debounceMs:n=300})=>{const[a,s]=r.useState([]),[o,l]=r.useState(!1),[i,c]=r.useState(null),[f,h]=r.useState(!1),u=r.useRef(null),_=r.useRef(null);r.useEffect(()=>{{c("Google Maps API key is required");return}},[e]);const p=r.useCallback(async v=>{if(_.current&&clearTimeout(_.current),!v.trim()){s([]),l(!1);return}f&&(l(!0),_.current=setTimeout(async()=>{try{const{AutocompleteSuggestion:y}=await window.google.maps.importLibrary("places"),j={input:v,includedPrimaryTypes:["locality","postal_code","administrative_area_level_1"],includedRegionCodes:["us"]},{suggestions:x}=await y.fetchAutocompleteSuggestions(j);l(!1),x&&x.length>0?s(x.map(S=>{const C=S.placePrediction;return{placeId:C.placeId,description:C.text?.text||"",mainText:C.mainText?.text||C.text?.text||"",secondaryText:C.secondaryText?.text||""}})):s([])}catch(y){console.warn("Places autocomplete error:",y),l(!1);try{new window.google.maps.Geocoder().geocode({address:v,componentRestrictions:{country:"US"}},(x,S)=>{S==="OK"&&x&&x.length>0?s(x.slice(0,5).map(C=>({placeId:C.place_id,description:C.formatted_address,mainText:C.formatted_address.split(",")[0],secondaryText:C.formatted_address.split(",").slice(1).join(",").trim()}))):s([])})}catch(j){console.warn("Geocoding fallback error:",j),s([])}}},n))},[f,n]),b=r.useCallback(async v=>{if(!f)throw new Error("Google Places service not ready");try{const{Place:y}=await window.google.maps.importLibrary("places"),j=new y({id:v});await j.fetchFields({fields:["location","formattedAddress","addressComponents"]});const x=j.addressComponents||[];let S="",C="",D="";for(const k of x)k.types.includes("locality")?S=k.longText||k.shortText:k.types.includes("administrative_area_level_1")?C=k.shortText:k.types.includes("postal_code")&&(D=k.longText||k.shortText);return{lat:j.location?.lat()||0,lng:j.location?.lng()||0,formattedAddress:j.formattedAddress||"",city:S,state:C,zipCode:D}}catch(y){return console.warn("New Places API error, falling back to Geocoder:",y),new Promise((j,x)=>{new window.google.maps.Geocoder().geocode({placeId:v},(C,D)=>{if(D==="OK"&&C&&C[0]){const k=C[0],E=k.address_components||[];let N="",M="",I="";for(const L of E)L.types.includes("locality")?N=L.long_name:L.types.includes("administrative_area_level_1")?M=L.short_name:L.types.includes("postal_code")&&(I=L.long_name);j({lat:k.geometry.location.lat(),lng:k.geometry.location.lng(),formattedAddress:k.formatted_address||"",city:N,state:M,zipCode:I})}else x(new Error("Failed to get place details"))})})}},[f]),m=r.useCallback((v,y)=>new Promise((j,x)=>{if(!f||!u.current){x(new Error("Geocoder not ready"));return}u.current.geocode({location:{lat:v,lng:y}},(S,C)=>{if(C==="OK"&&S&&S[0]){const D=S[0],k=D.address_components||[];let E="",N="",M="";for(const L of k)L.types.includes("locality")?E=L.long_name:L.types.includes("administrative_area_level_1")?N=L.short_name:L.types.includes("postal_code")&&(M=L.long_name);let I=D.formatted_address;E&&N&&(I=`${E}, ${N}`),j({lat:v,lng:y,formattedAddress:I,city:E,state:N,zipCode:M})}else x(new Error("Failed to reverse geocode"))})}),[f]),d=r.useCallback(()=>{s([])},[]);return r.useEffect(()=>()=>{_.current&&clearTimeout(_.current)},[]),{predictions:a,isLoading:o,error:i,isReady:f,searchPlaces:p,getPlaceDetails:b,reverseGeocode:m,clearPredictions:d}},Te="",Ae=[{value:"bestDeal",label:"Best Deal"},{value:"distance",label:"Distance"},{value:"price",label:"Lowest Price"},{value:"rating",label:"Highest Rated"}],xn=({vehicle:e,initialLocation:n={lat:33.6846,lng:-117.8265},initialZipCode:a="Los Angeles, CA",showVehiclePreview:s=!0,defaultView:o="list",maxResults:l=20,cardVariant:i="full",onDealerSelect:c})=>{const[f,h]=r.useState(o),[u,_]=r.useState("bestDeal"),[p,b]=r.useState(null),[m,d]=r.useState(null),[v,y]=r.useState(!1),[j,x]=r.useState(!1),[S,C]=r.useState(a),[D,k]=r.useState(n),[E,N]=r.useState(n),[M,I]=r.useState(!1),[L,$]=r.useState(""),[Ye,ye]=r.useState(!1),[R,be]=r.useState(null),[xe,we]=r.useState(null),[U,q]=r.useState(!1),[Ce,ne]=r.useState(!1),[z,V]=r.useState(-1),ae=r.useRef(null),je=r.useRef(null),{predictions:T,isLoading:Xe,isReady:Qe,searchPlaces:et,getPlaceDetails:tt,reverseGeocode:nt,clearPredictions:Z}=bn({apiKey:Te,debounceMs:300}),A=r.useMemo(()=>{const g=gt(e.make,e.model,D.lat,D.lng,e.msrp,100,e.priceMin,e.priceMax);return ht(g,u).slice(0,l)},[e.make,e.model,e.msrp,e.priceMin,e.priceMax,D.lat,D.lng,u,l]),[Ne,se]=r.useState(!1);r.useEffect(()=>{if(!Ne&&A.length>0){const g=A.find(w=>w.dealScore.isBestDeal)||A[0];g&&(N({lat:g.lat,lng:g.lng}),se(!0))}},[A,Ne]);const re=r.useCallback(g=>{b(g),y(!0),c?.(g)},[c]),Se=r.useCallback(g=>{d(g?.id||null),g&&N({lat:g.lat,lng:g.lng})},[]),at=r.useCallback(g=>{d(g?.id||null)},[]),st=g=>{_(g),x(!1)},rt=()=>{$(""),Z(),q(!1),V(-1),I(!0),setTimeout(()=>je.current?.focus(),100)},ot=g=>{const w=g.target.value;$(w),V(-1),w.trim().length>=2?(et(w),q(!0)):(Z(),q(!1))},K=async g=>{try{const w=await tt(g.placeId);k({lat:w.lat,lng:w.lng}),N({lat:w.lat,lng:w.lng}),C(w.formattedAddress),$(""),Z(),q(!1),I(!1),se(!1),console.log("Location updated to:",w.formattedAddress,"Coords:",{lat:w.lat,lng:w.lng})}catch(w){console.error("Error getting place details:",w),alert("Unable to get location details. Please try again.")}},lt=g=>{if(!(!U||T.length===0))switch(g.key){case"ArrowDown":g.preventDefault(),V(w=>w<T.length-1?w+1:w);break;case"ArrowUp":g.preventDefault(),V(w=>w>0?w-1:-1);break;case"Enter":g.preventDefault(),z>=0&&T[z]&&K(T[z]);break;case"Escape":q(!1),Z();break}},it=async g=>{if(g.preventDefault(),z>=0&&T[z]){await K(T[z]);return}if(T.length>0){await K(T[0]);return}L.trim()&&alert("Please select a location from the suggestions.")},ct=async()=>{if(!("geolocation"in navigator)){alert("Geolocation is not supported by your browser.");return}ne(!0),navigator.geolocation.getCurrentPosition(async g=>{const{latitude:w,longitude:oe}=g.coords,Ee={lat:w,lng:oe};try{if(Qe){const le=await nt(w,oe);C(le.formattedAddress)}else C("Current Location")}catch(le){console.error("Reverse geocode failed:",le),C("Current Location")}k(Ee),N(Ee),I(!1),se(!1),ne(!1),console.log("Using current location:",w,oe)},g=>{ne(!1);let w="Unable to get your location.";switch(g.code){case g.PERMISSION_DENIED:w="Location access was denied. Please enable location permissions in your browser settings.";break;case g.POSITION_UNAVAILABLE:w="Location information is unavailable.";break;case g.TIMEOUT:w="Location request timed out. Please try again.";break}alert(w)},{enableHighAccuracy:!0,timeout:1e4,maximumAge:3e5})};r.useEffect(()=>{const g=w=>{ae.current&&!ae.current.contains(w.target)&&q(!1)};return U&&document.addEventListener("mousedown",g),()=>{document.removeEventListener("mousedown",g)}},[U]);const ke=r.useCallback((g,w)=>{we(g),be(w),ye(!0)},[]),dt=r.useCallback(g=>{console.log("Offer submitted:",g)},[]),ut=A.reduce((g,w)=>g+w.inventoryCount,0);return t.jsxs("div",{className:"dealer-locator",children:[s&&t.jsx(fe,{vehicle:e}),t.jsxs("div",{className:"dealer-locator__toolbar",children:[t.jsxs("div",{className:"dealer-locator__location",children:[t.jsx(X,{size:16}),t.jsx("span",{children:S}),t.jsx("button",{className:"dealer-locator__change-location",onClick:rt,children:"Change"})]}),t.jsxs("div",{className:"dealer-locator__sort",children:[t.jsx("span",{className:"dealer-locator__sort-label",children:"Sort:"}),t.jsxs("div",{className:"dealer-locator__sort-dropdown",children:[t.jsxs("button",{className:"dealer-locator__sort-trigger",onClick:()=>x(!j),"aria-expanded":j,"aria-haspopup":"listbox",children:[Ae.find(g=>g.value===u)?.label,t.jsx(Nt,{size:16,className:j?"rotated":""})]}),j&&t.jsx("ul",{className:"dealer-locator__sort-options",role:"listbox",children:Ae.map(g=>t.jsx("li",{children:t.jsx("button",{className:`dealer-locator__sort-option ${u===g.value?"active":""}`,onClick:()=>st(g.value),role:"option","aria-selected":u===g.value,children:g.label})},g.value))})]})]})]}),t.jsxs("div",{className:"dealer-locator__view-toggle",children:[t.jsxs("button",{className:`dealer-locator__view-btn ${f==="list"?"active":""}`,onClick:()=>h("list"),"aria-pressed":f==="list",children:[t.jsx(ze,{size:18}),t.jsx("span",{children:"List"})]}),t.jsxs("button",{className:`dealer-locator__view-btn ${f==="map"?"active":""}`,onClick:()=>h("map"),"aria-pressed":f==="map",children:[t.jsx(wt,{size:18}),t.jsx("span",{children:"Map"})]})]}),t.jsx("div",{className:"dealer-locator__summary",children:t.jsxs("span",{className:"dealer-locator__count",children:[A.length," dealers · ",ut," ",e.model," in stock"]})}),t.jsxs("div",{className:`dealer-locator__content ${v?"dealer-locator__content--panel-open":""}`,children:[t.jsx("div",{className:`dealer-locator__list ${f==="map"?"dealer-locator__list--hidden-mobile":""} ${v?"dealer-locator__list--panel-open":""}`,children:A.length===0?t.jsxs("div",{className:"dealer-locator__empty",children:[t.jsx("p",{children:"No dealers found in your area."}),t.jsx("p",{children:"Try expanding your search radius or changing your location."})]}):t.jsx("ul",{className:`dealer-locator__dealers ${i==="compact"?"dealer-locator__dealers--compact":""}`,role:"list",children:A.map((g,w)=>t.jsx("li",{children:t.jsx(pe,{dealer:g,vehicleModel:e.model,index:w+1,isSelected:p?.id===g.id,isHovered:m===g.id,variant:i,onSelect:re,onHover:Se})},g.id))})}),t.jsx("div",{className:`dealer-locator__map ${f==="list"?"dealer-locator__map--hidden-mobile":""} ${v?"dealer-locator__map--panel-open":""}`,children:t.jsx(Je,{dealers:A,center:E,selectedDealerId:p?.id,hoveredDealerId:m,onDealerSelect:re,onDealerHover:at,apiKey:Te,vehicleImage:e.image,vehicleImages:e.galleryImages,vehicleName:`${e.year} ${e.make} ${e.model}`,sidebarTitle:`${A.length} Dealers Near You`,sidebarContent:A.length===0?t.jsx("div",{className:"dealer-locator__empty",children:t.jsx("p",{children:"No dealers found in your area."})}):t.jsx("ul",{className:`dealer-locator__dealers ${i==="compact"?"dealer-locator__dealers--compact":""}`,role:"list",children:A.map((g,w)=>t.jsx("li",{children:t.jsx(pe,{dealer:g,vehicleModel:e.model,index:w+1,isSelected:p?.id===g.id,isHovered:m===g.id,variant:i,onSelect:re,onHover:Se})},g.id))}),isDealerDetailOpen:v,onCloseDealerDetail:()=>{y(!1),b(null)},dealerDetailContent:p?t.jsx(_e,{dealer:p,vehicleModel:e.model,onMakeOffer:ke}):null})}),p&&t.jsx($e,{dealer:p,vehicleModel:e.model,isOpen:v,onClose:()=>{y(!1),b(null)},onMakeOffer:ke})]}),xe&&R&&t.jsx(jt,{isOpen:Ye,onClose:()=>{ye(!1),we(null),be(null)},dealer:xe,vehicle:{year:R.year,make:R.make,model:R.model,trim:R.trim,msrp:R.price},onSubmitOffer:dt}),t.jsx("div",{className:"dealer-locator__sticky-header",children:t.jsx(fe,{vehicle:e,variant:"compact"})}),M&&t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"location-modal__backdrop",onClick:()=>I(!1)}),t.jsxs("div",{className:"location-modal",role:"dialog","aria-modal":"true","aria-labelledby":"location-modal-title",children:[t.jsx("h3",{id:"location-modal-title",className:"location-modal__title",children:"Change Location"}),t.jsxs("form",{onSubmit:it,className:"location-modal__form",children:[t.jsx("label",{htmlFor:"location-input",className:"location-modal__label",children:"Enter city, state or ZIP code"}),t.jsxs("div",{className:"location-modal__input-wrapper",ref:ae,children:[t.jsx("input",{ref:je,id:"location-input",type:"text",className:"location-modal__input",value:L,onChange:ot,onKeyDown:lt,onFocus:()=>{T.length>0&&q(!0)},placeholder:"e.g., Miami, FL or 33101",autoComplete:"off","aria-autocomplete":"list","aria-controls":"location-autocomplete-list","aria-expanded":U&&T.length>0}),Xe&&t.jsx("div",{className:"location-modal__input-loader",children:t.jsx(De,{size:18,className:"spinning"})}),U&&T.length>0&&t.jsx("ul",{id:"location-autocomplete-list",className:"location-modal__autocomplete",role:"listbox",children:T.map((g,w)=>t.jsxs("li",{role:"option","aria-selected":w===z,className:`location-modal__autocomplete-item ${w===z?"location-modal__autocomplete-item--selected":""}`,onClick:()=>K(g),onMouseEnter:()=>V(w),children:[t.jsx(X,{size:16,className:"location-modal__autocomplete-icon"}),t.jsxs("div",{className:"location-modal__autocomplete-text",children:[t.jsx("span",{className:"location-modal__autocomplete-main",children:g.mainText}),g.secondaryText&&t.jsx("span",{className:"location-modal__autocomplete-secondary",children:g.secondaryText})]})]},g.placeId))})]}),t.jsx("button",{type:"submit",className:"location-modal__submit",disabled:T.length===0&&L.trim().length>0,children:"Update Location"})]}),t.jsx("div",{className:"location-modal__divider",children:t.jsx("span",{children:"or"})}),t.jsx("button",{type:"button",className:"location-modal__current",onClick:ct,disabled:Ce,children:Ce?t.jsxs(t.Fragment,{children:[t.jsx(De,{size:18,className:"spinning"}),"Getting location..."]}):t.jsxs(t.Fragment,{children:[t.jsx(Q,{size:18}),"Use my current location"]})}),t.jsx("button",{type:"button",className:"location-modal__close",onClick:()=>I(!1),"aria-label":"Close",children:"✕"})]})]})]})};xn.__docgenInfo={description:"",methods:[],displayName:"DealerLocatorMap",props:{vehicle:{required:!0,tsType:{name:"VehicleInfo"},description:""},initialLocation:{required:!1,tsType:{name:"signature",type:"object",raw:"{ lat: number; lng: number }",signature:{properties:[{key:"lat",value:{name:"number",required:!0}},{key:"lng",value:{name:"number",required:!0}}]}},description:"",defaultValue:{value:"{ lat: 33.6846, lng: -117.8265 }",computed:!1}},initialZipCode:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:"'Los Angeles, CA'",computed:!1}},showVehiclePreview:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"true",computed:!1}},defaultView:{required:!1,tsType:{name:"union",raw:"'map' | 'list'",elements:[{name:"literal",value:"'map'"},{name:"literal",value:"'list'"}]},description:"",defaultValue:{value:"'list'",computed:!1}},maxResults:{required:!1,tsType:{name:"number"},description:"",defaultValue:{value:"20",computed:!1}},cardVariant:{required:!1,tsType:{name:"union",raw:"'full' | 'compact'",elements:[{name:"literal",value:"'full'"},{name:"literal",value:"'compact'"}]},description:"",defaultValue:{value:"'full'",computed:!1}},onDealerSelect:{required:!1,tsType:{name:"signature",type:"function",raw:"(dealer: DealerWithScore) => void",signature:{arguments:[{type:{name:"DealerWithScore"},name:"dealer"}],return:{name:"void"}}},description:""}}};export{xn as D,fe as V,pe as a};
