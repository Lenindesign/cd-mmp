import{u as L,r as o,d as M,j as e}from"./iframe-WkvYeMlb.js";import{b as U}from"./vehicleService-ByoDejvg.js";import{B as j}from"./Button-rLyju16z.js";import{O as f}from"./OptimizedImage-DbxPb3A3.js";import{C as X}from"./chevron-down-1d5Ns5HV.js";import{B as F}from"./bookmark-C8JkXLsM.js";import{A as G}from"./arrow-right-DnezYU9r.js";import{C as W}from"./chevron-left-DtaHYHCp.js";import{C as J}from"./chevron-right-CGAkb3ZD.js";import{I as K}from"./image-vLA06y-x.js";const Q=({vehicle:s,animateButtons:n=!1,showModelInButtons:N=!1})=>{const{user:v,isAuthenticated:S,addSavedVehicle:I,removeSavedVehicle:R}=L(),[l,h]=o.useState(!1),[y,m]=o.useState(0),[V,w]=o.useState(!1),[t,T]=o.useState(!1),_=o.useRef(null),A=o.useRef(null),u=o.useRef(null),p=o.useRef(0),c=o.useRef(0),k=M(),g=`${s.year} ${s.make} ${s.model}`,i=v?.savedVehicles?.some(a=>a.name===g)||!1,D=()=>{if(!S){k("/sign-in");return}if(i){const a=v?.savedVehicles?.find(r=>r.name===g);a&&R(a.id)}else I({id:`${s.year}-${s.make}-${s.model}`.toLowerCase().replace(/\s+/g,"-"),name:g,ownership:"want"})};o.useEffect(()=>{if(!n||!u.current)return;const a=new IntersectionObserver(r=>{r.forEach(P=>{P.isIntersecting&&(T(!0),a.disconnect())})},{threshold:.5});return a.observe(u.current),()=>a.disconnect()},[n]);const x=U(s.make,s.model);o.useEffect(()=>{const a=r=>{_.current&&!_.current.contains(r.target)&&h(!1)};return document.addEventListener("mousedown",a),()=>document.removeEventListener("mousedown",a)},[]);const O=a=>{if(h(!1),parseInt(a)!==s.year){const r=s.model.replace(/\s+/g,"-");k(`/${a}/${s.make}/${r}`)}},q="https://d2kde5ohu8qb21.cloudfront.net/files/659f9ed490e84500088bd486/012-2024-lamborghini-revuelto.jpg",C=s.galleryImages||[],b=[s.image||q,...C].filter(Boolean),d=b.length,z=o.useCallback(a=>{m(a)},[]),E=o.useCallback(()=>{m(a=>a===0?d-1:a-1)},[d]),$=o.useCallback(()=>{m(a=>a===d-1?0:a+1)},[d]),Y=a=>{p.current=a.touches[0].clientX,c.current=a.touches[0].clientX,w(!0)},H=a=>{c.current=a.touches[0].clientX},B=()=>{w(!1);const a=p.current-c.current;Math.abs(a)>50&&(a>0?$():E()),p.current=0,c.current=0};return e.jsxs("section",{className:"hero",children:[e.jsx("div",{className:"hero__breadcrumb",children:e.jsx("div",{className:"container",children:e.jsxs("nav",{className:"hero__breadcrumb-nav","aria-label":"Breadcrumb",children:[e.jsx("a",{href:"#",className:"hero__breadcrumb-link",children:"Home"}),e.jsx("span",{className:"hero__breadcrumb-sep",children:"/"}),e.jsx("a",{href:"#",className:"hero__breadcrumb-link",children:s.make}),e.jsx("span",{className:"hero__breadcrumb-sep",children:"/"}),e.jsx("a",{href:"#",className:"hero__breadcrumb-link hero__breadcrumb-current",children:s.model})]})})}),e.jsx("div",{className:"hero__top-bar",children:e.jsx("div",{className:"container",children:e.jsxs("div",{className:"hero__top-bar-content",children:[e.jsxs("div",{className:"hero__year-selector-wrapper",ref:_,children:[e.jsxs("button",{className:`hero__year-selector ${l?"hero__year-selector--open":""}`,onClick:()=>h(!l),"aria-expanded":l,"aria-haspopup":"listbox",children:[e.jsx("span",{children:s.year}),e.jsx(X,{size:16,className:l?"hero__year-chevron--open":""})]}),l&&x.length>1&&e.jsx("ul",{className:"hero__year-dropdown",role:"listbox",children:x.map(a=>e.jsx("li",{role:"option","aria-selected":parseInt(a)===s.year,className:`hero__year-option ${parseInt(a)===s.year?"hero__year-option--selected":""}`,onClick:()=>O(a),children:a},a))}),l&&x.length<=1&&e.jsx("div",{className:"hero__year-dropdown hero__year-dropdown--empty",children:e.jsxs("span",{children:["Only ",s.year," available"]})})]}),e.jsxs("button",{className:`hero__favorites-btn ${i?"hero__favorites-btn--active":""}`,onClick:D,children:[e.jsx(F,{size:16,fill:i?"currentColor":"none"}),e.jsx("span",{children:i?"SAVED":"SAVE"})]})]})})}),e.jsx("div",{className:"hero__main",children:e.jsxs("div",{className:"container",children:[e.jsxs("div",{className:"hero__title-row",children:[e.jsxs("h1",{className:"hero__title",children:[s.year," ",s.make," ",s.model]}),e.jsxs("div",{className:"hero__rating",children:[e.jsxs("div",{className:"hero__rating-numbers",children:[e.jsx("span",{className:"hero__rating-score",children:s.rating}),e.jsx("span",{className:"hero__rating-max",children:"/10"})]}),e.jsxs("div",{className:"hero__rating-badge",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",width:"16",height:"16",children:e.jsx("path",{d:"m22.735 8.905-.955-.955V6.518a4.253 4.253 0 0 0-4.273-4.273h-1.432l-.955-.954C13.45-.38 10.61-.38 8.938 1.29l-.955.954H6.551a4.253 4.253 0 0 0-4.273 4.273V7.95l-.955.955c-1.67 1.671-1.67 4.512 0 6.183l.955.955v1.432a4.253 4.253 0 0 0 4.273 4.273h1.432l.955.954c1.67 1.671 4.511 1.671 6.182 0l.955-.954h1.432a4.253 4.253 0 0 0 4.273-4.273v-1.432l.955-.955c1.67-1.671 1.67-4.512 0-6.183zm-6.421 1.671-4.512 4.512c-.238.238-.477.477-.955.477-.477 0-.716-.239-.954-.477l-2.149-2.149c-.477-.477-.477-1.432 0-1.91.478-.477 1.432-.477 1.91 0l1.193 1.194 3.557-3.318c.477-.716 1.432-.716 1.91 0a1.154 1.154 0 0 1 0 1.671z",fill:"currentColor"})}),e.jsx("span",{children:"C/D RATING"})]})]})]}),e.jsxs("div",{className:"hero__gallery hero__gallery--desktop",children:[e.jsx("div",{className:"hero__gallery-main",children:e.jsx(f,{src:s.image,alt:`${s.year} ${s.make} ${s.model}`,className:"hero__gallery-main-img",loading:"eager",aspectRatio:"16/10"})}),e.jsx("div",{className:"hero__gallery-thumbs",children:C.slice(0,3).map((a,r)=>e.jsxs("div",{className:"hero__gallery-thumb",children:[e.jsx(f,{src:a,alt:`${s.model} view ${r+1}`,aspectRatio:"16/10"}),r===2&&e.jsxs("div",{className:"hero__gallery-thumb-overlay",children:[e.jsx("span",{children:"View Photos"}),e.jsx(G,{size:18})]})]},r))})]}),e.jsxs("div",{className:`hero__carousel hero__carousel--mobile ${V?"dragging":""}`,ref:A,onTouchStart:Y,onTouchMove:H,onTouchEnd:B,children:[e.jsx("div",{className:"hero__carousel-track",style:{transform:`translateX(-${y*100}%)`},children:b.map((a,r)=>e.jsx("div",{className:"hero__carousel-slide",children:e.jsx(f,{src:a,alt:`${s.year} ${s.make} ${s.model} - View ${r+1}`,className:"hero__carousel-img",loading:r===0?"eager":"lazy",aspectRatio:"16/9"})},r))}),e.jsx("button",{className:"hero__carousel-arrow hero__carousel-arrow--prev",onClick:E,"aria-label":"Previous image",children:e.jsx(W,{size:24})}),e.jsx("button",{className:"hero__carousel-arrow hero__carousel-arrow--next",onClick:$,"aria-label":"Next image",children:e.jsx(J,{size:24})}),e.jsxs("button",{className:"hero__carousel-view-photos",children:[e.jsx(K,{size:20}),e.jsx("span",{children:"View Photos"})]}),e.jsx("div",{className:"hero__carousel-dots",children:b.map((a,r)=>e.jsx("button",{className:`hero__carousel-dot ${r===y?"hero__carousel-dot--active":""}`,onClick:()=>z(r),"aria-label":`Go to slide ${r+1}`},r))})]}),e.jsxs("div",{className:"hero__photo-credit",children:[e.jsx("span",{className:"hero__photographer",children:s.photographer||"MICHAEL SIMARI"}),e.jsx("span",{className:"hero__credit-sep",children:"|"}),e.jsx("span",{className:"hero__publication",children:"CAR AND DRIVER"})]}),e.jsxs("div",{className:"hero__bottom-row",children:[e.jsxs("div",{className:"hero__msrp",children:[e.jsx("span",{className:"hero__msrp-label",children:"MSRP"}),e.jsxs("div",{className:"hero__msrp-price-row",children:[e.jsx("span",{className:"hero__msrp-price",children:s.priceRange}),e.jsxs("div",{ref:u,className:`hero__shop-buttons ${n?t?"hero__shop-buttons--animated":"hero__shop-buttons--hidden":""}`,children:[e.jsx(j,{variant:"primary",size:"small",className:`hero__shop-btn ${n&&t?"hero__shop-btn--animate-1":""}`,children:N?`SHOP NEW ${s.model.toUpperCase()}`:"SHOP NEW"}),e.jsx(j,{variant:"outline",size:"small",className:`hero__shop-btn hero__shop-btn--outline ${n&&t?"hero__shop-btn--animate-2":""}`,children:N?`SHOP USED ${s.model.toUpperCase()}`:"SHOP USED"}),e.jsx(j,{variant:"outline",size:"small",className:`hero__shop-btn hero__shop-btn--trade-in ${n&&t?"hero__shop-btn--animate-3":""}`,children:"GET YOUR TRADE-IN VALUE"})]})]})]}),(s.editorsChoice||s.tenBest||s.evOfTheYear)&&e.jsxs("div",{className:"hero__accolades",children:[e.jsxs("div",{className:"hero__accolades-header",children:[e.jsxs("span",{className:"hero__accolades-title",children:[e.jsx("em",{children:"Car and Driver"})," Accolades"]}),e.jsx("a",{href:"#",className:"hero__accolades-link",children:"What's this?"})]}),e.jsxs("div",{className:"hero__accolades-badges",children:[s.editorsChoice&&e.jsxs("div",{className:"hero__accolade",children:[e.jsx("div",{className:"hero__accolade-icon hero__accolade-icon--ec",children:e.jsx("img",{src:"https://www.caranddriver.com/_assets/design-tokens/caranddriver/static/images/badges-no-text/editors-choice.7ecd596.svg?primary=%2523FEFEFE",alt:"Editor's Choice",width:"48",height:"44"})}),e.jsxs("span",{className:"hero__accolade-label",children:["Editors'",e.jsx("br",{}),"Choice"]})]}),s.evOfTheYear&&e.jsxs("div",{className:"hero__accolade",children:[e.jsx("div",{className:"hero__accolade-icon hero__accolade-icon--ev",children:e.jsx("img",{src:"https://www.caranddriver.com/_assets/design-tokens/caranddriver/static/images/badges-no-text/ev-of-the-year.721e420.svg",alt:"EV of the Year",width:"48",height:"49"})}),e.jsxs("span",{className:"hero__accolade-label",children:["EV of the",e.jsx("br",{}),"Year"]})]}),s.tenBest&&e.jsxs("div",{className:"hero__accolade",children:[e.jsx("div",{className:"hero__accolade-icon hero__accolade-icon--10best",children:e.jsx("img",{src:"https://www.caranddriver.com/_assets/design-tokens/caranddriver/static/images/badges-no-text/ten-best.bcb6ac1.svg",alt:"10Best",width:"48",height:"54"})}),e.jsx("span",{className:"hero__accolade-label",children:"10Best"})]})]})]})]})]})})]})};Q.__docgenInfo={description:"",methods:[],displayName:"Hero",props:{vehicle:{required:!0,tsType:{name:"signature",type:"object",raw:`{
  make: string;
  model: string;
  year: number;
  tagline: string;
  rating: number;
  priceRange: string;
  image: string;
  galleryImages?: string[];
  photographer?: string;
  editorsChoice?: boolean;
  tenBest?: boolean;
  evOfTheYear?: boolean;
}`,signature:{properties:[{key:"make",value:{name:"string",required:!0}},{key:"model",value:{name:"string",required:!0}},{key:"year",value:{name:"number",required:!0}},{key:"tagline",value:{name:"string",required:!0}},{key:"rating",value:{name:"number",required:!0}},{key:"priceRange",value:{name:"string",required:!0}},{key:"image",value:{name:"string",required:!0}},{key:"galleryImages",value:{name:"Array",elements:[{name:"string"}],raw:"string[]",required:!1}},{key:"photographer",value:{name:"string",required:!1}},{key:"editorsChoice",value:{name:"boolean",required:!1}},{key:"tenBest",value:{name:"boolean",required:!1}},{key:"evOfTheYear",value:{name:"boolean",required:!1}}]}},description:""},animateButtons:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},showModelInButtons:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}}}};export{Q as H};
