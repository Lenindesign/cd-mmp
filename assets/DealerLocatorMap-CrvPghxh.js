import{j as n,r as i,g as Re,R as S}from"./iframe-BjFtNjKF.js";import{S as H}from"./star-duLKwtpD.js";import{f as ae,a as X,b as Ue,g as Ve,s as We}from"./dealerService-DBjoBGu0.js";import{c as Z}from"./createLucideIcon-DfJbe4c6.js";import{C as Ge}from"./chevron-right-Do8qR6Qb.js";import{M as W}from"./map-pin-BJy3MIC6.js";import{P as ge}from"./phone-2QMepBQg.js";import{N as ve}from"./navigation-BZMIS7Nz.js";import{D as He}from"./dollar-sign-p29fOy_K.js";import{X as Ze}from"./x-BU8ylF0A.js";import{C as Je}from"./clock-CX1iZnGk.js";import{r as Q}from"./index-B94bmRne.js";import{M as Ke}from"./MakeOfferModal-Slpgvo24.js";import{C as Ye}from"./chevron-down-DH-u-O1_.js";const Xe=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],B=Z("award",Xe);const Qe=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],et=Z("external-link",Qe);const tt=[["path",{d:"M3 5h.01",key:"18ugdj"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 19h.01",key:"noohij"}],["path",{d:"M8 5h13",key:"1pao27"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 19h13",key:"m83p4d"}]],nt=Z("list",tt);const at=[["path",{d:"M14.106 5.553a2 2 0 0 0 1.788 0l3.659-1.83A1 1 0 0 1 21 4.619v12.764a1 1 0 0 1-.553.894l-4.553 2.277a2 2 0 0 1-1.788 0l-4.212-2.106a2 2 0 0 0-1.788 0l-3.659 1.83A1 1 0 0 1 3 19.381V6.618a1 1 0 0 1 .553-.894l4.553-2.277a2 2 0 0 1 1.788 0z",key:"169xi5"}],["path",{d:"M15 5.764v15",key:"1pn4in"}],["path",{d:"M9 3.236v15",key:"1uimfh"}]],rt=Z("map",at),ee=({vehicle:e,variant:t="full",className:a=""})=>{const r=s=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",maximumFractionDigits:0}).format(s),o=`${e.year} ${e.make} ${e.model}`;return t==="compact"?n.jsx("div",{className:`vehicle-context vehicle-context--compact ${a}`,children:n.jsxs("div",{className:"vehicle-context__mini",children:[n.jsx("span",{className:"vehicle-context__mini-icon",children:""}),n.jsxs("span",{className:"vehicle-context__mini-name",children:[e.year," ",e.model]}),n.jsx("span",{className:"vehicle-context__mini-price",children:r(e.msrp)})]})}):n.jsxs("header",{className:`vehicle-context ${a}`,children:[n.jsxs("h1",{className:"vehicle-context__title",children:["Find Dealers for ",o]}),n.jsxs("div",{className:"vehicle-context__content",children:[n.jsx("div",{className:"vehicle-context__image-wrapper",children:n.jsx("img",{src:e.image,alt:o,className:"vehicle-context__image",loading:"eager"})}),n.jsxs("div",{className:"vehicle-context__details",children:[n.jsxs("div",{className:"vehicle-context__specs",children:[n.jsxs("span",{className:"vehicle-context__spec",children:[n.jsx("strong",{children:"MSRP"})," ",r(e.msrp)]}),e.bodyStyle&&n.jsx("span",{className:"vehicle-context__spec vehicle-context__spec--divider",children:e.bodyStyle}),e.mpg&&n.jsxs("span",{className:"vehicle-context__spec vehicle-context__spec--divider",children:[e.mpg," MPG"]}),e.rating&&n.jsxs("span",{className:"vehicle-context__spec vehicle-context__spec--divider vehicle-context__spec--rating",children:[n.jsx(H,{size:14,fill:"var(--color-gold)",stroke:"var(--color-gold)"}),e.rating," C/D Rating"]})]}),e.trim&&n.jsx("span",{className:"vehicle-context__trim",children:e.trim})]})]})]})};ee.__docgenInfo={description:"",methods:[],displayName:"VehicleContextHeader",props:{vehicle:{required:!0,tsType:{name:"VehicleInfo"},description:""},variant:{required:!1,tsType:{name:"union",raw:"'full' | 'compact'",elements:[{name:"literal",value:"'full'"},{name:"literal",value:"'compact'"}]},description:"",defaultValue:{value:"'full'",computed:!1}},className:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:"''",computed:!1}}}};const _e=({dealer:e,vehicleModel:t,index:a,isSelected:r=!1,isHovered:o=!1,variant:s="full",onSelect:c,onHover:l,onCallClick:d,onDirectionsClick:u,onMakeOfferClick:m})=>{const g=()=>{c?.(e)},p=y=>{y.stopPropagation(),d?.(e)},_=y=>{y.stopPropagation(),u?.(e)},f=y=>{y.stopPropagation(),m?.(e)},v=y=>n.jsxs("span",{className:"dealer-card__stars",children:[n.jsx(H,{size:14,fill:"var(--color-gold)",stroke:"var(--color-gold)"}),n.jsx("span",{children:y.toFixed(1)})]});return s==="compact"?n.jsxs("button",{className:`dealer-card dealer-card--compact ${r?"dealer-card--selected":""} ${o?"dealer-card--hovered":""}`,onClick:g,onMouseEnter:()=>l?.(e),onMouseLeave:()=>l?.(null),"aria-pressed":r,children:[a!==void 0&&n.jsx("span",{className:`dealer-card__number ${e.dealScore.isBestDeal?"dealer-card__number--best":""}`,children:a}),n.jsxs("div",{className:"dealer-card__info",children:[e.dealScore.isBestDeal&&n.jsxs("span",{className:"dealer-card__badge dealer-card__badge--best",children:[n.jsx(B,{size:12}),"Best Deal"]}),n.jsx("div",{className:"dealer-card__header",children:n.jsx("h3",{className:"dealer-card__name",children:e.name})}),n.jsxs("div",{className:"dealer-card__meta",children:[n.jsxs("span",{className:"dealer-card__inventory",children:[e.inventoryCount," in stock 路 ",ae(e.lowestPrice)]}),n.jsxs("span",{className:"dealer-card__rating-distance",children:[v(e.rating)," 路 ",X(e.distance||0)]})]})]}),n.jsx(Ge,{size:16,className:"dealer-card__chevron"})]}):n.jsxs("article",{className:`dealer-card ${r?"dealer-card--selected":""} ${o?"dealer-card--hovered":""} ${e.dealScore.isBestDeal?"dealer-card--best-deal":""}`,onClick:g,onMouseEnter:()=>l?.(e),onMouseLeave:()=>l?.(null),role:"button",tabIndex:0,"aria-pressed":r,onKeyDown:y=>{(y.key==="Enter"||y.key===" ")&&(y.preventDefault(),g())},children:[a!==void 0&&n.jsx("span",{className:`dealer-card__number ${e.dealScore.isBestDeal?"dealer-card__number--best":""}`,children:a}),e.dealScore.isBestDeal&&n.jsx("div",{className:"dealer-card__badge-row",children:n.jsxs("span",{className:"dealer-card__badge dealer-card__badge--best",children:[n.jsx(B,{size:14}),"Best Deal"]})}),n.jsxs("div",{className:"dealer-card__content",children:[n.jsx("div",{className:"dealer-card__header",children:n.jsx("h3",{className:"dealer-card__name",children:e.name})}),n.jsx("div",{className:"dealer-card__inventory-row",children:n.jsxs("span",{className:"dealer-card__inventory-count",children:[e.inventoryCount," ",t," in stock"]})}),n.jsx("div",{className:"dealer-card__price-row",children:n.jsx("span",{className:"dealer-card__price",children:Ue(e.lowestPrice,e.highestPrice)})}),n.jsxs("div",{className:"dealer-card__meta-row",children:[n.jsxs("span",{className:"dealer-card__rating",children:[v(e.rating),n.jsxs("span",{className:"dealer-card__review-count",children:["(",e.reviewCount,")"]})]}),n.jsxs("span",{className:"dealer-card__distance",children:[n.jsx(W,{size:14}),X(e.distance||0)]})]}),n.jsxs("div",{className:"dealer-card__address",children:[n.jsx("span",{children:e.address}),n.jsxs("span",{children:[e.city,", ",e.state," ",e.zipCode]})]}),n.jsxs("div",{className:"dealer-card__actions",children:[n.jsxs("a",{href:`tel:${e.phone.replace(/[^0-9]/g,"")}`,className:"dealer-card__action dealer-card__action--call",onClick:p,"aria-label":`Call ${e.name}`,children:[n.jsx(ge,{size:16}),n.jsx("span",{children:"Call"})]}),n.jsxs("a",{href:`https://www.google.com/maps/dir/?api=1&destination=${encodeURIComponent(`${e.address}, ${e.city}, ${e.state} ${e.zipCode}`)}`,target:"_blank",rel:"noopener noreferrer",className:"dealer-card__action dealer-card__action--directions",onClick:_,"aria-label":`Get directions to ${e.name}`,children:[n.jsx(ve,{size:16}),n.jsx("span",{children:"Directions"})]}),m&&n.jsxs("button",{className:"dealer-card__action dealer-card__action--offer",onClick:f,"aria-label":`Make an offer at ${e.name}`,children:[n.jsx(He,{size:16}),n.jsx("span",{children:"Make Offer"})]})]})]})]})};_e.__docgenInfo={description:"",methods:[],displayName:"DealerCard",props:{dealer:{required:!0,tsType:{name:"DealerWithScore"},description:""},vehicleModel:{required:!0,tsType:{name:"string"},description:""},index:{required:!1,tsType:{name:"number"},description:""},isSelected:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},isHovered:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},variant:{required:!1,tsType:{name:"union",raw:"'full' | 'compact'",elements:[{name:"literal",value:"'full'"},{name:"literal",value:"'compact'"}]},description:"",defaultValue:{value:"'full'",computed:!1}},onSelect:{required:!1,tsType:{name:"signature",type:"function",raw:"(dealer: DealerWithScore) => void",signature:{arguments:[{type:{name:"DealerWithScore"},name:"dealer"}],return:{name:"void"}}},description:""},onHover:{required:!1,tsType:{name:"signature",type:"function",raw:"(dealer: DealerWithScore | null) => void",signature:{arguments:[{type:{name:"union",raw:"DealerWithScore | null",elements:[{name:"DealerWithScore"},{name:"null"}]},name:"dealer"}],return:{name:"void"}}},description:""},onCallClick:{required:!1,tsType:{name:"signature",type:"function",raw:"(dealer: DealerWithScore) => void",signature:{arguments:[{type:{name:"DealerWithScore"},name:"dealer"}],return:{name:"void"}}},description:""},onDirectionsClick:{required:!1,tsType:{name:"signature",type:"function",raw:"(dealer: DealerWithScore) => void",signature:{arguments:[{type:{name:"DealerWithScore"},name:"dealer"}],return:{name:"void"}}},description:""},onMakeOfferClick:{required:!1,tsType:{name:"signature",type:"function",raw:"(dealer: DealerWithScore) => void",signature:{arguments:[{type:{name:"DealerWithScore"},name:"dealer"}],return:{name:"void"}}},description:""}}};const ye=({dealer:e,vehicleModel:t,isOpen:a,onClose:r,onMakeOffer:o})=>{const s=i.useRef(null);if(i.useEffect(()=>{const l=d=>{d.key==="Escape"&&a&&r()};return document.addEventListener("keydown",l),()=>document.removeEventListener("keydown",l)},[a,r]),i.useEffect(()=>(a?document.body.style.overflow="hidden":document.body.style.overflow="",()=>{document.body.style.overflow=""}),[a]),i.useEffect(()=>{a&&s.current&&s.current.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])')[0]?.focus()},[a]),!a)return null;const c=()=>{if(!e.hours)return"Hours not available";const d=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"][new Date().getDay()];return e.hours[d]||"Closed"};return n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"bottom-sheet__backdrop",onClick:r,"aria-hidden":"true"}),n.jsxs("div",{ref:s,className:"bottom-sheet",role:"dialog","aria-modal":"true","aria-labelledby":"dealer-sheet-title",children:[n.jsx("div",{className:"bottom-sheet__handle"}),n.jsx("button",{className:"bottom-sheet__close",onClick:r,"aria-label":"Close dealer details",children:n.jsx(Ze,{size:20})}),n.jsxs("div",{className:"bottom-sheet__content",children:[n.jsxs("header",{className:"bottom-sheet__header",children:[e.dealScore.isBestDeal&&n.jsxs("span",{className:"bottom-sheet__badge",children:[n.jsx(B,{size:14}),"Best Deal"]}),n.jsx("h2",{id:"dealer-sheet-title",className:"bottom-sheet__title",children:e.name}),n.jsxs("address",{className:"bottom-sheet__address",children:[e.address,n.jsx("br",{}),e.city,", ",e.state," ",e.zipCode]}),n.jsxs("div",{className:"bottom-sheet__rating",children:[n.jsx(H,{size:16,fill:"var(--color-gold)",stroke:"var(--color-gold)"}),n.jsx("span",{className:"bottom-sheet__rating-value",children:e.rating.toFixed(1)}),n.jsxs("span",{className:"bottom-sheet__rating-count",children:["(",e.reviewCount," reviews)"]})]})]}),n.jsxs("div",{className:"bottom-sheet__hours",children:[n.jsx(Je,{size:16}),n.jsxs("span",{children:["Today: ",c()]})]}),n.jsxs("section",{className:"bottom-sheet__inventory",children:[n.jsxs("h3",{className:"bottom-sheet__section-title",children:["Inventory for ",t]}),n.jsx("ul",{className:"bottom-sheet__inventory-list",children:e.inventory.map((l,d)=>n.jsxs("li",{className:"bottom-sheet__inventory-item",children:[n.jsxs("div",{className:"bottom-sheet__inventory-row",children:[n.jsxs("div",{className:"bottom-sheet__inventory-details",children:[n.jsxs("span",{className:"bottom-sheet__inventory-trim",children:[l.isNew?"New":"Used"," ",l.year," ",l.make," ",l.model," ",l.trim]}),n.jsxs("span",{className:"bottom-sheet__inventory-meta",children:[l.exteriorColor,!l.isNew&&l.mileage&&n.jsxs(n.Fragment,{children:[" 路 ",l.mileage.toLocaleString()," mi"]})]})]}),n.jsx("span",{className:"bottom-sheet__inventory-price",children:ae(l.price)})]}),n.jsx("button",{className:"bottom-sheet__inventory-offer",onClick:()=>o?.(e,l),children:"Make an Offer"})]},d))})]}),e.certifications&&e.certifications.length>0&&n.jsxs("section",{className:"bottom-sheet__certifications",children:[n.jsx("h3",{className:"bottom-sheet__section-title",children:"Certifications"}),n.jsx("ul",{className:"bottom-sheet__cert-list",children:e.certifications.map((l,d)=>n.jsx("li",{className:"bottom-sheet__cert",children:l},d))})]}),n.jsxs("div",{className:"bottom-sheet__actions",children:[n.jsxs("a",{href:`tel:${e.phone.replace(/[^0-9]/g,"")}`,className:"bottom-sheet__action bottom-sheet__action--primary",children:[n.jsx(ge,{size:18}),n.jsx("span",{children:"Call Dealer"})]}),n.jsxs("a",{href:`https://www.google.com/maps/dir/?api=1&destination=${encodeURIComponent(`${e.address}, ${e.city}, ${e.state} ${e.zipCode}`)}`,target:"_blank",rel:"noopener noreferrer",className:"bottom-sheet__action bottom-sheet__action--secondary",children:[n.jsx(ve,{size:18}),n.jsx("span",{children:"Get Directions"})]})]}),e.website&&n.jsxs("a",{href:e.website,target:"_blank",rel:"noopener noreferrer",className:"bottom-sheet__website",children:["Visit Dealer Website",n.jsx(et,{size:14})]})]})]})]})};ye.__docgenInfo={description:"",methods:[],displayName:"DealerBottomSheet",props:{dealer:{required:!0,tsType:{name:"DealerWithScore"},description:""},vehicleModel:{required:!0,tsType:{name:"string"},description:""},isOpen:{required:!0,tsType:{name:"boolean"},description:""},onClose:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},onMakeOffer:{required:!1,tsType:{name:"signature",type:"function",raw:"(dealer: DealerWithScore, vehicle: VehicleInventoryItem) => void",signature:{arguments:[{type:{name:"DealerWithScore"},name:"dealer"},{type:{name:"VehicleInventoryItem"},name:"vehicle"}],return:{name:"void"}}},description:""}}};var Y,ue;function ot(){return ue||(ue=1,Y=function e(t,a){if(t===a)return!0;if(t&&a&&typeof t=="object"&&typeof a=="object"){if(t.constructor!==a.constructor)return!1;var r,o,s;if(Array.isArray(t)){if(r=t.length,r!=a.length)return!1;for(o=r;o--!==0;)if(!e(t[o],a[o]))return!1;return!0}if(t.constructor===RegExp)return t.source===a.source&&t.flags===a.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===a.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===a.toString();if(s=Object.keys(t),r=s.length,r!==Object.keys(a).length)return!1;for(o=r;o--!==0;)if(!Object.prototype.hasOwnProperty.call(a,s[o]))return!1;for(o=r;o--!==0;){var c=s[o];if(!e(t[c],a[c]))return!1}return!0}return t!==t&&a!==a}),Y}var st=ot();const be=Re(st),lt="1.7.1";function z(e,t){var a={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(a[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(a[r[o]]=e[r[o]]);return a}function te(e,t,a,r){function o(s){return s instanceof a?s:new a(function(c){c(s)})}return new(a||(a=Promise))(function(s,c){function l(m){try{u(r.next(m))}catch(g){c(g)}}function d(m){try{u(r.throw(m))}catch(g){c(g)}}function u(m){m.done?s(m.value):o(m.value).then(l,d)}u((r=r.apply(e,[])).next())})}const A={NOT_LOADED:"NOT_LOADED",LOADING:"LOADING",LOADED:"LOADED",FAILED:"FAILED",AUTH_FAILURE:"AUTH_FAILURE"},it="https://maps.googleapis.com/maps/api/js";class G{static load(t,a){return te(this,void 0,void 0,function*(){var r,o;const s=t.libraries?t.libraries.split(","):[],c=this.serializeParams(t);this.listeners.push(a),!((o=(r=window.google)===null||r===void 0?void 0:r.maps)===null||o===void 0)&&o.importLibrary?(this.serializedApiParams||(this.loadingStatus=A.LOADED),this.notifyLoadingStatusListeners()):(this.serializedApiParams=c,this.initImportLibrary(t)),this.serializedApiParams&&this.serializedApiParams!==c&&console.warn("[google-maps-api-loader] The maps API has already been loaded with different parameters and will not be loaded again. Refresh the page for new values to have effect.");const l=["maps",...s];yield Promise.all(l.map(d=>google.maps.importLibrary(d)))})}static serializeParams(t){return[t.v,t.key,t.language,t.region,t.authReferrerPolicy,t.solutionChannel].join("/")}static initImportLibrary(t){if(window.google||(window.google={}),window.google.maps||(window.google.maps={}),window.google.maps.importLibrary){console.error("[google-maps-api-loader-internal]: initImportLibrary must only be called once");return}let a=null;const r=()=>a||(a=new Promise((o,s)=>{var c;const l=document.createElement("script"),d=new URLSearchParams;for(const[u,m]of Object.entries(t)){const g=u.replace(/[A-Z]/g,p=>"_"+p[0].toLowerCase());d.set(g,String(m))}d.set("loading","async"),d.set("callback","__googleMapsCallback__"),l.async=!0,l.src=it+"?"+d.toString(),l.nonce=((c=document.querySelector("script[nonce]"))===null||c===void 0?void 0:c.nonce)||"",l.onerror=()=>{this.loadingStatus=A.FAILED,this.notifyLoadingStatusListeners(),s(new Error("The Google Maps JavaScript API could not load."))},window.__googleMapsCallback__=()=>{this.loadingStatus=A.LOADED,this.notifyLoadingStatusListeners(),o()},window.gm_authFailure=()=>{this.loadingStatus=A.AUTH_FAILURE,this.notifyLoadingStatusListeners()},this.loadingStatus=A.LOADING,this.notifyLoadingStatusListeners(),document.head.append(l)}),a);google.maps.importLibrary=o=>r().then(()=>google.maps.importLibrary(o))}static notifyLoadingStatusListeners(){for(const t of this.listeners)t(this.loadingStatus)}}G.loadingStatus=A.NOT_LOADED;G.listeners=[];const ct="GMP_visgl_rgmlibrary_v1_default",dt=[`gmp_visgl_reactgooglemaps_v${lt}`],R=S.createContext(null);function ut(){const[e,t]=i.useState({});return{mapInstances:e,addMapInstance:(s,c="default")=>{t(l=>Object.assign(Object.assign({},l),{[c]:s}))},removeMapInstance:(s="default")=>{t(c=>{var l=s;c[l];var d=z(c,[typeof l=="symbol"?l:l+""]);return d})},clearMapInstances:()=>{t({})}}}function mt(e){const{onLoad:t,onError:a,apiKey:r,version:o,libraries:s=[]}=e,c=z(e,["onLoad","onError","apiKey","version","libraries"]),[l,d]=i.useState(G.loadingStatus),[u,m]=i.useReducer((f,v)=>f[v.name]?f:Object.assign(Object.assign({},f),{[v.name]:v.value}),{}),g=i.useMemo(()=>s?.join(","),[s]),p=i.useMemo(()=>JSON.stringify(Object.assign({apiKey:r,version:o},c)),[r,o,c]),_=i.useCallback(f=>te(this,void 0,void 0,function*(){var v;if(u[f])return u[f];if(!(!((v=google==null?void 0:google.maps)===null||v===void 0)&&v.importLibrary))throw new Error("[api-provider-internal] importLibrary was called before google.maps.importLibrary was defined.");const y=yield window.google.maps.importLibrary(f);return m({name:f,value:y}),y}),[u]);return i.useEffect(()=>{te(this,void 0,void 0,function*(){try{const f=Object.assign({key:r},c);o&&(f.v=o),g?.length>0&&(f.libraries=g),(f.channel===void 0||f.channel<0||f.channel>999)&&delete f.channel,f.solutionChannel===void 0?f.solutionChannel=ct:f.solutionChannel===""&&delete f.solutionChannel,yield G.load(f,v=>d(v));for(const v of["core","maps",...s])yield _(v);t&&t()}catch(f){a?a(f):console.error("<ApiProvider> failed to load the Google Maps JavaScript API",f)}})},[r,g,p]),{status:l,loadedLibraries:u,importLibrary:_}}function ft(e){return i.useMemo(()=>e.disableUsageAttribution?null:dt,[e.disableUsageAttribution])}const pt=e=>{const{children:t}=e,a=z(e,["children"]),{mapInstances:r,addMapInstance:o,removeMapInstance:s,clearMapInstances:c}=ut(),{status:l,loadedLibraries:d,importLibrary:u}=mt(a),m=ft(a),g=i.useMemo(()=>({mapInstances:r,addMapInstance:o,removeMapInstance:s,clearMapInstances:c,status:l,loadedLibraries:d,importLibrary:u,internalUsageAttributionIds:m}),[r,o,s,c,l,d,u,m]);return S.createElement(R.Provider,{value:g},t)};function ht(e,t){for(const a of yt){const r=t[a],o=xe[a];i.useEffect(()=>{if(!e||!r)return;const s=google.maps.event.addListener(e,o,c=>{r(gt(o,e,c))});return()=>s.remove()},[e,o,r])}}function gt(e,t,a){var r;const o={type:e,map:t,detail:{},stoppable:!1,stop:()=>{}};if(vt.includes(e)){const s=o,c=t.getCenter(),l=t.getZoom(),d=t.getHeading()||0,u=t.getTilt()||0,m=t.getBounds();return(!c||!m||!Number.isFinite(l))&&console.warn("[createEvent] at least one of the values from the map returned undefined. This is not expected to happen. Please report an issue at https://github.com/visgl/react-google-maps/issues/new"),s.detail={center:c?.toJSON()||{lat:0,lng:0},zoom:l||0,heading:d,tilt:u,bounds:m?.toJSON()||{north:90,east:180,south:-90,west:-180}},s}else if(_t.includes(e)){if(!a)throw new Error("[createEvent] mouse events must provide a srcEvent");const s=o;return s.domEvent=a.domEvent,s.stoppable=!0,s.stop=()=>a.stop(),s.detail={latLng:((r=a.latLng)===null||r===void 0?void 0:r.toJSON())||null,placeId:a.placeId},s}return o}const xe={onBoundsChanged:"bounds_changed",onCenterChanged:"center_changed",onClick:"click",onContextmenu:"contextmenu",onDblclick:"dblclick",onDrag:"drag",onDragend:"dragend",onDragstart:"dragstart",onHeadingChanged:"heading_changed",onIdle:"idle",onIsFractionalZoomEnabledChanged:"isfractionalzoomenabled_changed",onMapCapabilitiesChanged:"mapcapabilities_changed",onMapTypeIdChanged:"maptypeid_changed",onMousemove:"mousemove",onMouseout:"mouseout",onMouseover:"mouseover",onProjectionChanged:"projection_changed",onRenderingTypeChanged:"renderingtype_changed",onTilesLoaded:"tilesloaded",onTiltChanged:"tilt_changed",onZoomChanged:"zoom_changed",onCameraChanged:"bounds_changed"},vt=["bounds_changed","center_changed","heading_changed","tilt_changed","zoom_changed"],_t=["click","contextmenu","dblclick","mousemove","mouseout","mouseover"],yt=Object.keys(xe);function bt(e){const t=i.useRef(void 0);return i.useEffect(()=>{t.current=e}),t.current}function Ce(e,t){const a=bt(e);return i.useMemo(()=>a&&t(a,e)?a:e,[e,a,t])}function xt(e,t,a){i.useEffect(e,[Ce(t,a)])}function Ct(e,t){xt(e,t,be)}const wt=new Set(["backgroundColor","clickableIcons","controlSize","disableDefaultUI","disableDoubleClickZoom","draggable","draggableCursor","draggingCursor","fullscreenControl","fullscreenControlOptions","gestureHandling","headingInteractionEnabled","isFractionalZoomEnabled","keyboardShortcuts","mapTypeControl","mapTypeControlOptions","mapTypeId","maxZoom","minZoom","noClear","panControl","panControlOptions","restriction","rotateControl","rotateControlOptions","scaleControl","scaleControlOptions","scrollwheel","streetView","streetViewControl","streetViewControlOptions","styles","tiltInteractionEnabled","zoomControl","zoomControlOptions"]);function jt(e,t){const a={},r=Object.keys(t);for(const o of r)wt.has(o)&&(a[o]=t[o]);Ct(()=>{e&&e.setOptions(a)},[a])}function we(){var e;return((e=i.useContext(R))===null||e===void 0?void 0:e.status)||A.NOT_LOADED}function Nt(e,t){const{viewport:a,viewState:r}=t,o=!!a;return i.useLayoutEffect(()=>{if(!e||!r)return;const{latitude:s,longitude:c,bearing:l,pitch:d,zoom:u}=r;e.moveCamera({center:{lat:s,lng:c},heading:l,tilt:d,zoom:u+1})},[e,r]),o}function kt(e){return!e||typeof e!="object"||!("lat"in e&&"lng"in e)?!1:Number.isFinite(e.lat)&&Number.isFinite(e.lng)}function je(e){return kt(e)?e:e.toJSON()}function St(e,t,a){const r=a.center?je(a.center):null;let o=null,s=null;r&&Number.isFinite(r.lat)&&Number.isFinite(r.lng)&&(o=r.lat,s=r.lng);const c=Number.isFinite(a.zoom)?a.zoom:null,l=Number.isFinite(a.heading)?a.heading:null,d=Number.isFinite(a.tilt)?a.tilt:null;i.useLayoutEffect(()=>{if(!e)return;const u={};let m=!1;o!==null&&s!==null&&(t.current.center.lat!==o||t.current.center.lng!==s)&&(u.center={lat:o,lng:s},m=!0),c!==null&&t.current.zoom!==c&&(u.zoom=c,m=!0),l!==null&&t.current.heading!==l&&(u.heading=l,m=!0),d!==null&&t.current.tilt!==d&&(u.tilt=d,m=!0),m&&e.moveCamera(u)})}const Et=()=>{const e={position:"absolute",top:0,left:0,bottom:0,right:0,zIndex:999,display:"flex",flexFlow:"column nowrap",textAlign:"center",justifyContent:"center",fontSize:".8rem",color:"rgba(0,0,0,0.6)",background:"#dddddd",padding:"1rem 1.5rem"};return S.createElement("div",{style:e},S.createElement("h2",null,"Error: AuthFailure"),S.createElement("p",null,"A problem with your API key prevents the map from rendering correctly. Please make sure the value of the ",S.createElement("code",null,"APIProvider.apiKey")," prop is correct. Check the error-message in the console for further details."))};function Mt(){const[e,t]=i.useState(null),a=i.useCallback(r=>t(r),[t]);return[e,a]}function Ne(){return we()===A.LOADED}function Dt(){const[,e]=i.useReducer(t=>t+1,0);return e}function Ot(e,t){const a=e.getCenter(),r=e.getZoom(),o=e.getHeading()||0,s=e.getTilt()||0,c=e.getBounds();(!a||!c||!Number.isFinite(r))&&console.warn("[useTrackedCameraState] at least one of the values from the map returned undefined. This is not expected to happen. Please report an issue at https://github.com/visgl/react-google-maps/issues/new"),Object.assign(t.current,{center:a?.toJSON()||{lat:0,lng:0},zoom:r||0,heading:o,tilt:s})}function It(e){const t=Dt(),a=i.useRef({center:{lat:0,lng:0},heading:0,tilt:0,zoom:0});return i.useEffect(()=>{if(!e)return;const r=google.maps.event.addListener(e,"bounds_changed",()=>{Ot(e,a),t()});return()=>r.remove()},[e,t]),a}class V{static has(t){return this.entries[t]&&this.entries[t].length>0}static pop(t){return this.entries[t]&&this.entries[t].pop()||null}static push(t,a){this.entries[t]||(this.entries[t]=[]),this.entries[t].push(a)}}V.entries={};function Lt(e,t){const a=Ne(),[r,o]=i.useState(null),[s,c]=Mt(),l=It(r),{id:d,defaultBounds:u,defaultCenter:m,defaultZoom:g,defaultHeading:p,defaultTilt:_,reuseMaps:f,renderingType:v,colorScheme:y}=e,b=z(e,["id","defaultBounds","defaultCenter","defaultZoom","defaultHeading","defaultTilt","reuseMaps","renderingType","colorScheme"]),j=e.zoom!==void 0||e.defaultZoom!==void 0,x=e.center!==void 0||e.defaultCenter!==void 0;!u&&(!j||!x)&&console.warn("<Map> component is missing configuration. You have to provide zoom and center (via the `zoom`/`defaultZoom` and `center`/`defaultCenter` props) or specify the region to show using `defaultBounds`. See https://visgl.github.io/react-google-maps/docs/api-reference/components/map#required"),!b.center&&m&&(b.center=m),!b.zoom&&Number.isFinite(g)&&(b.zoom=g),!b.heading&&Number.isFinite(p)&&(b.heading=p),!b.tilt&&Number.isFinite(_)&&(b.tilt=_);const E=b.internalUsageAttributionIds;E==null?b.internalUsageAttributionIds=t.internalUsageAttributionIds:b.internalUsageAttributionIds=[...t.internalUsageAttributionIds||[],...E];for(const w of Object.keys(b))b[w]===void 0&&delete b[w];const M=i.useRef(void 0);return i.useEffect(()=>{if(!s||!a)return;const{addMapInstance:w,removeMapInstance:I}=t,{mapId:O}=e,N=`${O||"default"}:${v||"default"}:${y||"LIGHT"}`;let k,C;if(f&&V.has(N)?(C=V.pop(N),k=C.getDiv(),s.appendChild(k),C.setOptions(b),setTimeout(()=>C.setCenter(C.getCenter()),0)):(k=document.createElement("div"),k.style.height="100%",s.appendChild(k),C=new google.maps.Map(k,Object.assign(Object.assign(Object.assign({},b),v?{renderingType:v}:{}),y?{colorScheme:y}:{}))),o(C),w(C,d),u){const{padding:F}=u,T=z(u,["padding"]);C.fitBounds(T,F)}else(!j||!x)&&C.fitBounds({east:180,west:-180,south:-90,north:90});if(M.current){const{mapId:F,cameraState:T}=M.current;F!==O&&C.setOptions(T)}return()=>{M.current={mapId:O,cameraState:l.current},k.remove(),f?V.push(N,C):google.maps.event.clearInstanceListeners(C),o(null),I(d)}},[s,a,d,e.mapId,e.renderingType,e.colorScheme]),[r,c,l]}const ke=S.createContext(null),Se=e=>{const{children:t,id:a,className:r,style:o}=e,s=i.useContext(R),c=we();if(!s)throw new Error("<Map> can only be used inside an <ApiProvider> component.");const[l,d,u]=Lt(e,s);St(l,u,e),ht(l,e),jt(l,e);const m=Nt(l,e),g=!!e.controlled;i.useEffect(()=>{if(l)return m&&l.setOptions({disableDefaultUI:!0}),(m||g)&&l.setOptions({gestureHandling:"none",keyboardShortcuts:!1}),()=>{l.setOptions({gestureHandling:e.gestureHandling,keyboardShortcuts:e.keyboardShortcuts})}},[l,m,g,e.gestureHandling,e.keyboardShortcuts]);const p=e.center?je(e.center):null;let _=null,f=null;p&&Number.isFinite(p.lat)&&Number.isFinite(p.lng)&&(_=p.lat,f=p.lng);const v=i.useMemo(()=>{var j,x,E;return{center:{lat:_??0,lng:f??0},zoom:(j=e.zoom)!==null&&j!==void 0?j:0,heading:(x=e.heading)!==null&&x!==void 0?x:0,tilt:(E=e.tilt)!==null&&E!==void 0?E:0}},[_,f,e.zoom,e.heading,e.tilt]);i.useLayoutEffect(()=>{if(!l||!g)return;l.moveCamera(v);const j=l.addListener("bounds_changed",()=>{l.moveCamera(v)});return()=>j.remove()},[l,g,v]);const y=i.useMemo(()=>Object.assign({width:"100%",height:"100%",position:"relative",zIndex:m?-1:0},o),[o,m]),b=i.useMemo(()=>({map:l}),[l]);return c===A.AUTH_FAILURE?S.createElement("div",{style:Object.assign({position:"relative"},r?{}:y),className:r},S.createElement(Et,null)):S.createElement("div",Object.assign({ref:d,"data-testid":"map",style:r?void 0:y,className:r},a?{id:a}:{}),l?S.createElement(ke.Provider,{value:b},t):null)};Se.deckGLViewProps=!0;const me=new Set;function At(...e){const t=JSON.stringify(e);me.has(t)||(me.add(t),console.error(...e))}const J=(e=null)=>{const t=i.useContext(R),{map:a}=i.useContext(ke)||{};if(t===null)return At("useMap(): failed to retrieve APIProviderContext. Make sure that the <APIProvider> component exists and that the component you are calling `useMap()` from is a sibling of the <APIProvider>."),null;const{mapInstances:r}=t;return e!==null?r[e]||null:a||r.default||null};function Ee(e){const t=Ne(),a=i.useContext(R);return i.useEffect(()=>{!t||!a||a.importLibrary(e)},[t,a,e]),a?.loadedLibraries[e]||null}function $(e,t,a){i.useEffect(()=>{if(!e||!t||!a)return;const r=google.maps.event.addListener(e,t,a);return()=>r.remove()},[e,t,a])}function U(e,t,a){i.useEffect(()=>{e&&(e[t]=a)},[e,t,a])}function fe(e,t,a){i.useEffect(()=>{if(!(!e||!t||!a))return e.addEventListener(t,a),()=>e.removeEventListener(t,a)},[e,t,a])}class Tt{constructor(){this.renderedStyles=new Set,this.styleElement=null}getStyleElement(){return this.styleElement||(this.styleElement=document.createElement("style"),this.styleElement.setAttribute("data-rgm-anchor-styles",""),document.head.appendChild(this.styleElement)),this.styleElement}addAdvancedMarkerPointerEventsOverwrite(){if(this.renderedStyles.has("marker-pointer-events"))return;const t=this.getStyleElement();t.textContent+=`
      gmp-advanced-marker[data-origin='rgm'] {
        pointer-events: none !important;
      }
    `,this.renderedStyles.add("marker-pointer-events")}cleanup(){this.styleElement&&(this.styleElement.remove(),this.styleElement=null,this.renderedStyles.clear())}}const Pt=new Tt;function zt(e,t){var a;if(!(!((a=google==null?void 0:google.maps)===null||a===void 0)&&a.version))return;const r=google.maps.version.split("."),o=parseInt(r[0],10),s=parseInt(r[1],10);return o>e||o===e&&s>=t}const Ft=S.createContext(null),qt={BOTTOM:["50%","100%"]},Me=i.forwardRef((e,t)=>{const{children:a,style:r,className:o,anchorPoint:s}=e,[c,l]=Ut(e),d=i.useMemo(()=>c?{marker:c}:null,[c]);return i.useImperativeHandle(t,()=>c,[c]),l?S.createElement(Ft.Provider,{value:d},Q.createPortal(S.createElement(Rt,{anchorPoint:s,styles:r,className:o},a),l)):null});Me.displayName="AdvancedMarker";function $t(){const[e,t]=i.useState(null);return[i.useCallback(r=>{t(r)},[]),e]}function Bt(e){return e.content!==void 0}function ne(e){return e.nodeType===Node.ELEMENT_NODE}const Rt=({children:e,styles:t,className:a})=>S.createElement("div",{className:a,style:t},e);function Ut(e){const[t,a]=i.useState(null),[r,o]=i.useState(null),s=J(),c=Ee("marker"),{children:l,onClick:d,className:u,onMouseEnter:m,onMouseLeave:g,onDrag:p,onDragStart:_,onDragEnd:f,collisionBehavior:v,clickable:y,draggable:b,position:j,title:x,zIndex:E,anchorPoint:M,anchorLeft:w,anchorTop:I}=e,O=i.Children.count(l);return i.useEffect(()=>{if(!s||!c)return;const N=new c.AdvancedMarkerElement;N.map=s,a(N);let k=null;return O>0&&(k=document.createElement("div"),N.content=k,o(k)),()=>{N.map=null,k?.remove(),a(null),o(null)}},[s,c,O]),i.useEffect(()=>{!t?.content||!ne(t.content)||O>0||(t.content.className=u??"")},[t,u,O]),Vt(t,M,w,I,O>0),U(t,"position",j),U(t,"title",x??""),U(t,"zIndex",E),U(t,"collisionBehavior",v),i.useEffect(()=>{t&&(b!==void 0?t.gmpDraggable=b:p||_||f?t.gmpDraggable=!0:t.gmpDraggable=!1)},[t,b,p,f,_]),i.useEffect(()=>{if(!t)return;const N=y!==void 0||!!d||!!m||!!g;t.gmpClickable=N,N&&t?.content&&ne(t.content)&&(t.content.style.pointerEvents="all",d&&(t.content.style.cursor="pointer"))},[t,y,d,m,g]),$(t,"click",d),$(t,"drag",p),$(t,"dragstart",_),$(t,"dragend",f),fe(t?.element,"mouseenter",m),fe(t?.element,"mouseleave",g),[t,r]}function Vt(e,t,a,r,o){i.useEffect(()=>{if(!e||!o)return;const s=zt(3,62),c=e.content;if(!(!c||!ne(c))){if(a!==void 0||r!==void 0){s||console.warn(`AdvancedMarker: The anchorLeft and anchorTop props are only supported in Google Maps API version 3.62 and above. The current version is ${google.maps.version}.`),e.anchorLeft=a,e.anchorTop=r,t!==void 0&&console.warn("AdvancedMarker: the anchorPoint prop is ignored when anchorLeft and/or anchorTop are set.");return}if(t!==void 0){const[l,d]=t??qt.BOTTOM,u=`calc(-1 * ${l})`,m=`calc(-1 * ${d})`;s?(e.anchorLeft=u,e.anchorTop=m,c.style.transform=""):(c.style.transform=`translate(50%, 100%) translate(${u}, ${m})`,e.dataset.origin="rgm",Pt.addAdvancedMarkerPointerEventsOverwrite())}}},[e,t,a,r,o])}function Wt(e,t,a){if(t!=null&&typeof t!="object")throw new Error("The `style` prop expects a mapping from style properties to values, not a string. For example, style={{marginRight: spacing + 'em'}} when using JSX.");const r=e.style;if(a==null){if(t==null)return;for(const o in t)t.hasOwnProperty(o)&&pe(r,o,t[o]);return}for(const o in a)a.hasOwnProperty(o)&&(t==null||!t.hasOwnProperty(o))&&(o.indexOf("--")===0?r.setProperty(o,""):o==="float"?r.cssFloat="":r[o]="");if(t!=null)for(const o in t){const s=t[o];t.hasOwnProperty(o)&&a[o]!==s&&pe(r,o,s)}}function pe(e,t,a){const r=t.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?r?e.setProperty(t,""):t==="float"?e.cssFloat="":e[t]="":r?e.setProperty(t,a):typeof a=="number"&&a!==0&&!Ht(t)?e[t]=a+"px":t==="float"?e.cssFloat=a:e[t]=(""+a).trim()}const Gt=new Set(["animationIterationCount","aspectRatio","borderImageOutset","borderImageSlice","borderImageWidth","boxFlex","boxFlexGroup","boxOrdinalGroup","columnCount","columns","flex","flexGrow","flexPositive","flexShrink","flexNegative","flexOrder","gridArea","gridRow","gridRowEnd","gridRowSpan","gridRowStart","gridColumn","gridColumnEnd","gridColumnSpan","gridColumnStart","fontWeight","lineClamp","lineHeight","opacity","order","orphans","scale","tabSize","widows","zIndex","zoom","fillOpacity","floodOpacity","stopOpacity","strokeDasharray","strokeDashoffset","strokeMiterlimit","strokeOpacity","strokeWidth"]);function Ht(e){return Gt.has(e)}const Zt=e=>{const{children:t,headerContent:a,style:r,className:o,pixelOffset:s,anchor:c,shouldFocus:l,onClose:d,onCloseClick:u}=e,m=z(e,["children","headerContent","style","className","pixelOffset","anchor","shouldFocus","onClose","onCloseClick"]),g=Ee("maps"),[p,_]=i.useState(null),f=i.useRef(null),v=i.useRef(null),y=Ce(m,be);i.useEffect(()=>{if(!g)return;f.current=document.createElement("div"),v.current=document.createElement("div");const x=y;s&&(x.pixelOffset=new google.maps.Size(s[0],s[1])),a&&(x.headerContent=typeof a=="string"?a:v.current);const E=new google.maps.InfoWindow(y);return E.setContent(f.current),_(E),()=>{var M,w;E.setContent(null),(M=f.current)===null||M===void 0||M.remove(),(w=v.current)===null||w===void 0||w.remove(),f.current=null,v.current=null,_(null)}},[g]);const b=i.useRef(null);i.useEffect(()=>{!p||!f.current||(Wt(f.current,r||null,b.current),b.current=r||null,o!==f.current.className&&(f.current.className=o||""))},[p,o,r]),i.useEffect(()=>{if(!p)return;const x=y;s?x.pixelOffset=new google.maps.Size(s[0],s[1]):x.pixelOffset=null,a?x.headerContent=typeof a=="string"?a:v.current:x.headerContent=null,p.setOptions(y)},[y,s,a]),$(p,"close",d),$(p,"closeclick",u);const j=J();return i.useEffect(()=>{var x;if(!j||!p||c===null)return;const E=!!c,M={map:j};if(c&&(M.anchor=c,Bt(c)&&c.content instanceof Element)){const w=c?.getBoundingClientRect();if(w&&c.dataset.origin==="rgm"){const I=(x=c.content.firstElementChild)===null||x===void 0?void 0:x.firstElementChild,O=I?.getBoundingClientRect(),N=O.x-w.x+(O.width-w.width)/2,k=O.y-w.y,C=y;C.pixelOffset=new google.maps.Size(s?s[0]+N:N,s?s[1]+k:k),p.setOptions(C)}}return l!==void 0&&(M.shouldFocus=l),p.open(M),()=>{E&&p.set("anchor",null),p.close()}},[p,c,j,l,y,s]),S.createElement(S.Fragment,null,f.current&&Q.createPortal(t,f.current),v.current!==null&&Q.createPortal(a,v.current))};function Jt(e){const[t,a]=i.useState(null),r=J(),{onClick:o,onDrag:s,onDragStart:c,onDragEnd:l,onMouseOver:d,onMouseOut:u}=e,m=z(e,["onClick","onDrag","onDragStart","onDragEnd","onMouseOver","onMouseOut"]),{position:g,draggable:p}=m;return i.useEffect(()=>{if(!r){r===void 0&&console.error("<Marker> has to be inside a Map component.");return}const _=new google.maps.Marker(m);return _.setMap(r),a(_),()=>{_.setMap(null),a(null)}},[r]),i.useEffect(()=>{if(!t)return;const _=t,f=google.maps.event;return o&&f.addListener(_,"click",o),s&&f.addListener(_,"drag",s),c&&f.addListener(_,"dragstart",c),l&&f.addListener(_,"dragend",l),d&&f.addListener(_,"mouseover",d),u&&f.addListener(_,"mouseout",u),t.setDraggable(!!p),()=>{f.clearInstanceListeners(_)}},[t,p,o,s,c,l,d,u]),i.useEffect(()=>{t&&m&&t.setOptions(m)},[t,m]),i.useEffect(()=>{p||!g||!t||t.setPosition(g)},[p,g,t]),t}const Kt=i.forwardRef((e,t)=>{const a=Jt(e);return i.useImperativeHandle(t,()=>a,[a]),S.createElement(S.Fragment,null)});Kt.displayName="Marker";const De=({dealer:e,index:t,isSelected:a=!1,isHovered:r=!1,onClick:o,onHover:s})=>{const[c,l]=$t(),[d,u]=i.useState(!1),m=i.useCallback(()=>{o?.(),u(!0)},[o]),g=i.useCallback(()=>{u(!1)},[]),p=i.useCallback(()=>{s?.(e),u(!0)},[e,s]),_=i.useCallback(()=>{s?.(null),u(!1)},[s]),v=e.dealScore.isBestDeal?{background:"var(--color-gold, #DBCA8B)",borderColor:"var(--color-gold-dark, #A59143)",scale:a||r?1.3:1.1}:a||r?{background:"var(--color-blue-cobalt, #1B5F8A)",borderColor:"var(--color-blue-cobalt-dark, #154d70)",scale:1.3}:{background:"var(--color-blue-cobalt, #1B5F8A)",borderColor:"var(--color-blue-cobalt-dark, #154d70)",scale:1};return n.jsxs(n.Fragment,{children:[n.jsx(Me,{ref:c,position:{lat:e.lat,lng:e.lng},onClick:m,title:e.name,children:n.jsxs("div",{className:`dealer-marker ${e.dealScore.isBestDeal?"dealer-marker--best":""} ${a||r?"dealer-marker--selected":""}`,style:{transform:`scale(${v.scale})`},onMouseEnter:p,onMouseLeave:_,children:[n.jsx("div",{className:"dealer-marker__pin",style:{backgroundColor:v.background,borderColor:v.borderColor},children:t!==void 0?n.jsx("span",{className:"dealer-marker__number",children:t}):e.dealScore.isBestDeal?n.jsx(B,{size:16,className:"dealer-marker__icon"}):n.jsx(W,{size:16,className:"dealer-marker__icon"})}),n.jsx("div",{className:"dealer-marker__tail",style:{borderTopColor:v.borderColor}})]})}),(d||a||r)&&l&&n.jsx(Zt,{anchor:l,onCloseClick:g,className:"dealer-info-window",children:n.jsxs("div",{className:"dealer-info-window__content",children:[e.dealScore.isBestDeal&&n.jsxs("span",{className:"dealer-info-window__badge",children:[n.jsx(B,{size:12}),"Best Deal"]}),n.jsx("h3",{className:"dealer-info-window__name",children:e.name}),n.jsxs("div",{className:"dealer-info-window__meta",children:[n.jsxs("span",{className:"dealer-info-window__inventory",children:[e.inventoryCount," in stock"]}),n.jsxs("span",{className:"dealer-info-window__price",children:["from ",ae(e.lowestPrice)]})]}),n.jsxs("div",{className:"dealer-info-window__rating",children:[n.jsx(H,{size:12,fill:"#DBCA8B",stroke:"#DBCA8B"}),n.jsx("span",{children:e.rating.toFixed(1)}),n.jsxs("span",{className:"dealer-info-window__distance",children:["路 ",X(e.distance||0)]})]}),n.jsxs("div",{className:"dealer-info-window__actions",children:[n.jsx("a",{href:`tel:${e.phone.replace(/[^0-9]/g,"")}`,className:"dealer-info-window__action",children:"Call"}),n.jsx("a",{href:`https://www.google.com/maps/dir/?api=1&destination=${encodeURIComponent(`${e.address}, ${e.city}, ${e.state}`)}`,target:"_blank",rel:"noopener noreferrer",className:"dealer-info-window__action",children:"Directions"})]})]})})]})};De.__docgenInfo={description:"",methods:[],displayName:"DealerMarker",props:{dealer:{required:!0,tsType:{name:"DealerWithScore"},description:""},index:{required:!1,tsType:{name:"number"},description:""},isSelected:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},isHovered:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},onClick:{required:!1,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},onHover:{required:!1,tsType:{name:"signature",type:"function",raw:"(dealer: DealerWithScore | null) => void",signature:{arguments:[{type:{name:"union",raw:"DealerWithScore | null",elements:[{name:"DealerWithScore"},{name:"null"}]},name:"dealer"}],return:{name:"void"}}},description:""}}};const Yt=({dealers:e,center:t,selectedDealerId:a,hoveredDealerId:r,onDealerSelect:o,onDealerHover:s})=>{const c=J();i.useEffect(()=>{c&&c.panTo(t)},[c,t.lat,t.lng]);const l=i.useCallback(u=>{o?.(u),c&&c.panTo({lat:u.lat,lng:u.lng})},[c,o]),d=i.useCallback(u=>{s?.(u)},[s]);return n.jsx(n.Fragment,{children:e.map((u,m)=>n.jsx(De,{dealer:u,index:m+1,isSelected:a===u.id,isHovered:r===u.id,onClick:()=>l(u),onHover:d},u.id))})},Oe=({dealers:e,center:t,selectedDealerId:a,hoveredDealerId:r,onDealerSelect:o,onDealerHover:s,apiKey:c})=>{const[l]=i.useState(null);return c?l?n.jsxs("div",{className:"google-map-view google-map-view--error",children:[n.jsx("p",{children:"Unable to load map"}),n.jsx("p",{className:"google-map-view__error-detail",children:l})]}):n.jsx("div",{className:"google-map-view",children:n.jsx(pt,{apiKey:c,onLoad:()=>console.log("Google Maps API loaded"),children:n.jsx(Se,{defaultCenter:t,defaultZoom:11,mapId:"dealer-locator-map",gestureHandling:"greedy",disableDefaultUI:!1,zoomControl:!0,mapTypeControl:!1,streetViewControl:!1,fullscreenControl:!0,className:"google-map-view__map",children:n.jsx(Yt,{dealers:e,center:t,selectedDealerId:a,hoveredDealerId:r,onDealerSelect:o,onDealerHover:s})})})}):n.jsx("div",{className:"google-map-view google-map-view--placeholder",children:n.jsxs("div",{className:"google-map-view__placeholder-content",children:[n.jsxs("svg",{width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[n.jsx("path",{d:"M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"}),n.jsx("circle",{cx:"12",cy:"10",r:"3"})]}),n.jsx("p",{children:"Google Maps"}),n.jsx("p",{className:"google-map-view__placeholder-note",children:"Add VITE_GOOGLE_MAPS_API_KEY to enable interactive map"})]})})};Oe.__docgenInfo={description:"",methods:[],displayName:"GoogleMapView",props:{dealers:{required:!0,tsType:{name:"Array",elements:[{name:"DealerWithScore"}],raw:"DealerWithScore[]"},description:""},center:{required:!0,tsType:{name:"signature",type:"object",raw:"{ lat: number; lng: number }",signature:{properties:[{key:"lat",value:{name:"number",required:!0}},{key:"lng",value:{name:"number",required:!0}}]}},description:""},selectedDealerId:{required:!1,tsType:{name:"union",raw:"string | null",elements:[{name:"string"},{name:"null"}]},description:""},hoveredDealerId:{required:!1,tsType:{name:"union",raw:"string | null",elements:[{name:"string"},{name:"null"}]},description:""},onDealerSelect:{required:!1,tsType:{name:"signature",type:"function",raw:"(dealer: DealerWithScore) => void",signature:{arguments:[{type:{name:"DealerWithScore"},name:"dealer"}],return:{name:"void"}}},description:""},onDealerHover:{required:!1,tsType:{name:"signature",type:"function",raw:"(dealer: DealerWithScore | null) => void",signature:{arguments:[{type:{name:"union",raw:"DealerWithScore | null",elements:[{name:"DealerWithScore"},{name:"null"}]},name:"dealer"}],return:{name:"void"}}},description:""},apiKey:{required:!1,tsType:{name:"string"},description:""}}};const Xt="",Qt={miami:{lat:25.7617,lng:-80.1918},"miami, fl":{lat:25.7617,lng:-80.1918},33101:{lat:25.7617,lng:-80.1918},"los angeles":{lat:34.0522,lng:-118.2437},"los angeles, ca":{lat:34.0522,lng:-118.2437},90001:{lat:33.9425,lng:-118.2551},"lake forest":{lat:33.6469,lng:-117.6891},"lake forest, ca":{lat:33.6469,lng:-117.6891},92630:{lat:33.6469,lng:-117.6891},"new york":{lat:40.7128,lng:-74.006},"new york, ny":{lat:40.7128,lng:-74.006},10001:{lat:40.7484,lng:-73.9967},chicago:{lat:41.8781,lng:-87.6298},"chicago, il":{lat:41.8781,lng:-87.6298},60601:{lat:41.8819,lng:-87.6278},houston:{lat:29.7604,lng:-95.3698},"houston, tx":{lat:29.7604,lng:-95.3698},77001:{lat:29.7523,lng:-95.3583},phoenix:{lat:33.4484,lng:-112.074},"phoenix, az":{lat:33.4484,lng:-112.074},85001:{lat:33.4484,lng:-112.0773},"san diego":{lat:32.7157,lng:-117.1611},"san diego, ca":{lat:32.7157,lng:-117.1611},92101:{lat:32.7194,lng:-117.1628},dallas:{lat:32.7767,lng:-96.797},"dallas, tx":{lat:32.7767,lng:-96.797},75201:{lat:32.7872,lng:-96.7985},irvine:{lat:33.6846,lng:-117.8265},"irvine, ca":{lat:33.6846,lng:-117.8265},92618:{lat:33.6694,lng:-117.8231}},en=e=>{const t=e.toLowerCase().trim();return Qt[t]||null},he=[{value:"bestDeal",label:"Best Deal"},{value:"distance",label:"Distance"},{value:"price",label:"Lowest Price"},{value:"rating",label:"Highest Rated"}],tn=({vehicle:e,initialLocation:t={lat:33.6846,lng:-117.8265},initialZipCode:a="Los Angeles, CA",showVehiclePreview:r=!0,defaultView:o="list",maxResults:s=20,cardVariant:c="full",onDealerSelect:l})=>{const[d,u]=i.useState(o),[m,g]=i.useState("bestDeal"),[p,_]=i.useState(null),[f,v]=i.useState(null),[y,b]=i.useState(!1),[j,x]=i.useState(!1),[E,M]=i.useState(a),[w,I]=i.useState(t),[O,N]=i.useState(t),[k,C]=i.useState(!1),[F,T]=i.useState(""),[Ie,re]=i.useState(!1),[q,oe]=i.useState(null),[se,le]=i.useState(null),L=i.useMemo(()=>{const h=Ve(e.make,e.model,w.lat,w.lng,e.msrp);return We(h,m).slice(0,s)},[e.make,e.model,e.msrp,w.lat,w.lng,m,s]),[ie,K]=i.useState(!1);i.useEffect(()=>{if(!ie&&L.length>0){const h=L.find(D=>D.dealScore.isBestDeal)||L[0];h&&(N({lat:h.lat,lng:h.lng}),K(!0))}},[L,ie]);const ce=i.useCallback(h=>{_(h),b(!0),l?.(h)},[l]),Le=i.useCallback(h=>{v(h?.id||null),h&&N({lat:h.lat,lng:h.lng})},[]),Ae=i.useCallback(h=>{v(h?.id||null)},[]),Te=h=>{g(h),x(!1)},Pe=()=>{T(E),C(!0)},ze=h=>{h.preventDefault();const D=F.trim();if(D){const P=en(D);P?(I(P),N(P),M(D),T(""),C(!1),K(!1),console.log("Location updated to:",D,"Coords:",P)):alert(`Location "${D}" not found. Try: Miami, Los Angeles, New York, Chicago, Houston, Phoenix, San Diego, Dallas, Irvine, Lake Forest, or their ZIP codes.`)}},Fe=()=>{"geolocation"in navigator&&navigator.geolocation.getCurrentPosition(h=>{const{latitude:D,longitude:P}=h.coords,de={lat:D,lng:P};I(de),N(de),M("Current Location"),C(!1),K(!1),console.log("Using current location:",D,P)},()=>{alert("Unable to get your location. Please enter it manually.")})},qe=i.useCallback((h,D)=>{le(h),oe(D),re(!0)},[]),$e=i.useCallback(h=>{console.log("Offer submitted:",h)},[]),Be=L.reduce((h,D)=>h+D.inventoryCount,0);return n.jsxs("div",{className:"dealer-locator",children:[r&&n.jsx(ee,{vehicle:e}),n.jsxs("div",{className:"dealer-locator__toolbar",children:[n.jsxs("div",{className:"dealer-locator__location",children:[n.jsx(W,{size:16}),n.jsx("span",{children:E}),n.jsx("button",{className:"dealer-locator__change-location",onClick:Pe,children:"Change"})]}),n.jsxs("div",{className:"dealer-locator__sort",children:[n.jsx("span",{className:"dealer-locator__sort-label",children:"Sort:"}),n.jsxs("div",{className:"dealer-locator__sort-dropdown",children:[n.jsxs("button",{className:"dealer-locator__sort-trigger",onClick:()=>x(!j),"aria-expanded":j,"aria-haspopup":"listbox",children:[he.find(h=>h.value===m)?.label,n.jsx(Ye,{size:16,className:j?"rotated":""})]}),j&&n.jsx("ul",{className:"dealer-locator__sort-options",role:"listbox",children:he.map(h=>n.jsx("li",{children:n.jsx("button",{className:`dealer-locator__sort-option ${m===h.value?"active":""}`,onClick:()=>Te(h.value),role:"option","aria-selected":m===h.value,children:h.label})},h.value))})]})]})]}),n.jsxs("div",{className:"dealer-locator__view-toggle",children:[n.jsxs("button",{className:`dealer-locator__view-btn ${d==="list"?"active":""}`,onClick:()=>u("list"),"aria-pressed":d==="list",children:[n.jsx(nt,{size:18}),n.jsx("span",{children:"List"})]}),n.jsxs("button",{className:`dealer-locator__view-btn ${d==="map"?"active":""}`,onClick:()=>u("map"),"aria-pressed":d==="map",children:[n.jsx(rt,{size:18}),n.jsx("span",{children:"Map"})]})]}),n.jsx("div",{className:"dealer-locator__summary",children:n.jsxs("span",{className:"dealer-locator__count",children:[L.length," dealers 路 ",Be," ",e.model," in stock"]})}),n.jsxs("div",{className:`dealer-locator__content ${y?"dealer-locator__content--panel-open":""}`,children:[n.jsx("div",{className:`dealer-locator__list ${d==="map"?"dealer-locator__list--hidden-mobile":""} ${y?"dealer-locator__list--panel-open":""}`,children:L.length===0?n.jsxs("div",{className:"dealer-locator__empty",children:[n.jsx("p",{children:"No dealers found in your area."}),n.jsx("p",{children:"Try expanding your search radius or changing your location."})]}):n.jsx("ul",{className:`dealer-locator__dealers ${c==="compact"?"dealer-locator__dealers--compact":""}`,role:"list",children:L.map((h,D)=>n.jsx("li",{children:n.jsx(_e,{dealer:h,vehicleModel:e.model,index:D+1,isSelected:p?.id===h.id,isHovered:f===h.id,variant:c,onSelect:ce,onHover:Le})},h.id))})}),n.jsx("div",{className:`dealer-locator__map ${d==="list"?"dealer-locator__map--hidden-mobile":""} ${y?"dealer-locator__map--panel-open":""}`,children:n.jsx(Oe,{dealers:L,center:O,selectedDealerId:p?.id,hoveredDealerId:f,onDealerSelect:ce,onDealerHover:Ae,apiKey:Xt})}),p&&n.jsx(ye,{dealer:p,vehicleModel:e.model,isOpen:y,onClose:()=>{b(!1),_(null)},onMakeOffer:qe})]}),se&&q&&n.jsx(Ke,{isOpen:Ie,onClose:()=>{re(!1),le(null),oe(null)},dealer:se,vehicle:{year:q.year,make:q.make,model:q.model,trim:q.trim,msrp:q.price},onSubmitOffer:$e}),n.jsx("div",{className:"dealer-locator__sticky-header",children:n.jsx(ee,{vehicle:e,variant:"compact"})}),k&&n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"location-modal__backdrop",onClick:()=>C(!1)}),n.jsxs("div",{className:"location-modal",role:"dialog","aria-modal":"true","aria-labelledby":"location-modal-title",children:[n.jsx("h3",{id:"location-modal-title",className:"location-modal__title",children:"Change Location"}),n.jsxs("form",{onSubmit:ze,className:"location-modal__form",children:[n.jsx("label",{htmlFor:"location-input",className:"location-modal__label",children:"Enter city, state or ZIP code"}),n.jsx("input",{id:"location-input",type:"text",className:"location-modal__input",value:F,onChange:h=>T(h.target.value),placeholder:"e.g., Miami, FL or 33101",autoFocus:!0}),n.jsx("button",{type:"submit",className:"location-modal__submit",children:"Update Location"})]}),n.jsx("div",{className:"location-modal__divider",children:n.jsx("span",{children:"or"})}),n.jsxs("button",{type:"button",className:"location-modal__current",onClick:Fe,children:[n.jsx(W,{size:18}),"Use my current location"]}),n.jsx("button",{type:"button",className:"location-modal__close",onClick:()=>C(!1),"aria-label":"Close",children:""})]})]})]})};tn.__docgenInfo={description:"",methods:[],displayName:"DealerLocatorMap",props:{vehicle:{required:!0,tsType:{name:"VehicleInfo"},description:""},initialLocation:{required:!1,tsType:{name:"signature",type:"object",raw:"{ lat: number; lng: number }",signature:{properties:[{key:"lat",value:{name:"number",required:!0}},{key:"lng",value:{name:"number",required:!0}}]}},description:"",defaultValue:{value:"{ lat: 33.6846, lng: -117.8265 }",computed:!1}},initialZipCode:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:"'Los Angeles, CA'",computed:!1}},showVehiclePreview:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"true",computed:!1}},defaultView:{required:!1,tsType:{name:"union",raw:"'map' | 'list'",elements:[{name:"literal",value:"'map'"},{name:"literal",value:"'list'"}]},description:"",defaultValue:{value:"'list'",computed:!1}},maxResults:{required:!1,tsType:{name:"number"},description:"",defaultValue:{value:"20",computed:!1}},cardVariant:{required:!1,tsType:{name:"union",raw:"'full' | 'compact'",elements:[{name:"literal",value:"'full'"},{name:"literal",value:"'compact'"}]},description:"",defaultValue:{value:"'full'",computed:!1}},onDealerSelect:{required:!1,tsType:{name:"signature",type:"function",raw:"(dealer: DealerWithScore) => void",signature:{arguments:[{type:{name:"DealerWithScore"},name:"dealer"}],return:{name:"void"}}},description:""}}};export{B as A,tn as D,ee as V,_e as a};
