import{u as L,r as o,d as P,j as e}from"./iframe-40V3jQdk.js";import{b as M}from"./vehicleService-DsqcyNHv.js";import{B as j}from"./Button-BDChmRQ5.js";import{O as N}from"./OptimizedImage-i_zMdbbB.js";import{C as X}from"./chevron-down-D0_5upv1.js";import{B as F}from"./bookmark-B-PhI2jn.js";import{A as G}from"./arrow-right-C4HGf0TY.js";import{C as U}from"./chevron-left-Lt8ChRSY.js";import{C as W}from"./chevron-right-UeRPZ7MI.js";import{I as J}from"./image-8JKCwpZD.js";const K=({vehicle:a,animateButtons:n=!1})=>{const{user:f,isAuthenticated:$,addSavedVehicle:I,removeSavedVehicle:S}=L(),[t,h]=o.useState(!1),[v,m]=o.useState(0),[R,y]=o.useState(!1),[l,V]=o.useState(!1),_=o.useRef(null),A=o.useRef(null),u=o.useRef(null),p=o.useRef(0),c=o.useRef(0),w=P(),g=`${a.year} ${a.make} ${a.model}`,i=f?.savedVehicles?.some(s=>s.name===g)||!1,T=()=>{if(!$){w("/sign-in");return}if(i){const s=f?.savedVehicles?.find(r=>r.name===g);s&&S(s.id)}else I({id:`${a.year}-${a.make}-${a.model}`.toLowerCase().replace(/\s+/g,"-"),name:g,ownership:"want"})};o.useEffect(()=>{if(!n||!u.current)return;const s=new IntersectionObserver(r=>{r.forEach(H=>{H.isIntersecting&&(V(!0),s.disconnect())})},{threshold:.5});return s.observe(u.current),()=>s.disconnect()},[n]);const x=M(a.make,a.model);o.useEffect(()=>{const s=r=>{_.current&&!_.current.contains(r.target)&&h(!1)};return document.addEventListener("mousedown",s),()=>document.removeEventListener("mousedown",s)},[]);const D=s=>{if(h(!1),parseInt(s)!==a.year){const r=a.model.replace(/\s+/g,"-");w(`/${s}/${a.make}/${r}`)}},q="https://d2kde5ohu8qb21.cloudfront.net/files/659f9ed490e84500088bd486/012-2024-lamborghini-revuelto.jpg",k=a.galleryImages||[],b=[a.image||q,...k].filter(Boolean),d=b.length,O=o.useCallback(s=>{m(s)},[]),C=o.useCallback(()=>{m(s=>s===0?d-1:s-1)},[d]),E=o.useCallback(()=>{m(s=>s===d-1?0:s+1)},[d]),z=s=>{p.current=s.touches[0].clientX,c.current=s.touches[0].clientX,y(!0)},Y=s=>{c.current=s.touches[0].clientX},B=()=>{y(!1);const s=p.current-c.current;Math.abs(s)>50&&(s>0?E():C()),p.current=0,c.current=0};return e.jsxs("section",{className:"hero",children:[e.jsx("div",{className:"hero__breadcrumb",children:e.jsx("div",{className:"container",children:e.jsxs("nav",{className:"hero__breadcrumb-nav","aria-label":"Breadcrumb",children:[e.jsx("a",{href:"#",className:"hero__breadcrumb-link",children:"Home"}),e.jsx("span",{className:"hero__breadcrumb-sep",children:"/"}),e.jsx("a",{href:"#",className:"hero__breadcrumb-link",children:a.make}),e.jsx("span",{className:"hero__breadcrumb-sep",children:"/"}),e.jsx("a",{href:"#",className:"hero__breadcrumb-link hero__breadcrumb-current",children:a.model})]})})}),e.jsx("div",{className:"hero__top-bar",children:e.jsx("div",{className:"container",children:e.jsxs("div",{className:"hero__top-bar-content",children:[e.jsxs("div",{className:"hero__year-selector-wrapper",ref:_,children:[e.jsxs("button",{className:`hero__year-selector ${t?"hero__year-selector--open":""}`,onClick:()=>h(!t),"aria-expanded":t,"aria-haspopup":"listbox",children:[e.jsx("span",{children:a.year}),e.jsx(X,{size:16,className:t?"hero__year-chevron--open":""})]}),t&&x.length>1&&e.jsx("ul",{className:"hero__year-dropdown",role:"listbox",children:x.map(s=>e.jsx("li",{role:"option","aria-selected":parseInt(s)===a.year,className:`hero__year-option ${parseInt(s)===a.year?"hero__year-option--selected":""}`,onClick:()=>D(s),children:s},s))}),t&&x.length<=1&&e.jsx("div",{className:"hero__year-dropdown hero__year-dropdown--empty",children:e.jsxs("span",{children:["Only ",a.year," available"]})})]}),e.jsxs("button",{className:`hero__favorites-btn ${i?"hero__favorites-btn--active":""}`,onClick:T,children:[e.jsx(F,{size:16,fill:i?"currentColor":"none"}),e.jsx("span",{children:i?"SAVED":"SAVE"})]})]})})}),e.jsx("div",{className:"hero__main",children:e.jsxs("div",{className:"container",children:[e.jsxs("div",{className:"hero__title-row",children:[e.jsxs("h1",{className:"hero__title",children:[a.year," ",a.make," ",a.model]}),e.jsxs("div",{className:"hero__rating",children:[e.jsxs("div",{className:"hero__rating-numbers",children:[e.jsx("span",{className:"hero__rating-score",children:a.rating}),e.jsx("span",{className:"hero__rating-max",children:"/10"})]}),e.jsxs("div",{className:"hero__rating-badge",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",width:"16",height:"16",children:e.jsx("path",{d:"m22.735 8.905-.955-.955V6.518a4.253 4.253 0 0 0-4.273-4.273h-1.432l-.955-.954C13.45-.38 10.61-.38 8.938 1.29l-.955.954H6.551a4.253 4.253 0 0 0-4.273 4.273V7.95l-.955.955c-1.67 1.671-1.67 4.512 0 6.183l.955.955v1.432a4.253 4.253 0 0 0 4.273 4.273h1.432l.955.954c1.67 1.671 4.511 1.671 6.182 0l.955-.954h1.432a4.253 4.253 0 0 0 4.273-4.273v-1.432l.955-.955c1.67-1.671 1.67-4.512 0-6.183zm-6.421 1.671-4.512 4.512c-.238.238-.477.477-.955.477-.477 0-.716-.239-.954-.477l-2.149-2.149c-.477-.477-.477-1.432 0-1.91.478-.477 1.432-.477 1.91 0l1.193 1.194 3.557-3.318c.477-.716 1.432-.716 1.91 0a1.154 1.154 0 0 1 0 1.671z",fill:"currentColor"})}),e.jsx("span",{children:"C/D RATING"})]})]})]}),e.jsxs("div",{className:"hero__gallery hero__gallery--desktop",children:[e.jsx("div",{className:"hero__gallery-main",children:e.jsx(N,{src:a.image,alt:`${a.year} ${a.make} ${a.model}`,className:"hero__gallery-main-img",loading:"eager",aspectRatio:"16/10"})}),e.jsx("div",{className:"hero__gallery-thumbs",children:k.slice(0,3).map((s,r)=>e.jsxs("div",{className:"hero__gallery-thumb",children:[e.jsx(N,{src:s,alt:`${a.model} view ${r+1}`,aspectRatio:"16/10"}),r===2&&e.jsxs("div",{className:"hero__gallery-thumb-overlay",children:[e.jsx("span",{children:"View Photos"}),e.jsx(G,{size:18})]})]},r))})]}),e.jsxs("div",{className:`hero__carousel hero__carousel--mobile ${R?"dragging":""}`,ref:A,onTouchStart:z,onTouchMove:Y,onTouchEnd:B,children:[e.jsx("div",{className:"hero__carousel-track",style:{transform:`translateX(-${v*100}%)`},children:b.map((s,r)=>e.jsx("div",{className:"hero__carousel-slide",children:e.jsx(N,{src:s,alt:`${a.year} ${a.make} ${a.model} - View ${r+1}`,className:"hero__carousel-img",loading:r===0?"eager":"lazy",aspectRatio:"16/9"})},r))}),e.jsx("button",{className:"hero__carousel-arrow hero__carousel-arrow--prev",onClick:C,"aria-label":"Previous image",children:e.jsx(U,{size:24})}),e.jsx("button",{className:"hero__carousel-arrow hero__carousel-arrow--next",onClick:E,"aria-label":"Next image",children:e.jsx(W,{size:24})}),e.jsxs("button",{className:"hero__carousel-view-photos",children:[e.jsx(J,{size:20}),e.jsx("span",{children:"View Photos"})]}),e.jsx("div",{className:"hero__carousel-dots",children:b.map((s,r)=>e.jsx("button",{className:`hero__carousel-dot ${r===v?"hero__carousel-dot--active":""}`,onClick:()=>O(r),"aria-label":`Go to slide ${r+1}`},r))})]}),e.jsxs("div",{className:"hero__photo-credit",children:[e.jsx("span",{className:"hero__photographer",children:a.photographer||"MICHAEL SIMARI"}),e.jsx("span",{className:"hero__credit-sep",children:"|"}),e.jsx("span",{className:"hero__publication",children:"CAR AND DRIVER"})]}),e.jsxs("div",{className:"hero__bottom-row",children:[e.jsxs("div",{className:"hero__msrp",children:[e.jsx("span",{className:"hero__msrp-label",children:"MSRP"}),e.jsxs("div",{className:"hero__msrp-price-row",children:[e.jsx("span",{className:"hero__msrp-price",children:a.priceRange}),e.jsxs("div",{ref:u,className:`hero__shop-buttons ${n?l?"hero__shop-buttons--animated":"hero__shop-buttons--hidden":""}`,children:[e.jsx(j,{variant:"primary",size:"small",className:`hero__shop-btn ${n&&l?"hero__shop-btn--animate-1":""}`,children:"SHOP NEW"}),e.jsx(j,{variant:"outline",size:"small",className:`hero__shop-btn hero__shop-btn--outline ${n&&l?"hero__shop-btn--animate-2":""}`,children:"SHOP USED"}),e.jsx(j,{variant:"outline",size:"small",className:`hero__shop-btn hero__shop-btn--trade-in ${n&&l?"hero__shop-btn--animate-3":""}`,children:"GET YOUR TRADE-IN VALUE"})]})]})]}),(a.editorsChoice||a.tenBest||a.evOfTheYear)&&e.jsxs("div",{className:"hero__accolades",children:[e.jsxs("div",{className:"hero__accolades-header",children:[e.jsxs("span",{className:"hero__accolades-title",children:[e.jsx("em",{children:"Car and Driver"})," Accolades"]}),e.jsx("a",{href:"#",className:"hero__accolades-link",children:"What's this?"})]}),e.jsxs("div",{className:"hero__accolades-badges",children:[a.editorsChoice&&e.jsxs("div",{className:"hero__accolade",children:[e.jsx("div",{className:"hero__accolade-icon hero__accolade-icon--ec",children:e.jsx("img",{src:"https://www.caranddriver.com/_assets/design-tokens/caranddriver/static/images/badges-no-text/editors-choice.7ecd596.svg?primary=%2523FEFEFE",alt:"Editor's Choice",width:"48",height:"44"})}),e.jsxs("span",{className:"hero__accolade-label",children:["Editors'",e.jsx("br",{}),"Choice"]})]}),a.evOfTheYear&&e.jsxs("div",{className:"hero__accolade",children:[e.jsx("div",{className:"hero__accolade-icon hero__accolade-icon--ev",children:e.jsx("img",{src:"https://www.caranddriver.com/_assets/design-tokens/caranddriver/static/images/badges-no-text/ev-of-the-year.721e420.svg",alt:"EV of the Year",width:"48",height:"49"})}),e.jsxs("span",{className:"hero__accolade-label",children:["EV of the",e.jsx("br",{}),"Year"]})]}),a.tenBest&&e.jsxs("div",{className:"hero__accolade",children:[e.jsx("div",{className:"hero__accolade-icon hero__accolade-icon--10best",children:e.jsx("img",{src:"https://www.caranddriver.com/_assets/design-tokens/caranddriver/static/images/badges-no-text/ten-best.bcb6ac1.svg",alt:"10Best",width:"48",height:"54"})}),e.jsx("span",{className:"hero__accolade-label",children:"10Best"})]})]})]})]})]})})]})};K.__docgenInfo={description:"",methods:[],displayName:"Hero",props:{vehicle:{required:!0,tsType:{name:"signature",type:"object",raw:`{
  make: string;
  model: string;
  year: number;
  tagline: string;
  rating: number;
  priceRange: string;
  image: string;
  galleryImages?: string[];
  photographer?: string;
  editorsChoice?: boolean;
  tenBest?: boolean;
  evOfTheYear?: boolean;
}`,signature:{properties:[{key:"make",value:{name:"string",required:!0}},{key:"model",value:{name:"string",required:!0}},{key:"year",value:{name:"number",required:!0}},{key:"tagline",value:{name:"string",required:!0}},{key:"rating",value:{name:"number",required:!0}},{key:"priceRange",value:{name:"string",required:!0}},{key:"image",value:{name:"string",required:!0}},{key:"galleryImages",value:{name:"Array",elements:[{name:"string"}],raw:"string[]",required:!1}},{key:"photographer",value:{name:"string",required:!1}},{key:"editorsChoice",value:{name:"boolean",required:!1}},{key:"tenBest",value:{name:"boolean",required:!1}},{key:"evOfTheYear",value:{name:"boolean",required:!1}}]}},description:""},animateButtons:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}}}};export{K as H};
