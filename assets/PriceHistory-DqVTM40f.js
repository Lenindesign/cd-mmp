import{r as i,j as e}from"./iframe-CoG26bPx.js";import{C as V}from"./chevron-up-BxS6ymDq.js";import{C as G}from"./chevron-down-BP--8vyF.js";import{B as J}from"./badge-check-DrU7Bvcn.js";import{T as Q}from"./trending-down-CXgtz7cU.js";import{T as X}from"./trending-up-3OYPiZVL.js";const B=(...p)=>p.filter(Boolean).join(" "),Y=(p,d=500)=>{const[v,M]=i.useState(p),o=i.useRef(void 0),u=i.useRef(void 0),n=i.useRef(p);return i.useEffect(()=>{n.current=v,u.current=performance.now();const m=f=>{const x=f-(u.current||0),C=Math.min(x/d,1),$=1-Math.pow(1-C,3),_=n.current+(p-n.current)*$;M(Math.round(_)),C<1&&(o.current=requestAnimationFrame(m))};return o.current=requestAnimationFrame(m),()=>{o.current&&cancelAnimationFrame(o.current)}},[p,d]),v},R=({value:p})=>{const d=Y(p,600);return e.jsx(e.Fragment,{children:new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0}).format(d)})},ee=({vehicleYear:p,make:d,model:v,trim:M,asNewValue:o,previousYearValue:u,currentValue:n,forecastYear1Value:m,forecastYear2Value:f,expertTip:x,shopUrl:C="#",tradeInUrl:$="#",competitors:_})=>{const[s,T]=i.useState("history"),[re,L]=i.useState(null),[E,g]=i.useState(null),[I,D]=i.useState(2),[b,O]=i.useState(!1),H=i.useRef(null),c=E!==null?E:I,h=i.useCallback(r=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0}).format(r),[]),j=i.useCallback((r,t)=>r===0?0:(t-r)/r*100,[]),k=i.useMemo(()=>{const r=new Date().getFullYear();return s==="history"?[r-2,r-1,r]:[r,r+1,r+2]},[s]),a=i.useMemo(()=>s==="history"?{first:o,firstLabel:"As New",second:u,secondLabel:"",third:n,thirdLabel:"Average Current Value",change:o-n,changeLabel:"Since Previous Year",percentChanges:[0,j(o,u),j(u,n)]}:{first:n,firstLabel:"Current Value",second:m,secondLabel:"Forecast",third:f,thirdLabel:"Estimated Forecasted Value",change:n-f,changeLabel:"In Next Two Years",percentChanges:[0,j(n,m),j(m,f)]},[s,o,u,n,m,f,j]),l=i.useMemo(()=>{const{first:r,second:t,third:y}=a,N=Math.max(r,t,y),S=Math.min(r,t,y),U=(N-S||1)*.3,w=N+U,K=S-U,A=w-K;return{start:(w-r)/A*100,mid:(w-t)/A*100,end:(w-y)/A*100}},[a]),z=i.useCallback(r=>{switch(r.key){case"ArrowLeft":r.preventDefault(),D(t=>Math.max(0,t-1));break;case"ArrowRight":r.preventDefault(),D(t=>Math.min(2,t+1));break;case"Tab":r.shiftKey&&(T(t=>t==="forecast"?"history":"forecast"),r.preventDefault());break}},[]),W=i.useCallback(r=>{D(r),g(r),L(r),setTimeout(()=>{g(null),L(null)},2e3)},[]),P=i.useCallback(r=>{switch(r){case 0:return a.first;case 1:return a.second;case 2:return a.third;default:return 0}},[a]),Z=r=>{if(r===0)return null;const t=r<0,y=Math.abs(r).toFixed(1);return e.jsxs("span",{className:`price-history__trend ${t?"price-history__trend--down":"price-history__trend--up"}`,children:[t?e.jsx(Q,{size:14}):e.jsx(X,{size:14}),e.jsxs("span",{children:[y,"%"]})]})},F=i.useMemo(()=>(o-n)/o*100,[o,n]),q=i.useMemo(()=>_?[..._].sort((r,t)=>r.depreciationPercent-t.depreciationPercent):[],[_]);return e.jsxs("div",{className:"price-history u-card",onKeyDown:z,tabIndex:0,role:"application","aria-label":"Price history chart. Use arrow keys to navigate between data points.",children:[e.jsx("h2",{className:"price-history__title u-font-heading u-font-bold",children:"Price History and Trends"}),_&&_.length>0&&e.jsxs("div",{className:"price-history__competitors u-rounded-lg u-overflow-hidden",children:[e.jsxs("button",{className:"price-history__competitors-toggle u-flex-between u-w-full u-cursor-pointer u-transition",onClick:()=>O(!b),"aria-expanded":b,children:[e.jsx("span",{className:"price-history__competitors-toggle-text u-uppercase",children:"Compare with Closest Competitors"}),b?e.jsx(V,{size:18}):e.jsx(G,{size:18})]}),b&&e.jsxs("div",{className:"price-history__competitors-table",children:[e.jsxs("div",{className:"price-history__competitors-header",children:[e.jsx("span",{className:"price-history__competitors-col price-history__competitors-col--vehicle",children:"Vehicle"}),e.jsx("span",{className:"price-history__competitors-col price-history__competitors-col--asnew",children:"As New"}),e.jsx("span",{className:"price-history__competitors-col price-history__competitors-col--current",children:"Current Value"}),e.jsx("span",{className:"price-history__competitors-col price-history__competitors-col--depreciation",children:"Depreciation"})]}),e.jsxs("div",{className:"price-history__competitors-row price-history__competitors-row--current",children:[e.jsxs("span",{className:"price-history__competitors-col price-history__competitors-col--vehicle",children:[e.jsxs("strong",{children:[p," ",d," ",v]}),e.jsx("span",{className:"price-history__competitors-badge",children:"This Vehicle"})]}),e.jsx("span",{className:"price-history__competitors-col price-history__competitors-col--asnew",children:h(o)}),e.jsx("span",{className:"price-history__competitors-col price-history__competitors-col--current",children:h(n)}),e.jsxs("span",{className:`price-history__competitors-col price-history__competitors-col--depreciation ${F<=q[0]?.depreciationPercent?"price-history__competitors-col--best":""}`,children:[F.toFixed(1),"%"]})]}),q.map((r,t)=>e.jsxs("div",{className:"price-history__competitors-row",children:[e.jsxs("span",{className:"price-history__competitors-col price-history__competitors-col--vehicle",children:[r.name,t===0&&r.depreciationPercent<F&&e.jsx("span",{className:"price-history__competitors-badge price-history__competitors-badge--best",children:"Best Retention"})]}),e.jsx("span",{className:"price-history__competitors-col price-history__competitors-col--asnew",children:h(r.asNewValue)}),e.jsx("span",{className:"price-history__competitors-col price-history__competitors-col--current",children:h(r.currentValue)}),e.jsxs("span",{className:`price-history__competitors-col price-history__competitors-col--depreciation ${t===0?"price-history__competitors-col--best":""}`,children:[r.depreciationPercent.toFixed(1),"%"]})]},t))]})]}),e.jsxs("div",{className:"price-history__card u-card u-overflow-hidden",children:[x&&e.jsxs("div",{className:"price-history__expert-tip u-flex u-flex-col u-gap-2 u-p-4",children:[e.jsxs("div",{className:"price-history__expert-tip-header u-flex u-items-center u-gap-2",children:[e.jsx("div",{className:"price-history__expert-tip-icon u-flex-center u-text-success",children:e.jsx(J,{size:24})}),e.jsx("span",{className:"price-history__expert-tip-label u-font-heading u-font-bold",children:"C/D Expert Tip:"})]}),e.jsx("p",{className:"price-history__expert-tip-text u-m-0",children:(()=>{const r=x.match(/^([^.]+\.)\s*/);return r?e.jsxs(e.Fragment,{children:[e.jsx("strong",{children:r[1]})," ",x.slice(r[0].length)]}):x})()})]}),e.jsxs("div",{className:"price-history__header u-flex-between u-p-4",children:[e.jsxs("h3",{className:"price-history__vehicle-name u-font-heading u-font-bold u-m-0",children:[p," ",d," ",v," ",M]}),e.jsxs("div",{className:"price-history__powered-by u-flex u-items-center u-gap-2",children:[e.jsx("span",{className:"price-history__powered-by-text u-text-muted u-uppercase u-text-xs",children:"POWERED BY"}),e.jsx("svg",{className:"price-history__powered-by-logo",viewBox:"86 31 124 65",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-label":"Black Book",children:e.jsx("path",{d:"M159.5,70 C162.234825,70 164,72.2783462 164,74.9997043 C164,77.7222452 162.234825,80 159.5,80 C156.765175,80 155,77.7222452 155,74.9997043 C155,72.2783462 156.765175,70 159.5,70 Z M121,71.5 C121,72.5636085 120.269394,73 118.980818,73 L117,73 L117,70 L118.980818,70 C120.115374,70 121,70.4363915 121,71.5 Z M119.622941,76 C120.975592,76 122,76.5809809 122,77.9996846 C122,79.4190191 120.975592,80 119.622941,80 L117,80 L117,76 L119.622941,76 Z M142,54 L144,49 L146,54 L142,54 Z M112,49.4994884 C112,50.5636085 111.269394,51 109.980818,51 L108,51 L108,48 L109.980818,48 C111.115374,48 112,48.4363915 112,49.4994884 Z M138.5,70 C141.234825,70 143,72.2783462 143,74.9997043 C143,77.7222452 141.234825,80 138.5,80 C135.765175,80 134,77.7222452 134,74.9997043 C134,72.2783462 135.765175,70 138.5,70 Z M184.291206,59.3020233 L187.4771,59.3020233 L181.305202,52.1677264 L186.796298,45.2744729 L183.789717,45.2744729 L178.780121,51.5668816 L178.780121,45.2744729 L176.375562,45.2744729 L176.375562,59.3020233 L178.780121,59.3020233 L178.780121,52.9696367 L184.291206,59.3020233 Z M181.488043,81.7513952 L184.674524,81.7513952 L178.502039,74.6170983 L183.993723,67.7226689 L180.987142,67.7226689 L175.976958,74.0156656 L175.976958,67.7226689 L173.572398,67.7226689 L173.572398,81.7513952 L175.976958,81.7513952 L175.976958,75.4184206 L181.488043,81.7513952 Z M163.837167,59.5424788 C167.384039,59.5424788 169.22773,57.1585007 169.22773,57.1585007 L167.624495,55.5746692 C167.624495,55.5746692 166.302281,57.2984235 163.837167,57.2984235 C161.07163,57.2984235 159.167972,54.9938134 159.167972,52.2882481 C159.167972,49.5826829 161.07163,47.2780727 163.837167,47.2780727 C166.141782,47.2780727 167.404028,48.8213384 167.404028,48.8213384 L169.02784,47.2380948 C169.02784,47.2380948 167.204138,45.0328416 163.837167,45.0328416 C159.788807,45.0328416 156.722847,48.1399499 156.722847,52.2882481 C156.722847,56.4359584 159.788807,59.5424788 163.837167,59.5424788 Z M159.444291,81.9918507 C163.532041,81.9918507 166.538622,78.8853303 166.538622,74.737032 C166.538622,70.5887338 163.532041,67.4822134 159.444291,67.4822134 C155.355952,67.4822134 152.349959,70.5887338 152.349959,74.737032 C152.349959,78.8853303 155.355952,81.9918507 159.444291,81.9918507 Z M148.353335,59.3020233 L150.777883,59.3020233 L145.326765,45.2744729 L142.88164,45.2744729 L137.43111,59.3020233 L139.855658,59.3020233 L141.138482,55.9756243 L147.070511,55.9756243 L148.353335,59.3020233 Z M138.221851,81.9918507 C142.309602,81.9918507 145.316183,78.8853303 145.316183,74.737032 C145.316183,70.5887338 142.309602,67.4822134 138.221851,67.4822134 C134.134101,67.4822134 131.128108,70.5887338 131.128108,74.737032 C131.128108,78.8853303 134.134101,81.9918507 138.221851,81.9918507 Z M122.409964,59.3020233 L130.787119,59.3020233 L131.530827,57.0174022 L124.814523,57.0174022 L124.814523,45.2744729 L122.409964,45.2744729 L122.409964,59.3020233 Z M119.404559,81.7513952 C122.050162,81.7513952 124.094331,80.0676188 124.094331,77.602509 C124.094331,75.0774324 122.110129,74.3560659 121.910239,74.316088 C122.110129,74.2561211 123.372964,73.4342218 123.372964,71.7310444 C123.372964,68.7850237 121.188871,67.7226689 118.903658,67.7226689 L114.354397,67.7226689 L114.354397,81.7513952 L119.404559,81.7513952 Z M105.813215,59.3020233 L110.862789,59.3020233 C113.508392,59.3020233 115.552561,57.6188349 115.552561,55.1531372 C115.552561,52.6286484 113.568359,51.9078699 113.367881,51.867304 C113.568359,51.8073371 114.831193,50.9854379 114.831193,49.2816726 C114.831193,46.3362397 112.646513,45.2744729 110.361888,45.2744729 L105.813215,45.2744729 L105.813215,59.3020233 Z M193.978816,31 L210,96 L102.020596,96 L86,31 L193.978816,31 Z M110.622941,53 C111.975592,53 113,53.5804416 113,54.9993691 C113,56.4195584 111.975592,57 110.622941,57 L108,57 L108,53 L110.622941,53 Z",fill:"currentColor"})})]})]}),e.jsxs("div",{className:"price-history__tabs u-flex u-border-b",role:"tablist",children:[e.jsx("button",{className:B("price-history__tab u-flex-1 u-cursor-pointer u-transition",s==="history"&&"price-history__tab--active"),onClick:()=>T("history"),role:"tab","aria-selected":s==="history","aria-controls":"price-history-chart",children:"Previous Two Years"}),e.jsx("button",{className:B("price-history__tab u-flex-1 u-cursor-pointer u-transition",s==="forecast"&&"price-history__tab--active"),onClick:()=>T("forecast"),role:"tab","aria-selected":s==="forecast","aria-controls":"price-history-chart",children:"Forecasted Value"})]}),e.jsxs("div",{ref:H,id:"price-history-chart",className:`price-history__chart ${s==="forecast"?"price-history__chart--forecast":""}`,role:"tabpanel",children:[e.jsx("div",{className:"price-history__chart-years",children:k.map((r,t)=>e.jsx("span",{className:`price-history__chart-year ${c===t?"price-history__chart-year--active":""} ${s==="forecast"&&t<1?"price-history__chart-year--faded":""}`,children:r},r))}),e.jsxs("div",{className:"price-history__chart-area",children:[[0,1,2].map(r=>e.jsx("div",{className:`price-history__chart-column ${c===r?"price-history__chart-column--active":""}`,onMouseEnter:()=>{g(r),L(r)},onMouseLeave:()=>{g(null),L(null)},onTouchStart:()=>W(r),role:"button","aria-label":`${k[r]} value: ${h(P(r))}`,tabIndex:-1},r)),e.jsx("div",{className:`price-history__chart-gradient price-history__chart-gradient--column-${c}`,"aria-hidden":"true"}),e.jsxs("svg",{className:"price-history__chart-line",viewBox:"0 0 100 100",preserveAspectRatio:"none","aria-hidden":"true",children:[s==="forecast"&&e.jsx("path",{className:"price-history__line-segment",d:`M 0,${l.start-5} L 16.66,${l.start}`,stroke:"#dc2626",strokeWidth:"2",fill:"none",vectorEffect:"non-scaling-stroke",style:{opacity:1}}),e.jsx("path",{className:`price-history__line-segment ${s==="forecast"?"price-history__line-segment--dashed":""}`,d:`M 16.66,${l.start} L 50,${l.mid}`,stroke:"#dc2626",strokeWidth:"2",fill:"none",vectorEffect:"non-scaling-stroke",style:{opacity:s==="forecast"?.6:1}}),e.jsx("path",{className:`price-history__line-segment ${s==="forecast"?"price-history__line-segment--dashed":""}`,d:`M 50,${l.mid} L 83.33,${l.end}`,stroke:"#dc2626",strokeWidth:"2",fill:"none",vectorEffect:"non-scaling-stroke",style:{opacity:s==="forecast"?.6:1,animationDelay:"0.4s"}}),s==="history"&&e.jsx("path",{className:"price-history__line-segment price-history__line-segment--dashed",d:`M 83.33,${l.end} L 100,${l.end+5}`,stroke:"#dc2626",strokeWidth:"2",fill:"none",vectorEffect:"non-scaling-stroke",style:{opacity:.5,animationDelay:"0.8s"}})]},s),e.jsx("div",{className:`price-history__chart-point price-history__chart-point--first ${c===0?"price-history__chart-point--active":""}`,style:{left:"16.66%",top:`${l.start}%`},"aria-hidden":"true"},`point1-${s}`),e.jsx("div",{className:`price-history__chart-point price-history__chart-point--second ${s==="forecast"?"price-history__chart-point--hollow":""} ${c===1?"price-history__chart-point--active":""}`,style:{left:"50%",top:`${l.mid}%`},"aria-hidden":"true"},`point2-${s}`),e.jsx("div",{className:`price-history__chart-point price-history__chart-point--third ${s==="forecast"?"price-history__chart-point--hollow":""} ${c===2?"price-history__chart-point--active":""}`,style:{left:"83.33%",top:`${l.end}%`},"aria-hidden":"true"},`point3-${s}`),e.jsxs("div",{className:"price-history__forecast-tooltip price-history__forecast-tooltip--visible",style:{left:c===0?"16.66%":c===1?"50%":"83.33%",top:`${c===0?l.start:c===1?l.mid:l.end}%`},role:"tooltip",children:[e.jsxs("span",{className:"price-history__forecast-tooltip-label",children:[k[c]," Value:"]}),e.jsx("span",{className:"price-history__forecast-tooltip-value",children:h(P(c))}),c>0&&e.jsx("span",{className:"price-history__forecast-tooltip-change",children:(()=>{const r=c===1?a.first-a.second:a.second-a.third;return`${r>0?"↓":"↑"} ${h(Math.abs(r))} from previous year`})()}),e.jsx("span",{className:"price-history__forecast-tooltip-total",children:(()=>{const r=P(c),t=o-r,y=(t/o*100).toFixed(1),N=t>0;return c===0&&s==="history"?"Original As New Value":`Total ${N?"depreciation":"appreciation"} from new: ${h(Math.abs(t))} (${y}%)`})()})]})]}),e.jsxs("div",{className:"price-history__chart-values",children:[e.jsxs("div",{className:`price-history__chart-value ${c===0?"price-history__chart-value--active":""}`,children:[e.jsx("span",{className:"price-history__chart-value-amount",children:e.jsx(R,{value:a.first})}),e.jsx("span",{className:"price-history__chart-value-label",children:a.firstLabel})]}),e.jsxs("div",{className:`price-history__chart-value ${c===1?"price-history__chart-value--active":""}`,children:[e.jsx("span",{className:"price-history__chart-value-amount",children:e.jsx(R,{value:a.second})}),Z(a.percentChanges[1]),e.jsx("span",{className:"price-history__chart-value-label",children:a.secondLabel})]}),e.jsxs("div",{className:`price-history__chart-value ${c===2?"price-history__chart-value--active":""} ${s==="forecast"?"price-history__chart-value--highlight":""}`,children:[e.jsx("span",{className:"price-history__chart-value-amount",children:e.jsx(R,{value:a.third})}),Z(a.percentChanges[2]),e.jsx("span",{className:"price-history__chart-value-label",children:a.thirdLabel})]})]})]}),e.jsx("p",{className:"price-history__disclaimer",children:"*These values are based on a vehicle in average condition with 15,000 miles driven per year."}),e.jsxs("div",{className:"price-history__ctas u-flex u-gap-3 u-p-4 u-border-t",children:[e.jsxs("a",{href:C,className:"price-history__cta price-history__cta--primary u-flex-1 u-flex-center u-font-heading u-font-bold u-uppercase u-rounded-sm u-transition",children:["SHOP FOR A ",p," MODEL"]}),e.jsx("a",{href:$,className:"price-history__cta price-history__cta--secondary u-flex-1 u-flex-center u-font-heading u-font-bold u-uppercase u-rounded-sm u-transition",children:"GET YOUR TRADE-IN VALUE"})]})]})]})};ee.__docgenInfo={description:"",methods:[],displayName:"PriceHistory",props:{vehicleYear:{required:!0,tsType:{name:"number"},description:"Vehicle year"},make:{required:!0,tsType:{name:"string"},description:"Vehicle make"},model:{required:!0,tsType:{name:"string"},description:"Vehicle model"},trim:{required:!0,tsType:{name:"string"},description:"Vehicle trim"},asNewValue:{required:!0,tsType:{name:"number"},description:"As new value (original price)"},previousYearValue:{required:!0,tsType:{name:"number"},description:"Previous year value"},currentValue:{required:!0,tsType:{name:"number"},description:"Current average value"},forecastYear1Value:{required:!0,tsType:{name:"number"},description:"Forecasted value year 1"},forecastYear2Value:{required:!0,tsType:{name:"number"},description:"Forecasted value year 2"},priceData:{required:!1,tsType:{name:"Array",elements:[{name:"PriceDataPoint"}],raw:"PriceDataPoint[]"},description:"Price data points for the chart (legacy support)"},expertTip:{required:!1,tsType:{name:"string"},description:"Expert tip message"},shopUrl:{required:!1,tsType:{name:"string"},description:"Shop button URL",defaultValue:{value:"'#'",computed:!1}},tradeInUrl:{required:!1,tsType:{name:"string"},description:"Trade-in button URL",defaultValue:{value:"'#'",computed:!1}},competitors:{required:!1,tsType:{name:"Array",elements:[{name:"CompetitorData"}],raw:"CompetitorData[]"},description:"Competitor price data for comparison"}}};export{ee as P};
