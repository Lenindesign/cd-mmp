import{r as n,j as e,u as de,L as x,l as me,d as he}from"./iframe-CwAjgNKQ.js";import{i as ue,s as _e}from"./vehicleService-BNfwZwSS.js";import{u as pe,g as ve}from"./useSupabaseRating-BC_gyC5w.js";import{v as w,a as F,c as ge,s as le}from"./index-CR0fvk7o.js";import{B as xe}from"./Button-BcyC78nL.js";import{E as be}from"./ExitIntentModal-DL8QTZW2.js";import{O as T}from"./OptimizedImage-DbFa41el.js";import{D as je}from"./DealerLocatorMap-CslGs9MM.js";import"./MakeOfferModal-CnBL5OA_.js";import"./OfferNegotiation-B8VCemf6.js";import{X as W}from"./x-DKyyRwwq.js";import{C as ie}from"./clock-DVUVR_vE.js";import{B as A}from"./bookmark-JCAp0K5P.js";import{C as G}from"./car-DFeoGOhY.js";import{c as re}from"./createLucideIcon-DYlIWxwW.js";import{C as ae}from"./chevron-right-CbYJ_8Lo.js";import{M as fe}from"./map-pin-rrI5LSk_.js";import{S as J}from"./search-C7nkfTXE.js";import{P as Q}from"./plus-C5gm4MTa.js";import{U as Ne}from"./user-B8_6jRd3.js";const Ce=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],we=re("log-out",Ce);const ye=[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]],ke=re("menu",ye);const Se=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],Ve=re("trash-2",Se),Le=(l,t)=>w.find(i=>i.make===l&&i.model===t),Me={"avatar-family":{make:"Honda",model:"Pilot",fallback:le},"avatar-adventure":{make:"Jeep",model:"Wrangler",fallback:le},"avatar-luxury":{make:"Mercedes-Benz",model:"S-Class",fallback:F},"avatar-eco-friendly":{make:"Tesla",model:"Model 3",fallback:F},"avatar-performance":{make:"Porsche",model:"911",fallback:ge},"avatar-commuter":{make:"Toyota",model:"Camry",fallback:F},"avatar-value":{make:"Honda",model:"Civic",fallback:F}},Y=l=>{if(!l||l==="initials")return null;const t=Me[l];return t&&(Le(t.make,t.model)||t.fallback[0])?.image||null},ne=l=>{if(!l)return"U";const t=l.split(" ");return t.length>=2?`${t[0][0]}${t[1][0]}`.toUpperCase():t[0].substring(0,2).toUpperCase()},te="recentlyViewedVehicles",He=20,$e=()=>{try{const l=localStorage.getItem(te);return l?JSON.parse(l):[]}catch{return[]}},ss=l=>{try{const t=$e(),i={id:l.id,name:`${l.year} ${l.make} ${l.model}`,slug:l.slug,image:l.image,price:l.priceMin,mileage:l.mileage,viewedAt:new Date().toISOString()},b=t.filter(o=>o.id!==l.id&&o.slug!==l.slug),f=[i,...b].slice(0,He);localStorage.setItem(te,JSON.stringify(f))}catch(t){console.error("Error saving recently viewed vehicle:",t)}},Re=()=>{try{localStorage.removeItem(te)}catch(l){console.error("Error clearing recently viewed vehicles:",l)}},ce=({isOpen:l,onClose:t,vehicle:i,initialLocation:b={lat:34.0522,lng:-118.2437},initialZipCode:f="Los Angeles, CA"})=>(n.useEffect(()=>{const o=O=>{O.key==="Escape"&&t()};return l&&(document.addEventListener("keydown",o),document.body.style.overflow="hidden"),()=>{document.removeEventListener("keydown",o),document.body.style.overflow=""}},[l,t]),l?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"dealer-map-modal__backdrop",onClick:t,"aria-hidden":"true"}),e.jsxs("div",{className:"dealer-map-modal",role:"dialog","aria-modal":"true","aria-labelledby":"dealer-map-modal-title",children:[e.jsxs("div",{className:"dealer-map-modal__header",children:[e.jsxs("h2",{id:"dealer-map-modal-title",className:"dealer-map-modal__title",children:["Find ",i.year," ",i.make," ",i.model," Near You"]}),e.jsx("button",{className:"dealer-map-modal__close",onClick:t,"aria-label":"Close modal",children:e.jsx(W,{size:24})})]}),e.jsx("div",{className:"dealer-map-modal__content",children:e.jsx(je,{vehicle:i,initialLocation:b,initialZipCode:f,showVehiclePreview:!1,defaultView:"map",cardVariant:"compact"})})]})]}):null);ce.__docgenInfo={description:"",methods:[],displayName:"DealerMapModal",props:{isOpen:{required:!0,tsType:{name:"boolean"},description:""},onClose:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},vehicle:{required:!0,tsType:{name:"VehicleInfo"},description:""},initialLocation:{required:!1,tsType:{name:"signature",type:"object",raw:"{ lat: number; lng: number }",signature:{properties:[{key:"lat",value:{name:"number",required:!0}},{key:"lng",value:{name:"number",required:!0}}]}},description:"",defaultValue:{value:"{ lat: 34.0522, lng: -118.2437 }",computed:!1}},initialZipCode:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:"'Los Angeles, CA'",computed:!1}}}};const oe=({isOpen:l,onClose:t})=>{const{user:i,addSavedVehicle:b,removeSavedVehicle:f}=de(),[o,O]=n.useState("recently-viewed"),[_,y]=n.useState([]),[j,I]=n.useState(!1),[k,v]=n.useState(!1),[S,V]=n.useState(""),[Z,z]=n.useState(""),[L,N]=n.useState([]),[U,M]=n.useState([]),H=n.useRef(null),$=n.useRef(null),[K,q]=n.useState(!1),[C,B]=n.useState(null);n.useEffect(()=>{const s=localStorage.getItem("recentlyViewedVehicles");if(s)try{const r=JSON.parse(s);y(r.slice(0,10))}catch{y([])}},[l]);const X=()=>{Re(),y([])},P=s=>{const r=s.split(" ");if(r.length>=1&&/^\d{4}$/.test(r[0])&&r.length>=3){const p=parseInt(r[0]),u=r[1],g=r.slice(2).join(" ");let m=w.find(h=>Number(h.year)===p&&h.make.toLowerCase()===u.toLowerCase()&&h.model.toLowerCase()===g.toLowerCase());return m||(m=w.find(h=>h.make.toLowerCase()===u.toLowerCase()&&h.model.toLowerCase()===g.toLowerCase())),m||(m=w.find(h=>h.make.toLowerCase()===u.toLowerCase()&&(h.model.toLowerCase().includes(g.toLowerCase())||g.toLowerCase().includes(h.model.toLowerCase())))),m}else if(r.length>=2){const p=r[0],u=r.slice(1).join(" ");let g=w.find(m=>m.make.toLowerCase()===p.toLowerCase()&&m.model.toLowerCase()===u.toLowerCase());if(g||(g=w.find(m=>m.make.toLowerCase()===p.toLowerCase()&&(m.model.toLowerCase().includes(u.toLowerCase())||u.toLowerCase().includes(m.model.toLowerCase())))),!g){const m=s.toLowerCase();g=w.find(h=>`${h.make} ${h.model}`.toLowerCase().includes(m)||m.includes(`${h.make} ${h.model}`.toLowerCase()))}return g}return null},E=i?.savedVehicles?.filter(s=>s.ownership==="want")||[],R=i?.savedVehicles?.filter(s=>s.ownership==="own")||[],D=s=>{const r=s.target.value;if(V(r),r.length>=2){const d=w.filter(p=>`${p.year} ${p.make} ${p.model}`.toLowerCase().includes(r.toLowerCase())).slice(0,6);N(d)}else N([])},ee=s=>{const r=s.target.value;if(z(r),r.length>=2){const d=w.filter(p=>`${p.year} ${p.make} ${p.model}`.toLowerCase().includes(r.toLowerCase())).slice(0,6);M(d)}else M([])},a=s=>{b({id:`own-${s.id}`,name:`${s.year} ${s.make} ${s.model}`,ownership:"own",savedAt:new Date().toISOString()}),V(""),N([]),I(!1)},c=s=>{b({id:`want-${s.id}`,name:`${s.year} ${s.make} ${s.model}`,ownership:"want",savedAt:new Date().toISOString()}),z(""),M([]),v(!1)};if(n.useEffect(()=>{j&&H.current&&H.current.focus()},[j]),n.useEffect(()=>{k&&$.current&&$.current.focus()},[k]),n.useEffect(()=>{const s=r=>{r.key==="Escape"&&t()};return l&&(document.addEventListener("keydown",s),document.body.style.overflow="hidden"),()=>{document.removeEventListener("keydown",s),document.body.style.overflow=""}},[l,t]),!l)return null;const se=[{id:"recently-viewed",label:"Recently Viewed",icon:e.jsx(ie,{size:16}),count:_.length},{id:"want",label:"Cars I Want",icon:e.jsx(A,{size:16}),count:E.length},{id:"own",label:"Cars I Own",icon:e.jsx(G,{size:16}),count:R.length}];return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"saved-sidebar__overlay",onClick:t}),e.jsxs("aside",{className:"saved-sidebar",role:"dialog","aria-label":"Saved vehicles",children:[e.jsxs("div",{className:"saved-sidebar__header",children:[e.jsxs("div",{className:"saved-sidebar__header-content",children:[e.jsx(A,{size:20,fill:"currentColor",className:"saved-sidebar__header-icon"}),e.jsx("h2",{className:"saved-sidebar__title",children:"My Garage"})]}),e.jsx("button",{className:"saved-sidebar__close",onClick:t,"aria-label":"Close sidebar",children:e.jsx(W,{size:24})})]}),e.jsxs("div",{className:"saved-sidebar__welcome",children:[e.jsx("span",{className:"saved-sidebar__welcome-text",children:"Welcome!"}),e.jsx("p",{className:"saved-sidebar__welcome-desc",children:"Here are the cars you've viewed, followed or own."})]}),e.jsx("div",{className:"saved-sidebar__tabs",children:se.map(s=>e.jsxs("button",{className:`saved-sidebar__tab ${o===s.id?"saved-sidebar__tab--active":""}`,onClick:()=>O(s.id),children:[s.icon,e.jsx("span",{children:s.label}),s.count>0&&e.jsx("span",{className:"saved-sidebar__tab-count",children:s.count})]},s.id))}),e.jsxs("div",{className:"saved-sidebar__content",children:[o==="recently-viewed"&&e.jsx("div",{className:"saved-sidebar__section",children:_.length>0?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"saved-sidebar__section-header",children:[e.jsxs("span",{className:"saved-sidebar__section-title",children:["Recently Viewed (",_.length,")"]}),e.jsxs("div",{className:"saved-sidebar__section-actions",children:[e.jsxs("button",{className:"saved-sidebar__clear-btn",onClick:X,title:"Clear recently viewed",children:[e.jsx(Ve,{size:14}),"Clear"]}),e.jsxs(x,{to:"/vehicles",className:"saved-sidebar__section-link",onClick:t,children:["Shop Now ",e.jsx(ae,{size:14})]})]})]}),e.jsx("div",{className:"saved-sidebar__vehicles",children:_.map((s,r)=>e.jsxs(x,{to:`/${s.slug}`,className:"saved-sidebar__vehicle",onClick:t,children:[e.jsx("div",{className:"saved-sidebar__vehicle-image",children:e.jsx(T,{src:s.image,alt:s.name,width:80,height:60})}),e.jsxs("div",{className:"saved-sidebar__vehicle-info",children:[e.jsx("span",{className:"saved-sidebar__vehicle-name",children:s.name}),e.jsxs("span",{className:"saved-sidebar__vehicle-price",children:["$",s.price.toLocaleString(),s.mileage&&e.jsxs("span",{className:"saved-sidebar__vehicle-mileage",children:["â€¢ ",s.mileage.toLocaleString()," mi"]})]})]}),e.jsx("button",{className:`saved-sidebar__vehicle-favorite ${i?.savedVehicles?.some(d=>d.name===s.name)?"saved-sidebar__vehicle-favorite--active":""}`,onClick:d=>{if(d.preventDefault(),d.stopPropagation(),i?.savedVehicles?.some(u=>u.name===s.name)){const u=i?.savedVehicles?.find(g=>g.name===s.name);u&&f(u.id)}else b({id:`want-${s.id}-${Date.now()}`,name:s.name,ownership:"want",savedAt:new Date().toISOString()})},"aria-label":i?.savedVehicles?.some(d=>d.name===s.name)?"Remove from saved":"Save vehicle",children:e.jsx(A,{size:18,fill:i?.savedVehicles?.some(d=>d.name===s.name)?"currentColor":"none"})})]},`${s.id}-${r}`))})]}):e.jsxs("div",{className:"saved-sidebar__empty",children:[e.jsx(ie,{size:48,className:"saved-sidebar__empty-icon"}),e.jsx("h3",{className:"saved-sidebar__empty-title",children:"No recently viewed"}),e.jsx("p",{className:"saved-sidebar__empty-desc",children:"Start browsing vehicles and they'll appear here."}),e.jsx(x,{to:"/vehicles",className:"saved-sidebar__empty-cta",onClick:t,children:"Browse Vehicles"})]})}),o==="want"&&e.jsxs("div",{className:"saved-sidebar__section",children:[E.length>0?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"saved-sidebar__section-header",children:e.jsxs("span",{className:"saved-sidebar__section-title",children:["Cars I Want (",E.length,")"]})}),e.jsx("div",{className:"saved-sidebar__vehicles",children:E.map(s=>{const r=P(s.name);return e.jsxs("div",{className:"saved-sidebar__vehicle-wrapper",children:[e.jsxs(x,{to:r?`/${r.slug}`:"/vehicles",className:"saved-sidebar__vehicle",onClick:t,children:[e.jsx("div",{className:"saved-sidebar__vehicle-image",children:r?.image?e.jsx(T,{src:r.image,alt:s.name,width:80,height:60}):e.jsx("div",{className:"saved-sidebar__vehicle-placeholder",children:e.jsx(G,{size:24})})}),e.jsxs("div",{className:"saved-sidebar__vehicle-info",children:[e.jsx("span",{className:"saved-sidebar__vehicle-name",children:s.name}),r&&e.jsxs("span",{className:"saved-sidebar__vehicle-price",children:["Starting at $",r.priceMin.toLocaleString()]})]}),e.jsx("button",{className:"saved-sidebar__vehicle-unsave",onClick:d=>{d.preventDefault(),d.stopPropagation(),f(s.id)},"aria-label":"Remove from saved",title:"Remove from saved",children:e.jsx(A,{size:18,fill:"currentColor"})})]}),r&&e.jsxs("button",{className:"saved-sidebar__vehicle-dealers",onClick:()=>{B({year:r.year,make:r.make,model:r.model,msrp:r.priceMin,image:r.image,priceMin:r.priceMin,priceMax:r.priceMax}),q(!0)},children:[e.jsx(fe,{size:14}),e.jsx("span",{children:"See cars available near you"}),e.jsx(ae,{size:14})]})]},s.id)})})]}):!k&&e.jsxs("div",{className:"saved-sidebar__empty",children:[e.jsx(A,{size:48,className:"saved-sidebar__empty-icon"}),e.jsx("h3",{className:"saved-sidebar__empty-title",children:"No saved vehicles"}),e.jsx("p",{className:"saved-sidebar__empty-desc",children:'Use the "Add a Vehicle" button below to search and save vehicles you want.'}),e.jsxs(x,{to:"/vehicles",className:"saved-sidebar__empty-cta",onClick:t,children:["Browse All Vehicles ",e.jsx(ae,{size:16})]})]}),k?e.jsxs("div",{className:"saved-sidebar__add-vehicle",children:[e.jsxs("div",{className:"saved-sidebar__search-wrapper",children:[e.jsx(J,{size:18,className:"saved-sidebar__search-icon"}),e.jsx("input",{ref:$,type:"text",className:"saved-sidebar__search-input",placeholder:"Search by year, make, or model...",value:Z,onChange:ee}),e.jsx("button",{className:"saved-sidebar__search-close",onClick:()=>{v(!1),z(""),M([])},children:e.jsx(W,{size:18})})]}),U.length>0&&e.jsx("div",{className:"saved-sidebar__search-results",children:U.map(s=>e.jsxs("button",{className:"saved-sidebar__search-result",onClick:()=>c(s),children:[e.jsx("div",{className:"saved-sidebar__search-result-image",children:e.jsx(T,{src:s.image,alt:`${s.year} ${s.make} ${s.model}`,width:60,height:45})}),e.jsxs("div",{className:"saved-sidebar__search-result-info",children:[e.jsxs("span",{className:"saved-sidebar__search-result-name",children:[s.year," ",s.make," ",s.model]}),e.jsxs("span",{className:"saved-sidebar__search-result-price",children:["$",s.priceMin.toLocaleString()," - $",s.priceMax.toLocaleString()]})]}),e.jsx(Q,{size:18,className:"saved-sidebar__search-result-add"})]},s.id))}),Z.length>=2&&U.length===0&&e.jsxs("div",{className:"saved-sidebar__search-no-results",children:['No vehicles found for "',Z,'"']})]}):e.jsxs("button",{className:"saved-sidebar__add-btn",onClick:()=>v(!0),children:[e.jsx(Q,{size:18}),e.jsx("span",{children:"Add a Vehicle"})]})]}),o==="own"&&e.jsxs("div",{className:"saved-sidebar__section",children:[R.length>0&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"saved-sidebar__section-header",children:e.jsxs("span",{className:"saved-sidebar__section-title",children:["Cars I Own (",R.length,")"]})}),e.jsx("div",{className:"saved-sidebar__vehicles",children:R.map(s=>{const r=P(s.name);return e.jsxs(x,{to:r?`/${r.slug}`:"/vehicles",className:"saved-sidebar__vehicle",onClick:t,children:[e.jsx("div",{className:"saved-sidebar__vehicle-image",children:r?.image?e.jsx(T,{src:r.image,alt:s.name,width:80,height:60}):e.jsx("div",{className:"saved-sidebar__vehicle-placeholder",children:e.jsx(G,{size:24})})}),e.jsxs("div",{className:"saved-sidebar__vehicle-info",children:[e.jsx("span",{className:"saved-sidebar__vehicle-name",children:s.name}),r&&e.jsxs("span",{className:"saved-sidebar__vehicle-price",children:["Starting at $",r.priceMin.toLocaleString()]})]}),e.jsx("button",{className:"saved-sidebar__vehicle-unsave",onClick:d=>{d.preventDefault(),d.stopPropagation(),f(s.id)},"aria-label":"Remove from saved",title:"Remove from saved",children:e.jsx(A,{size:18,fill:"currentColor"})})]},s.id)})})]}),R.length===0&&!j&&e.jsxs("div",{className:"saved-sidebar__empty",children:[e.jsx(G,{size:48,className:"saved-sidebar__empty-icon"}),e.jsx("h3",{className:"saved-sidebar__empty-title",children:"No vehicles added"}),e.jsx("p",{className:"saved-sidebar__empty-desc",children:'Use the "Add a Vehicle" button below to add cars you own.'})]}),j?e.jsxs("div",{className:"saved-sidebar__add-vehicle",children:[e.jsxs("div",{className:"saved-sidebar__search-wrapper",children:[e.jsx(J,{size:18,className:"saved-sidebar__search-icon"}),e.jsx("input",{ref:H,type:"text",className:"saved-sidebar__search-input",placeholder:"Search by year, make, or model...",value:S,onChange:D}),e.jsx("button",{className:"saved-sidebar__search-close",onClick:()=>{I(!1),V(""),N([])},children:e.jsx(W,{size:18})})]}),L.length>0&&e.jsx("div",{className:"saved-sidebar__search-results",children:L.map(s=>e.jsxs("button",{className:"saved-sidebar__search-result",onClick:()=>a(s),children:[e.jsx("div",{className:"saved-sidebar__search-result-image",children:e.jsx(T,{src:s.image,alt:`${s.year} ${s.make} ${s.model}`,width:60,height:45})}),e.jsxs("div",{className:"saved-sidebar__search-result-info",children:[e.jsxs("span",{className:"saved-sidebar__search-result-name",children:[s.year," ",s.make," ",s.model]}),e.jsxs("span",{className:"saved-sidebar__search-result-price",children:["$",s.priceMin.toLocaleString()," - $",s.priceMax.toLocaleString()]})]}),e.jsx(Q,{size:18,className:"saved-sidebar__search-result-add"})]},s.id))}),S.length>=2&&L.length===0&&e.jsxs("div",{className:"saved-sidebar__search-no-results",children:['No vehicles found for "',S,'"']})]}):e.jsxs("button",{className:"saved-sidebar__add-btn",onClick:()=>I(!0),children:[e.jsx(Q,{size:18}),e.jsx("span",{children:"Add a Vehicle"})]})]})]}),e.jsx("div",{className:"saved-sidebar__footer",children:e.jsx(x,{to:"/account?tab=saved",className:"saved-sidebar__footer-btn",onClick:t,children:"View All Saved"})})]}),C&&e.jsx(ce,{isOpen:K,onClose:()=>{q(!1),B(null)},vehicle:C})]})};oe.__docgenInfo={description:"",methods:[],displayName:"SavedVehiclesSidebar",props:{isOpen:{required:!0,tsType:{name:"boolean"},description:""},onClose:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""}}};const Ae=()=>{const l=me(),t=he(),{user:i,isAuthenticated:b,signOut:f}=de(),[o,O]=n.useState(!1),[_,y]=n.useState(""),[j,I]=n.useState([]),[k,v]=n.useState(!1),[S,V]=n.useState(-1),[Z,z]=n.useState(!1),[L,N]=n.useState(!1),[U,M]=n.useState(!1),H=n.useRef(null),$=n.useRef(null),{getRating:K}=pe(),q="https://d2kde5ohu8qb21.cloudfront.net/files/659f9ed490e84500088bd486/012-2024-lamborghini-revuelto.jpg",C=n.useMemo(()=>{const a=l.pathname.match(/^\/(\d{4})\/([^/]+)\/([^/]+)/);if(a){const[,c,se,s]=a,r=`${c}/${se}/${s}`;return ue(r)}return null},[l.pathname]),B=C?.image||(C?q:void 0),X=a=>K(a.id,ve(a.bodyStyle),a.staffRating),P=[{label:"Browse All Vehicles",href:"/vehicles",isRoute:!0},{label:"Shop New Cars",href:"/",isRoute:!0},{label:"Shop Used Cars",href:"/used-cars",isRoute:!0},{label:"Research Cars",href:"#"},{label:"Expert Reviews",href:"#"},{label:"What's My Car Worth?",href:"#"},{label:"News + Stories",href:"#"}];n.useEffect(()=>{if(_.trim().length>=2){const a=_e(_).slice(0,8);I(a),v(!0)}else I([]),v(!1);V(-1)},[_]),n.useEffect(()=>{const a=c=>{H.current&&!H.current.contains(c.target)&&v(!1),$.current&&!$.current.contains(c.target)&&N(!1)};return document.addEventListener("mousedown",a),()=>document.removeEventListener("mousedown",a)},[]);const E=async()=>{await f(),N(!1),t("/")},R=a=>{a.preventDefault(),_.trim()&&(t(`/vehicles?search=${encodeURIComponent(_.trim())}`),y(""),v(!1))},D=a=>{t(`/${a.slug}`),y(""),v(!1)},ee=a=>{!k||j.length===0||(a.key==="ArrowDown"?(a.preventDefault(),V(c=>c<j.length-1?c+1:c)):a.key==="ArrowUp"?(a.preventDefault(),V(c=>c>0?c-1:-1)):a.key==="Enter"&&S>=0?(a.preventDefault(),D(j[S])):a.key==="Escape"&&v(!1))};return e.jsxs("header",{className:"header",children:[e.jsxs("div",{className:"header__container",children:[e.jsxs("div",{className:"header__top",children:[e.jsx("button",{className:"header__mobile-menu-btn",onClick:()=>O(!o),"aria-label":o?"Close menu":"Open menu",children:o?e.jsx(W,{size:24}):e.jsx(ke,{size:24})}),e.jsx(x,{to:"/",className:"header__logo","aria-label":"Car and Driver Home",children:e.jsxs("svg",{viewBox:"0 0 1364 262",className:"header__logo-svg header__logo-svg--animated",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("path",{className:"header__logo-letter",fill:"currentColor",d:"M68.022 210.901C74.858 210.901 76.91 205.432 76.91 197.571V146.641H132.626V199.276C132.626 231.41 116.903 261.83 72.468 261.83H62.554C15.04 261.83 0 233.462 0 194.496V65.289C0 28.712 16.408 0 62.213 0H72.468C117.588 0 132.626 25.978 132.626 59.473V101.177H76.91V61.869C76.91 53.667 74.858 49.222 67.682 49.222C60.502 49.222 58.452 52.982 58.452 61.869V197.571C58.452 206.114 60.846 210.901 68.022 210.901Z"}),e.jsx("path",{className:"header__logo-letter",fill:"currentColor",d:"M272.324 257.729H217.63L213.53 220.47H187.551L183.791 257.729H134.911L167.384 3.41907H236.774L272.324 257.729ZM192.681 170.223H208.402L200.54 92.9747L192.681 170.223Z"}),e.jsx("path",{className:"header__logo-letter",fill:"currentColor",d:"M366.797 3.41907C391.752 3.41907 408.842 18.1158 408.842 48.1925V81.6935C408.842 105.278 396.534 115.873 386.624 120.318C396.194 124.079 408.842 134.331 408.842 153.477V237.561C408.842 247.13 410.55 252.601 412.258 256.021V257.729H356.542C354.149 254.654 352.101 248.844 352.101 239.616V165.781C352.101 157.237 350.047 153.477 342.527 153.477H334.666V257.729H278.268V3.41907H366.797ZM334.665 105.623H341.845C349.021 105.623 352.1 102.203 352.1 93.3126V59.1349C352.1 50.245 350.391 47.1691 342.871 47.1691H334.666L334.665 105.623Z"}),e.jsx("path",{className:"header__logo-bar",d:"M428.499 63.023H594.769V3.61597H428.5L428.499 63.023Z",fill:"#D2232A"}),e.jsx("path",{className:"header__logo-bar",d:"M428.499 257.046H594.769V197.644H428.5L428.499 257.046Z",fill:"#0061AF"}),e.jsx("path",{className:"header__logo-letter",fill:"currentColor",d:"M481.039 182.672H461.599L460.098 167.332H449.987L448.607 182.672H430.7L442.597 77.9894H468.019L481.039 182.672ZM451.864 147.839H458.219L454.742 111.882L451.864 147.839Z"}),e.jsx("path",{className:"header__logo-letter",fill:"currentColor",d:"M486.974 182.672V77.9889H507.008L517.652 128.64V77.9889H535.31V182.671H517.152L504.881 128.077V182.672H486.974Z"}),e.jsx("path",{className:"header__logo-letter",fill:"currentColor",d:"M573.909 77.9874C585.429 77.9875 592.567 84.3239 592.567 101.067V158.609C592.567 174.929 586.18 182.672 574.035 182.672H544.356V77.9874H573.909ZM564.175 162.549H567.647C570.653 162.549 571.531 160.579 571.531 156.219V103.459C571.531 99.2341 570.653 97.4093 567.898 97.4093H564.175V162.549Z"}),e.jsx("path",{className:"header__logo-letter",fill:"currentColor",d:"M696.341 3.41907C727.79 3.41907 747.273 18.8019 747.273 59.4728V199.276C747.273 238.928 729.839 257.729 696.682 257.729H615.674V3.41907H696.341ZM671.389 208.852H679.251C687.454 208.852 689.847 204.065 689.847 193.469V65.2892C689.847 55.0342 687.453 50.589 679.933 50.589H671.389V208.852Z"}),e.jsx("path",{className:"header__logo-letter",fill:"currentColor",d:"M845.438 3.41907C870.393 3.41907 887.48 18.1158 887.48 48.1925V81.6935C887.48 105.278 875.177 115.873 865.264 120.318C874.833 124.079 887.48 134.331 887.48 153.477V237.561C887.48 247.13 889.191 252.601 890.899 256.021V257.729H835.183C832.79 254.654 830.738 248.844 830.738 239.616V165.781C830.738 157.237 828.689 153.477 821.169 153.477H813.307L813.308 257.729H756.907V3.41907H845.438ZM813.307 105.623H820.482C827.662 105.623 830.737 102.203 830.737 93.3126V59.1349C830.737 50.245 829.03 47.1691 821.51 47.1691H813.307V105.623Z"}),e.jsx("path",{className:"header__logo-letter",fill:"currentColor",d:"M956.492 257.732H900.092V3.41895H956.492V257.732Z"}),e.jsx("path",{className:"header__logo-letter",fill:"currentColor",d:"M1073.15 257.729H999.319L962.748 3.41895H1022.22L1037.6 162.705L1052.99 3.41895H1107.34L1073.15 257.729Z"}),e.jsx("path",{className:"header__logo-letter",fill:"currentColor",d:"M1113.59 257.729V3.41895H1219.21V56.0569H1169.3V99.4689H1209.3V153.477H1169.3V204.065H1221.26V257.729H1113.59Z"}),e.jsx("path",{className:"header__logo-letter",fill:"currentColor",d:"M1285.45 47.1689H1293.65C1301.17 47.1689 1302.88 50.2449 1302.88 59.1349V93.313C1302.88 102.203 1299.81 105.623 1292.63 105.623H1285.45V47.1689ZM1285.45 153.477H1293.31C1300.83 153.477 1302.88 157.237 1302.88 165.781V239.616C1302.88 248.844 1304.93 254.654 1307.33 257.729H1363.04V256.021C1361.33 252.601 1359.62 247.131 1359.62 237.561V153.477C1359.62 134.331 1346.98 124.08 1337.41 120.319C1347.32 115.874 1359.62 105.279 1359.62 81.6939V48.1929C1359.62 18.1159 1342.54 3.41895 1317.58 3.41895H1229.05V257.729H1285.45V153.477Z"})]})}),e.jsxs("form",{className:"header__search-bar",onSubmit:R,ref:H,children:[e.jsx("input",{type:"text",className:"header__search-input",placeholder:"Search vehicles...",value:_,onChange:a=>y(a.target.value),onKeyDown:ee,onFocus:()=>_.trim().length>=2&&v(!0)}),e.jsx("button",{type:"submit",className:"header__search-btn","aria-label":"Search",children:e.jsx(J,{size:20})}),k&&j.length>0&&e.jsxs("div",{className:"header__suggestions",children:[j.map((a,c)=>e.jsxs("div",{className:`header__suggestion ${c===S?"header__suggestion--active":""}`,children:[e.jsx("img",{src:a.image||"/placeholder-car.png",alt:`${a.make} ${a.model}`,className:"header__suggestion-image",onClick:()=>D(a)}),e.jsxs("div",{className:"header__suggestion-info",onClick:()=>D(a),children:[e.jsxs("span",{className:"header__suggestion-name",children:[a.year," ",a.make," ",a.model]}),e.jsx("span",{className:"header__suggestion-price",children:a.priceRange})]}),e.jsxs("span",{className:"header__suggestion-rating",children:[e.jsx("span",{className:"header__suggestion-rating-score",children:X(a)}),"/10"]}),e.jsxs("div",{className:"header__suggestion-ctas",children:[e.jsx("button",{type:"button",className:"header__suggestion-cta header__suggestion-cta--buy",onClick:()=>{t(`/${a.slug}#pricing`),y(""),v(!1)},children:"Buy"}),e.jsx("button",{type:"button",className:"header__suggestion-cta header__suggestion-cta--research",onClick:()=>D(a),children:"Research"})]})]},a.id)),e.jsxs("button",{type:"submit",className:"header__suggestion header__suggestion--all",children:[e.jsx(J,{size:16}),e.jsxs("span",{children:['See all results for "',_,'"']})]})]})]}),e.jsxs("div",{className:"header__actions",children:[b?e.jsxs("button",{className:"header__saved-btn",onClick:()=>M(!0),"aria-label":"My Garage",children:[e.jsx(A,{size:18,fill:"currentColor"}),e.jsx("span",{className:"header__saved-btn-text",children:"My Garage"})]}):e.jsx(xe,{variant:"primary",size:"small",onClick:()=>z(!0),className:"header__subscribe-btn",children:"Subscribe"}),e.jsx("div",{className:"header__user-container",ref:$,children:b&&i?e.jsxs(e.Fragment,{children:[e.jsx("button",{className:"header__user-btn header__user-btn--authenticated",onClick:()=>N(!L),"aria-label":"User menu","aria-expanded":L,children:e.jsx("div",{className:"header__user-avatar",children:Y(i.avatar)?e.jsx("img",{src:Y(i.avatar),alt:i.name||"User avatar",className:"header__user-avatar-img"}):e.jsx("span",{children:ne(i.name)})})}),L&&e.jsxs("div",{className:"header__user-menu",children:[e.jsxs("div",{className:"header__user-menu-header",children:[e.jsx("div",{className:"header__user-menu-avatar",children:Y(i.avatar)?e.jsx("img",{src:Y(i.avatar),alt:i.name||"User avatar",className:"header__user-menu-avatar-img"}):e.jsx("span",{children:ne(i.name)})}),e.jsxs("div",{className:"header__user-menu-info",children:[e.jsx("span",{className:"header__user-menu-name",children:i.name||"Member"}),e.jsx("span",{className:"header__user-menu-email",children:i.email})]})]}),e.jsx("div",{className:"header__user-menu-divider"}),e.jsxs(x,{to:"/account",className:"header__user-menu-item",onClick:()=>N(!1),children:[e.jsx(Ne,{size:18}),e.jsx("span",{children:"My Account"})]}),e.jsx("div",{className:"header__user-menu-divider"}),e.jsxs("button",{className:"header__user-menu-item header__user-menu-item--danger",onClick:E,children:[e.jsx(we,{size:18}),e.jsx("span",{children:"Sign Out"})]})]})]}):e.jsx(x,{to:"/sign-in",className:"header__user-btn","aria-label":"Sign in",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M21.649 19.875c-1.428-2.468-3.629-4.239-6.196-5.078a6.75 6.75 0 1 0-6.906 0c-2.568.839-4.768 2.609-6.196 5.078a.75.75 0 1 0 1.299.75C5.416 17.573 8.538 15.75 12 15.75c3.462 0 6.584 1.823 8.35 4.875a.75.75 0 1 0 1.299-.75ZM6.749 9a5.25 5.25 0 1 1 10.5 0 5.25 5.25 0 0 1-10.5 0Z",fill:"currentColor"})})})})]})]}),e.jsx("nav",{className:`header__nav ${o?"header__nav--open":""}`,children:e.jsx("ul",{className:"header__nav-list",children:P.map((a,c)=>e.jsx("li",{className:"header__nav-item",children:a.isRoute?e.jsx(x,{to:a.href,className:"header__nav-link",children:a.label}):e.jsx("a",{href:a.href,className:"header__nav-link",children:a.label})},c))})})]}),e.jsx(be,{isOpen:Z,onClose:()=>z(!1),vehicleName:C?`${C.year} ${C.make} ${C.model}`:void 0,vehicleImage:B,enableExitIntent:!0}),e.jsx(oe,{isOpen:U,onClose:()=>M(!1)})]})};Ae.__docgenInfo={description:"",methods:[],displayName:"Header"};export{Ae as H,ss as a};
