import{u as S,r as l,j as e,A as T,M as E}from"./iframe-DSvoZ5_G.js";import{a as k,s as m,c as w,v as P}from"./index-Dto8T7jp.js";import{X as B}from"./x-2E-1Lj0o.js";import{U as $}from"./user-dNwHUIS6.js";import{I}from"./image-Hph0CRKl.js";import{C as f}from"./check-Xqbxoflv.js";import"./preload-helper-PPVm8Dsz.js";import"./createLucideIcon-Crwf_ruZ.js";const g=(r,i)=>P.find(s=>s.make===r&&s.model===i),R=[{id:"family",name:"Family",make:"Honda",model:"Pilot",fallback:k},{id:"adventure",name:"Adventure",make:"Jeep",model:"Wrangler",fallback:k},{id:"luxury",name:"Luxury",make:"Mercedes-Benz",model:"S-Class",fallback:m},{id:"eco-friendly",name:"Eco-Friendly",make:"Tesla",model:"Model 3",fallback:m},{id:"performance",name:"Performance",make:"Porsche",model:"911",fallback:w},{id:"commuter",name:"Commuter",make:"Toyota",model:"Camry",fallback:m},{id:"value",name:"Value",make:"Honda",model:"Civic",fallback:m}],z=()=>R.map((r,i)=>{const s=g(r.make,r.model)||r.fallback[i%r.fallback.length];return{id:`avatar-${r.id}`,name:r.name,image:s?.image||"",type:"preset"}}).filter(r=>r.image),L=()=>[{make:"Chevrolet",model:"Corvette",name:"Corvette"},{make:"Land Rover",model:"Range Rover",name:"Range Rover"},{make:"Ford",model:"Bronco",name:"Bronco"},{make:"Porsche",model:"Taycan",name:"Taycan"},{make:"Mercedes-Benz",model:"AMG GT",name:"AMG GT"},{make:"BMW",model:"X5",name:"BMW X5"}].map(i=>{const s=g(i.make,i.model),o=s?.galleryImages?.[0]||s?.image||"";return{id:`banner-${i.make.toLowerCase()}-${i.model.toLowerCase().replace(/\s+/g,"-")}`,name:i.name,image:o}}).filter(i=>i.image),u=({isOpen:r,onClose:i})=>{const{user:s,updateUser:o}=S(),[d,_]=l.useState("avatar"),[v,h]=l.useState(!1),x=l.useMemo(()=>z(),[]),b=l.useMemo(()=>L(),[]),[t,j]=l.useState(s?.avatar||x[0]?.id||"initials"),[n,N]=l.useState(s?.banner||b[0]?.id||""),y=l.useCallback(()=>{if(!s?.name)return"U";const a=s.name.split(" ");return a.length>=2?`${a[0][0]}${a[1][0]}`.toUpperCase():a[0].substring(0,2).toUpperCase()},[s?.name]),M=l.useCallback(async()=>{h(!0);try{await o({avatar:t,banner:n}),i()}catch(a){console.error("Failed to update profile:",a)}finally{h(!1)}},[t,n,o,i]),A=l.useCallback(a=>{a.target===a.currentTarget&&i()},[i]);return r?e.jsx("div",{className:"edit-profile-modal__overlay",onClick:A,children:e.jsxs("div",{className:"edit-profile-modal",role:"dialog","aria-modal":"true","aria-labelledby":"edit-profile-title",children:[e.jsxs("div",{className:"edit-profile-modal__header",children:[e.jsx("h2",{id:"edit-profile-title",className:"edit-profile-modal__title",children:"Edit Profile"}),e.jsx("button",{className:"edit-profile-modal__close",onClick:i,"aria-label":"Close modal",children:e.jsx(B,{size:24})})]}),e.jsxs("div",{className:"edit-profile-modal__tabs",children:[e.jsxs("button",{className:`edit-profile-modal__tab ${d==="avatar"?"edit-profile-modal__tab--active":""}`,onClick:()=>_("avatar"),children:[e.jsx($,{size:18}),e.jsx("span",{children:"Avatar"})]}),e.jsxs("button",{className:`edit-profile-modal__tab ${d==="banner"?"edit-profile-modal__tab--active":""}`,onClick:()=>_("banner"),children:[e.jsx(I,{size:18}),e.jsx("span",{children:"Banner"})]})]}),e.jsxs("div",{className:"edit-profile-modal__content",children:[d==="avatar"&&e.jsxs("div",{className:"edit-profile-modal__section",children:[e.jsx("h3",{className:"edit-profile-modal__section-title",children:"Choose Avatar"}),e.jsxs("div",{className:"edit-profile-modal__grid edit-profile-modal__grid--avatars",children:[e.jsxs("button",{className:`edit-profile-modal__avatar-option ${t==="initials"?"edit-profile-modal__avatar-option--selected":""}`,onClick:()=>j("initials"),children:[e.jsx("div",{className:"edit-profile-modal__avatar-preview edit-profile-modal__avatar-preview--initials",children:e.jsx("span",{children:y()})}),e.jsx("span",{className:"edit-profile-modal__avatar-name",children:"My Initials"}),t==="initials"&&e.jsx("div",{className:"edit-profile-modal__check",children:e.jsx(f,{size:14})})]}),x.map(a=>e.jsxs("button",{className:`edit-profile-modal__avatar-option ${t===a.id?"edit-profile-modal__avatar-option--selected":""}`,onClick:()=>j(a.id),children:[e.jsx("div",{className:"edit-profile-modal__avatar-preview",children:e.jsx("img",{src:a.image,alt:a.name})}),e.jsx("span",{className:"edit-profile-modal__avatar-name",children:a.name}),t===a.id&&e.jsx("div",{className:"edit-profile-modal__check",children:e.jsx(f,{size:14})})]},a.id))]})]}),d==="banner"&&e.jsxs("div",{className:"edit-profile-modal__section",children:[e.jsx("h3",{className:"edit-profile-modal__section-title",children:"Choose Banner"}),e.jsx("div",{className:"edit-profile-modal__grid edit-profile-modal__grid--banners",children:b.map(a=>e.jsxs("button",{className:`edit-profile-modal__banner-option ${n===a.id?"edit-profile-modal__banner-option--selected":""}`,onClick:()=>N(a.id),children:[e.jsx("div",{className:"edit-profile-modal__banner-preview",children:e.jsx("img",{src:a.image,alt:a.name})}),e.jsx("span",{className:"edit-profile-modal__banner-name",children:a.name}),n===a.id&&e.jsx("div",{className:"edit-profile-modal__check",children:e.jsx(f,{size:14})})]},a.id))})]})]}),e.jsxs("div",{className:"edit-profile-modal__footer",children:[e.jsx("button",{className:"edit-profile-modal__btn edit-profile-modal__btn--cancel",onClick:i,children:"Cancel"}),e.jsx("button",{className:"edit-profile-modal__btn edit-profile-modal__btn--save",onClick:M,disabled:v,children:v?"Saving...":"Save Changes"})]})]})}):null};u.__docgenInfo={description:"",methods:[],displayName:"EditProfileModal",props:{isOpen:{required:!0,tsType:{name:"boolean"},description:""},onClose:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""}}};const X={title:"Components/EditProfileModal",component:u,parameters:{layout:"fullscreen",router:{skip:!0}},decorators:[r=>e.jsx(T,{children:e.jsx(E,{children:e.jsx(r,{})})})]},C=()=>{const[r,i]=l.useState(!0);return e.jsxs("div",{style:{minHeight:"100vh",background:"#f5f5f5"},children:[e.jsx("button",{onClick:()=>i(!0),style:{padding:"12px 24px",margin:"20px",background:"#1a1a1a",color:"white",border:"none",borderRadius:"8px",cursor:"pointer"},children:"Open Edit Profile Modal"}),e.jsx(u,{isOpen:r,onClose:()=>i(!1)})]})},c={render:()=>e.jsx(C,{})},p={render:()=>e.jsx(C,{}),parameters:{docs:{description:{story:"Modal showing the Avatar selection tab (default view)."}}}};c.parameters={...c.parameters,docs:{...c.parameters?.docs,source:{originalSource:`{
  render: () => <EditProfileModalWrapper />
}`,...c.parameters?.docs?.source}}};p.parameters={...p.parameters,docs:{...p.parameters?.docs,source:{originalSource:`{
  render: () => <EditProfileModalWrapper />,
  parameters: {
    docs: {
      description: {
        story: 'Modal showing the Avatar selection tab (default view).'
      }
    }
  }
}`,...p.parameters?.docs?.source}}};const q=["Default","AvatarTab"];export{p as AvatarTab,c as Default,q as __namedExportsOrder,X as default};
