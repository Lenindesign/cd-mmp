import{r as u,j as t,L as P}from"./iframe-D6l4Tfoa.js";import{d as A,b as H,e as I}from"./vehicleService-BNfwZwSS.js";import{g as G}from"./lifestyleService-BjdHkeP1.js";import{u as J,g as K}from"./useSupabaseRating-Reu7-0o5.js";import{V as Q}from"./VehicleCard-C7i0zyH_.js";import{C as X}from"./chevron-left-DYTWOdUa.js";import{C as Z}from"./chevron-right-Cz0pmc0N.js";const f=[{id:"all",name:"All Body Styles",icon:"",dbValue:""},{id:"suvs",name:"SUVs",icon:"https://hips.hearstapps.com/hmg-prod.s3.amazonaws.com/images/suv-1585158794.png?crop=1.00xw:0.502xh;0,0.260xh&resize=180:*",dbValue:"SUV"},{id:"sedans",name:"Sedans",icon:"https://hips.hearstapps.com/hmg-prod.s3.amazonaws.com/images/sedans-1585158794.png?crop=1.00xw:0.502xh;0,0.260xh&resize=180:*",dbValue:"Sedan"},{id:"trucks",name:"Trucks",icon:"https://hips.hearstapps.com/hmg-prod.s3.amazonaws.com/images/trucks-1585158794.png?crop=1.00xw:0.502xh;0,0.236xh&resize=180:*",dbValue:"Truck"},{id:"coupes",name:"Coupes",icon:"https://hips.hearstapps.com/hmg-prod.s3.amazonaws.com/images/sportscar-1585158794.png?crop=1.00xw:0.502xh;0,0.255xh&resize=180:*",dbValue:"Coupe"},{id:"convertibles",name:"Convertibles",icon:"https://hips.hearstapps.com/hmg-prod.s3.amazonaws.com/images/convertibles-1585158793.png?crop=1.00xw:0.502xh;0,0.258xh&resize=180:*",dbValue:"Convertible"},{id:"wagons",name:"Wagons",icon:"https://hips.hearstapps.com/hmg-prod.s3.amazonaws.com/images/wagons-1585158795.png?crop=1.00xw:0.502xh;0,0.244xh&resize=180:*",dbValue:"Wagon"},{id:"hatchbacks",name:"Hatchbacks",icon:"https://hips.hearstapps.com/hmg-prod.s3.amazonaws.com/images/crossovers-1585158793.png?crop=1.00xw:0.502xh;0,0.244xh&resize=180:*",dbValue:"Hatchback"}],ee=p=>{if(!p)return;const l=p.split("/");if(l.length!==2)return;const i=parseInt(l[0],10),n=parseInt(l[1],10);if(!(isNaN(i)||isNaN(n)))return Math.round(.55*i+.45*n)},se=(p,l,i,n)=>{const c=n.toLowerCase();return`Read our ${p} ${l} ${i} review for information on ratings, pricing, specs, and features, and see how this ${c} performed in our testing.`},te=({title:p,subtitle:l,bodyStyle:i,make:n,lifestyle:c,maxPrice:y,currentVehicleId:S,inventoryType:b="new",onShopUsed:N,onBodyStyleChange:C})=>{const r=u.useRef(null),[v,R]=u.useState(!1),[j,M]=u.useState(!0),[o,q]=u.useState("all"),D=e=>{q(e),C&&C(e==="all"?"":e)},W=()=>f.find(s=>s.id===o)?.name||"All Body Styles",{getRating:k}=J(),x=e=>k(e.id,K(e.bodyStyle),e.staffRating),V=f.find(e=>e.id===o),_=o!=="all"&&V?.dbValue?V.dbValue:i,g=u.useMemo(()=>{let e=A();return b==="used"?e=e.filter(s=>s.year==="2024"):e=e.filter(s=>parseInt(s.year)>=2025),_&&(e=e.filter(s=>s.bodyStyle.toLowerCase()===_.toLowerCase())),n&&(e=e.filter(s=>s.make.toLowerCase()===n.toLowerCase())),c&&(e=e.filter(s=>G(s).includes(c))),y&&(e=e.filter(s=>s.priceMin<=y)),e.sort((s,a)=>x(a)-x(s)),e.slice(0,10).map((s,a)=>{const d=x(s);let h;s.priceMin<25e3&&d>=8&&!s.editorsChoice&&(h="best-value");const $=H(s.make,s.model).map(m=>parseInt(m,10)).filter(m=>!isNaN(m)).sort((m,U)=>U-m),z=I(s.make,s.model);return{id:s.id,rank:a+1,name:`${s.make} ${s.model}`,price:`$${s.priceMin.toLocaleString()}`,image:s.image,rating:d,slug:s.slug,isCurrentVehicle:s.id===S,badge:h,editorsChoice:s.editorsChoice,tenBest:s.tenBest,epaMpg:ee(s.mpg),cdSays:se(s.year,s.make,s.model,s.bodyStyle),bodyStyle:s.bodyStyle,availableYears:$.length>0?$:void 0,yearDetails:z.length>0?z:void 0,modelName:s.model,vehicleYear:s.year}})},[_,n,c,y,S,b,k]),w=(()=>{const e=[];if(n&&e.push(n),c&&e.push(c),o!=="all"){const s=f.find(a=>a.id===o);e.push(s?.name||"Vehicles")}else i?e.push(i+"s"):e.push("Vehicles");return e.join(" ")})(),F=p||`10Best ${w}`,O=l||(g.length>0?`See the best ${w.toLowerCase()} ranked by our experts. Find your perfect match and start shopping today.`:"No vehicles match your current filters. Try adjusting your selection."),Y=()=>o!=="all"?`/rankings/${{suvs:"suv",sedans:"sedan",trucks:"truck",coupes:"coupe",convertibles:"convertible",wagons:"wagon",hatchbacks:"hatchback"}[o]||o}`:"/rankings",T=()=>{if(r.current){const{scrollLeft:e,scrollWidth:s,clientWidth:a}=r.current;R(e>0),M(e<s-a-10)}},L=e=>{if(r.current){const d=(r.current.querySelector(".top-ten__card")?.clientWidth||320)+24;r.current.scrollBy({left:e==="left"?-d:d,behavior:"smooth"}),setTimeout(T,350)}},E=(e,s)=>{e.preventDefault(),e.stopPropagation(),N&&N(s)},B=g.length>0;return t.jsx("section",{className:"top-ten",children:t.jsxs("div",{className:"container",children:[t.jsxs("div",{className:"top-ten__header",children:[t.jsxs("div",{className:"top-ten__header-content",children:[t.jsxs("div",{className:"top-ten__title-group",children:[t.jsx("img",{src:"https://www.caranddriver.com/_assets/design-tokens/caranddriver/static/images/badges-no-text/ten-best.bcb6ac1.svg",alt:"10Best",className:"top-ten__title-icon"}),t.jsx("h2",{className:"top-ten__title",children:F})]}),t.jsx("p",{className:"top-ten__subtitle",children:B?O:`No ${W().toLowerCase()} available for ${b==="new"?"2025+":"2024"}. Try selecting a different body style.`})]}),t.jsx("select",{className:"top-ten__select",value:o,onChange:e=>D(e.target.value),"aria-label":"Filter by body style",children:f.map(e=>t.jsx("option",{value:e.id,children:e.name},e.id))})]}),B?t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"top-ten__carousel-wrapper",children:[t.jsx("button",{className:`top-ten__nav top-ten__nav--left ${v?"":"top-ten__nav--disabled"}`,onClick:()=>L("left"),disabled:!v,"aria-label":"Previous vehicles",children:t.jsx(X,{size:24})}),t.jsxs("div",{className:"top-ten__carousel",ref:r,onScroll:T,children:[g.map(e=>{const s=e.vehicleYear==="2024",a=e.modelName?.toUpperCase()||"",d=a.length>10?s?"SHOP USED":"SHOP NEW":s?`SHOP USED ${a}`:`SHOP NEW ${a}`;return t.jsx(Q,{id:e.id,name:e.name,slug:e.slug,image:e.image,price:e.price,rating:e.rating,rank:e.rank,badge:e.badge,editorsChoice:e.editorsChoice,tenBest:e.tenBest,isCurrentVehicle:e.isCurrentVehicle,showShopButton:!0,showSaveButton:!0,shopButtonText:d,shopButtonVariant:"outline",onShopClick:h=>E(h,e),epaMpg:e.epaMpg,cdSays:e.cdSays,availableYears:e.availableYears,yearDetails:e.yearDetails,modelName:e.modelName},e.id)}),t.jsx(P,{to:Y(),className:"top-ten__card top-ten__card--view-all",children:t.jsxs("div",{className:"top-ten__view-all-content",children:[t.jsx("img",{src:"https://www.caranddriver.com/_assets/design-tokens/caranddriver/static/images/badges-no-text/ten-best.bcb6ac1.svg",alt:"10Best",className:"top-ten__view-all-icon"}),t.jsxs("h3",{className:"top-ten__view-all-title",children:["See All Top ",w]}),t.jsx("p",{className:"top-ten__view-all-text",children:"Explore our complete rankings with detailed reviews, specs, and pricing."}),t.jsx("span",{className:"top-ten__view-all-btn",children:"Full Rankings"})]})})]}),t.jsx("button",{className:`top-ten__nav top-ten__nav--right ${j?"":"top-ten__nav--disabled"}`,onClick:()=>L("right"),disabled:!j,"aria-label":"Next vehicles",children:t.jsx(Z,{size:24})})]}),t.jsxs("div",{className:"top-ten__progress",children:[t.jsx("div",{className:"top-ten__progress-track",children:t.jsx("div",{className:"top-ten__progress-fill",style:{width:r.current?`${Math.max(20,r.current.scrollLeft/(r.current.scrollWidth-r.current.clientWidth)*100)}%`:"20%"}})}),t.jsxs("span",{className:"top-ten__progress-text",children:["Showing ",Math.min(10,g.length)," of 10"]})]})]}):t.jsx("div",{className:"top-ten__empty-state",children:t.jsx("p",{className:"top-ten__empty-message",children:"Select a different body style to see available vehicles."})})]})})};te.__docgenInfo={description:"",methods:[],displayName:"TopTenCarouselLeads",props:{title:{required:!1,tsType:{name:"string"},description:""},subtitle:{required:!1,tsType:{name:"string"},description:""},bodyStyle:{required:!1,tsType:{name:"string"},description:""},make:{required:!1,tsType:{name:"string"},description:""},lifestyle:{required:!1,tsType:{name:"string"},description:""},maxPrice:{required:!1,tsType:{name:"number"},description:""},currentVehicleId:{required:!1,tsType:{name:"string"},description:""},inventoryType:{required:!1,tsType:{name:"union",raw:"'new' | 'used'",elements:[{name:"literal",value:"'new'"},{name:"literal",value:"'used'"}]},description:"",defaultValue:{value:"'new'",computed:!1}},onShopUsed:{required:!1,tsType:{name:"signature",type:"function",raw:"(vehicle: FilteredRankedVehicle) => void",signature:{arguments:[{type:{name:"FilteredRankedVehicle"},name:"vehicle"}],return:{name:"void"}}},description:""},onBodyStyleChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(bodyStyleId: string) => void",signature:{arguments:[{type:{name:"string"},name:"bodyStyleId"}],return:{name:"void"}}},description:""}}};export{te as T};
