import{j as t,u as mt,r,g as ft,R as L}from"./iframe-CwAjgNKQ.js";import{S as W}from"./star-jnPaGROO.js";import{f as ye,a as ue,b as pt,g as ht,s as gt}from"./dealerService-BDy6a8ul.js";import{c as Z}from"./createLucideIcon-DYlIWxwW.js";import{C as vt}from"./chevron-right-CbYJ_8Lo.js";import{M as ee}from"./map-pin-rrI5LSk_.js";import{P as me}from"./phone-DvOZ_5ou.js";import{N as te}from"./navigation-_BiW97NJ.js";import{D as _t}from"./dollar-sign-Cc7UjEuP.js";import{E as yt}from"./ExitIntentModal-DL8QTZW2.js";import{C as bt}from"./clock-DVUVR_vE.js";import{B as xt}from"./bookmark-JCAp0K5P.js";import{X as fe}from"./x-DKyyRwwq.js";import{r as pe}from"./index-BgHh2FB0.js";import{M as wt}from"./MakeOfferModal-CnBL5OA_.js";import{C as Ct}from"./chevron-down-faSqtHDV.js";const jt=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],H=Z("award",jt);const Nt=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],kt=Z("external-link",Nt);const St=[["path",{d:"M3 5h.01",key:"18ugdj"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 19h.01",key:"noohij"}],["path",{d:"M8 5h13",key:"1pao27"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 19h13",key:"m83p4d"}]],$e=Z("list",St);const Et=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],Ie=Z("loader-circle",Et);const Dt=[["path",{d:"M14.106 5.553a2 2 0 0 0 1.788 0l3.659-1.83A1 1 0 0 1 21 4.619v12.764a1 1 0 0 1-.553.894l-4.553 2.277a2 2 0 0 1-1.788 0l-4.212-2.106a2 2 0 0 0-1.788 0l-3.659 1.83A1 1 0 0 1 3 19.381V6.618a1 1 0 0 1 .553-.894l4.553-2.277a2 2 0 0 1 1.788 0z",key:"169xi5"}],["path",{d:"M15 5.764v15",key:"1pn4in"}],["path",{d:"M9 3.236v15",key:"1uimfh"}]],Mt=Z("map",Dt),he=({vehicle:e,variant:n="full",className:a=""})=>{const s=l=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",maximumFractionDigits:0}).format(l),o=`${e.year} ${e.make} ${e.model}`;return n==="compact"?t.jsx("div",{className:`vehicle-context vehicle-context--compact ${a}`,children:t.jsxs("div",{className:"vehicle-context__mini",children:[t.jsxs("span",{className:"vehicle-context__mini-name",children:[e.year," ",e.model]}),t.jsxs("div",{className:"vehicle-context__mini-specs",children:[t.jsx("span",{className:"vehicle-context__mini-spec",children:s(e.msrp)}),e.bodyStyle&&t.jsx("span",{className:"vehicle-context__mini-spec",children:e.bodyStyle}),e.mpg&&t.jsxs("span",{className:"vehicle-context__mini-spec",children:[e.mpg," MPG"]}),e.rating&&t.jsxs("span",{className:"vehicle-context__mini-spec",children:[t.jsx(W,{size:12,fill:"var(--color-gold)",stroke:"var(--color-gold)"}),e.rating]})]})]})}):t.jsxs("header",{className:`vehicle-context ${a}`,children:[t.jsxs("h1",{className:"vehicle-context__title",children:["Find Dealers for ",o]}),t.jsx("div",{className:"vehicle-context__content",children:t.jsxs("div",{className:"vehicle-context__details",children:[t.jsxs("div",{className:"vehicle-context__specs",children:[t.jsxs("span",{className:"vehicle-context__spec",children:[t.jsx("strong",{children:"MSRP"})," ",s(e.msrp)]}),e.bodyStyle&&t.jsx("span",{className:"vehicle-context__spec vehicle-context__spec--divider",children:e.bodyStyle}),e.mpg&&t.jsxs("span",{className:"vehicle-context__spec vehicle-context__spec--divider",children:[e.mpg," MPG"]}),e.rating&&t.jsxs("span",{className:"vehicle-context__spec vehicle-context__spec--divider vehicle-context__spec--rating",children:[t.jsx(W,{size:14,fill:"var(--color-gold)",stroke:"var(--color-gold)"}),e.rating," C/D Rating"]})]}),e.trim&&t.jsx("span",{className:"vehicle-context__trim",children:e.trim})]})})]})};he.__docgenInfo={description:"",methods:[],displayName:"VehicleContextHeader",props:{vehicle:{required:!0,tsType:{name:"VehicleInfo"},description:""},variant:{required:!1,tsType:{name:"union",raw:"'full' | 'compact'",elements:[{name:"literal",value:"'full'"},{name:"literal",value:"'compact'"}]},description:"",defaultValue:{value:"'full'",computed:!1}},className:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:"''",computed:!1}}}};const ge=({dealer:e,vehicleModel:n,index:a,isSelected:s=!1,isHovered:o=!1,variant:l="full",onSelect:i,onHover:c,onCallClick:f,onDirectionsClick:h,onMakeOfferClick:d})=>{const g=()=>{i?.(e)},v=_=>{_.stopPropagation(),f?.(e)},y=_=>{_.stopPropagation(),h?.(e)},m=_=>{_.stopPropagation(),d?.(e)},u=_=>t.jsxs("span",{className:"dealer-card__stars",children:[t.jsx(W,{size:14,fill:"var(--color-gold)",stroke:"var(--color-gold)"}),t.jsx("span",{children:_.toFixed(1)})]});return l==="compact"?t.jsxs("button",{className:`dealer-card dealer-card--compact ${s?"dealer-card--selected":""} ${o?"dealer-card--hovered":""}`,onClick:g,onMouseEnter:()=>c?.(e),onMouseLeave:()=>c?.(null),"aria-pressed":s,children:[a!==void 0&&t.jsx("span",{className:`dealer-card__number ${e.dealScore.isBestDeal?"dealer-card__number--best":""}`,children:a}),t.jsxs("div",{className:"dealer-card__info",children:[e.dealScore.isBestDeal&&t.jsxs("span",{className:"dealer-card__badge dealer-card__badge--best",children:[t.jsx(H,{size:12}),"Best Deal"]}),t.jsx("div",{className:"dealer-card__header",children:t.jsx("h3",{className:"dealer-card__name",children:e.name})}),t.jsxs("div",{className:"dealer-card__meta",children:[t.jsxs("span",{className:"dealer-card__inventory",children:[e.inventoryCount," in stock · ",ye(e.lowestPrice)]}),t.jsxs("span",{className:"dealer-card__rating-distance",children:[u(e.rating)," · ",ue(e.distance||0)]})]})]}),t.jsx(vt,{size:16,className:"dealer-card__chevron"})]}):t.jsxs("article",{className:`dealer-card ${s?"dealer-card--selected":""} ${o?"dealer-card--hovered":""} ${e.dealScore.isBestDeal?"dealer-card--best-deal":""}`,onClick:g,onMouseEnter:()=>c?.(e),onMouseLeave:()=>c?.(null),role:"button",tabIndex:0,"aria-pressed":s,onKeyDown:_=>{(_.key==="Enter"||_.key===" ")&&(_.preventDefault(),g())},children:[a!==void 0&&t.jsx("span",{className:`dealer-card__number ${e.dealScore.isBestDeal?"dealer-card__number--best":""}`,children:a}),e.dealScore.isBestDeal&&t.jsx("div",{className:"dealer-card__badge-row",children:t.jsxs("span",{className:"dealer-card__badge dealer-card__badge--best",children:[t.jsx(H,{size:14}),"Best Deal"]})}),t.jsxs("div",{className:"dealer-card__content",children:[t.jsx("div",{className:"dealer-card__header",children:t.jsx("h3",{className:"dealer-card__name",children:e.name})}),t.jsx("div",{className:"dealer-card__inventory-row",children:t.jsxs("span",{className:"dealer-card__inventory-count",children:[e.inventoryCount," ",n," in stock"]})}),t.jsx("div",{className:"dealer-card__price-row",children:t.jsx("span",{className:"dealer-card__price",children:pt(e.lowestPrice,e.highestPrice)})}),t.jsxs("div",{className:"dealer-card__meta-row",children:[t.jsxs("span",{className:"dealer-card__rating",children:[u(e.rating),t.jsxs("span",{className:"dealer-card__review-count",children:["(",e.reviewCount,")"]})]}),t.jsxs("span",{className:"dealer-card__distance",children:[t.jsx(ee,{size:14}),ue(e.distance||0)]})]}),t.jsxs("div",{className:"dealer-card__address",children:[t.jsx("span",{children:e.address}),t.jsxs("span",{children:[e.city,", ",e.state," ",e.zipCode]})]}),t.jsxs("div",{className:"dealer-card__actions",children:[t.jsxs("a",{href:`tel:${e.phone.replace(/[^0-9]/g,"")}`,className:"dealer-card__action dealer-card__action--call",onClick:v,"aria-label":`Call ${e.name}`,children:[t.jsx(me,{size:16}),t.jsx("span",{children:"Call"})]}),t.jsxs("a",{href:`https://www.google.com/maps/dir/?api=1&destination=${encodeURIComponent(`${e.address}, ${e.city}, ${e.state} ${e.zipCode}`)}`,target:"_blank",rel:"noopener noreferrer",className:"dealer-card__action dealer-card__action--directions",onClick:y,"aria-label":`Get directions to ${e.name}`,children:[t.jsx(te,{size:16}),t.jsx("span",{children:"Directions"})]}),d&&t.jsxs("button",{className:"dealer-card__action dealer-card__action--offer",onClick:m,"aria-label":`Make an offer at ${e.name}`,children:[t.jsx(_t,{size:16}),t.jsx("span",{children:"Make Offer"})]})]})]})]})};ge.__docgenInfo={description:"",methods:[],displayName:"DealerCard",props:{dealer:{required:!0,tsType:{name:"DealerWithScore"},description:""},vehicleModel:{required:!0,tsType:{name:"string"},description:""},index:{required:!1,tsType:{name:"number"},description:""},isSelected:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},isHovered:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},variant:{required:!1,tsType:{name:"union",raw:"'full' | 'compact'",elements:[{name:"literal",value:"'full'"},{name:"literal",value:"'compact'"}]},description:"",defaultValue:{value:"'full'",computed:!1}},onSelect:{required:!1,tsType:{name:"signature",type:"function",raw:"(dealer: DealerWithScore) => void",signature:{arguments:[{type:{name:"DealerWithScore"},name:"dealer"}],return:{name:"void"}}},description:""},onHover:{required:!1,tsType:{name:"signature",type:"function",raw:"(dealer: DealerWithScore | null) => void",signature:{arguments:[{type:{name:"union",raw:"DealerWithScore | null",elements:[{name:"DealerWithScore"},{name:"null"}]},name:"dealer"}],return:{name:"void"}}},description:""},onCallClick:{required:!1,tsType:{name:"signature",type:"function",raw:"(dealer: DealerWithScore) => void",signature:{arguments:[{type:{name:"DealerWithScore"},name:"dealer"}],return:{name:"void"}}},description:""},onDirectionsClick:{required:!1,tsType:{name:"signature",type:"function",raw:"(dealer: DealerWithScore) => void",signature:{arguments:[{type:{name:"DealerWithScore"},name:"dealer"}],return:{name:"void"}}},description:""},onMakeOfferClick:{required:!1,tsType:{name:"signature",type:"function",raw:"(dealer: DealerWithScore) => void",signature:{arguments:[{type:{name:"DealerWithScore"},name:"dealer"}],return:{name:"void"}}},description:""}}};const be=({dealer:e,vehicleModel:n,onMakeOffer:a})=>{const{user:s,isAuthenticated:o,addSavedVehicle:l,removeSavedVehicle:i}=mt(),[c,f]=r.useState(!1),[h,d]=r.useState(null),g=u=>{const _=`${u.year} ${u.make} ${u.model} ${u.trim}`;return s?.savedVehicles?.some(b=>b.name===_)||!1},v=u=>{if(!o){d(u),f(!0);return}const _=`${u.year} ${u.make} ${u.model} ${u.trim}`,b=`${u.year}-${u.make}-${u.model}-${u.trim}`.toLowerCase().replace(/\s+/g,"-");if(g(u)){const C=s?.savedVehicles?.find(x=>x.name===_);C&&i(C.id)}else l({id:b,name:_,ownership:"want"})},y=()=>{f(!1),d(null)},m=()=>{if(!e.hours)return"Hours not available";const _=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"][new Date().getDay()];return e.hours[_]||"Closed"};return t.jsxs(t.Fragment,{children:[t.jsxs("header",{className:"bottom-sheet__header",children:[e.dealScore.isBestDeal&&t.jsxs("span",{className:"bottom-sheet__badge",children:[t.jsx(H,{size:14}),"Best Deal"]}),t.jsx("h2",{className:"bottom-sheet__title",children:e.name}),t.jsxs("div",{className:"bottom-sheet__address-row",children:[t.jsxs("address",{className:"bottom-sheet__address",children:[e.address,t.jsx("br",{}),e.city,", ",e.state," ",e.zipCode]}),t.jsxs("div",{className:"bottom-sheet__quick-actions",children:[t.jsxs("a",{href:`https://www.google.com/maps/dir/?api=1&destination=${encodeURIComponent(`${e.address}, ${e.city}, ${e.state} ${e.zipCode}`)}`,target:"_blank",rel:"noopener noreferrer",className:"bottom-sheet__quick-badge bottom-sheet__quick-badge--directions","aria-label":"Get directions",children:[t.jsx(te,{size:12}),t.jsx("span",{children:"Directions"})]}),t.jsxs("a",{href:`tel:${e.phone.replace(/[^0-9]/g,"")}`,className:"bottom-sheet__quick-badge bottom-sheet__quick-badge--call","aria-label":"Call dealer",children:[t.jsx(me,{size:12}),t.jsx("span",{children:"Call"})]})]})]}),t.jsxs("div",{className:"bottom-sheet__rating",children:[t.jsx(W,{size:16,fill:"var(--color-gold)",stroke:"var(--color-gold)"}),t.jsx("span",{className:"bottom-sheet__rating-value",children:e.rating.toFixed(1)}),t.jsxs("span",{className:"bottom-sheet__rating-count",children:["(",e.reviewCount.toLocaleString()," reviews)"]})]})]}),t.jsxs("div",{className:"bottom-sheet__hours",children:[t.jsx(bt,{size:16}),t.jsxs("span",{children:["Today: ",m()]})]}),t.jsxs("section",{className:"bottom-sheet__inventory",children:[t.jsxs("h3",{className:"bottom-sheet__section-title",children:["Inventory for ",n]}),t.jsx("ul",{className:"bottom-sheet__inventory-list",children:e.inventory.map((u,_)=>{const b=g(u);return t.jsxs("li",{className:"bottom-sheet__inventory-item",children:[t.jsxs("div",{className:"bottom-sheet__inventory-row",children:[t.jsxs("div",{className:"bottom-sheet__inventory-details",children:[t.jsxs("span",{className:"bottom-sheet__inventory-trim",children:[u.isNew?"New":"Used"," ",u.year," ",u.make," ",u.model," ",u.trim]}),t.jsxs("span",{className:"bottom-sheet__inventory-meta",children:[u.exteriorColor,!u.isNew&&u.mileage&&t.jsxs(t.Fragment,{children:[" · ",u.mileage.toLocaleString()," mi"]})]})]}),t.jsx("span",{className:"bottom-sheet__inventory-price",children:ye(u.price)})]}),t.jsxs("div",{className:"bottom-sheet__inventory-actions",children:[t.jsx("button",{className:"bottom-sheet__inventory-offer",onClick:()=>a?.(e,u),children:"Make an Offer"}),t.jsx("button",{className:`bottom-sheet__inventory-save ${b?"bottom-sheet__inventory-save--saved":""}`,onClick:()=>v(u),"aria-label":b?"Remove from saved":"Save vehicle",title:b?"Remove from saved":"Save vehicle",children:t.jsx(xt,{size:16,fill:b?"currentColor":"none"})})]})]},_)})})]}),e.certifications&&e.certifications.length>0&&t.jsxs("section",{className:"bottom-sheet__certifications",children:[t.jsx("h3",{className:"bottom-sheet__section-title",children:"Certifications"}),t.jsx("ul",{className:"bottom-sheet__cert-list",children:e.certifications.map((u,_)=>t.jsx("li",{className:"bottom-sheet__cert",children:u},_))})]}),t.jsxs("div",{className:"bottom-sheet__actions",children:[t.jsxs("a",{href:`tel:${e.phone.replace(/[^0-9]/g,"")}`,className:"bottom-sheet__action bottom-sheet__action--primary",children:[t.jsx(me,{size:18}),t.jsx("span",{children:"Call Dealer"})]}),t.jsxs("a",{href:`https://www.google.com/maps/dir/?api=1&destination=${encodeURIComponent(`${e.address}, ${e.city}, ${e.state} ${e.zipCode}`)}`,target:"_blank",rel:"noopener noreferrer",className:"bottom-sheet__action bottom-sheet__action--secondary",children:[t.jsx(te,{size:18}),t.jsx("span",{children:"Get Directions"})]})]}),e.website&&t.jsxs("a",{href:e.website,target:"_blank",rel:"noopener noreferrer",className:"bottom-sheet__website",children:["Visit Dealer Website",t.jsx(kt,{size:14})]}),t.jsx(yt,{isOpen:c,onClose:y,vehicleName:h?`${h.year} ${h.make} ${h.model} ${h.trim}`:n,animationStyle:"elegant"})]})},qe=({dealer:e,vehicleModel:n,isOpen:a,onClose:s,onMakeOffer:o})=>{const l=r.useRef(null);return r.useEffect(()=>{const i=c=>{c.key==="Escape"&&a&&s()};return document.addEventListener("keydown",i),()=>document.removeEventListener("keydown",i)},[a,s]),r.useEffect(()=>(a?document.body.style.overflow="hidden":document.body.style.overflow="",()=>{document.body.style.overflow=""}),[a]),r.useEffect(()=>{a&&l.current&&l.current.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])')[0]?.focus()},[a]),a?t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"bottom-sheet__backdrop",onClick:s,"aria-hidden":"true"}),t.jsxs("div",{ref:l,className:"bottom-sheet",role:"dialog","aria-modal":"true","aria-labelledby":"dealer-sheet-title",children:[t.jsx("div",{className:"bottom-sheet__handle"}),t.jsx("button",{className:"bottom-sheet__close",onClick:s,"aria-label":"Close dealer details",children:t.jsx(fe,{size:20})}),t.jsx("div",{className:"bottom-sheet__content",children:t.jsx(be,{dealer:e,vehicleModel:n,onMakeOffer:o})})]})]}):null};be.__docgenInfo={description:"",methods:[],displayName:"DealerDetailContent",props:{dealer:{required:!0,tsType:{name:"DealerWithScore"},description:""},vehicleModel:{required:!0,tsType:{name:"string"},description:""},onMakeOffer:{required:!1,tsType:{name:"signature",type:"function",raw:"(dealer: DealerWithScore, vehicle: VehicleInventoryItem) => void",signature:{arguments:[{type:{name:"DealerWithScore"},name:"dealer"},{type:{name:"VehicleInventoryItem"},name:"vehicle"}],return:{name:"void"}}},description:""}}};qe.__docgenInfo={description:"",methods:[],displayName:"DealerBottomSheet",props:{dealer:{required:!0,tsType:{name:"DealerWithScore"},description:""},vehicleModel:{required:!0,tsType:{name:"string"},description:""},isOpen:{required:!0,tsType:{name:"boolean"},description:""},onClose:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},onMakeOffer:{required:!1,tsType:{name:"signature",type:"function",raw:"(dealer: DealerWithScore, vehicle: VehicleInventoryItem) => void",signature:{arguments:[{type:{name:"DealerWithScore"},name:"dealer"},{type:{name:"VehicleInventoryItem"},name:"vehicle"}],return:{name:"void"}}},description:""}}};var de,Le;function It(){return Le||(Le=1,de=function e(n,a){if(n===a)return!0;if(n&&a&&typeof n=="object"&&typeof a=="object"){if(n.constructor!==a.constructor)return!1;var s,o,l;if(Array.isArray(n)){if(s=n.length,s!=a.length)return!1;for(o=s;o--!==0;)if(!e(n[o],a[o]))return!1;return!0}if(n.constructor===RegExp)return n.source===a.source&&n.flags===a.flags;if(n.valueOf!==Object.prototype.valueOf)return n.valueOf()===a.valueOf();if(n.toString!==Object.prototype.toString)return n.toString()===a.toString();if(l=Object.keys(n),s=l.length,s!==Object.keys(a).length)return!1;for(o=s;o--!==0;)if(!Object.prototype.hasOwnProperty.call(a,l[o]))return!1;for(o=s;o--!==0;){var i=l[o];if(!e(n[i],a[i]))return!1}return!0}return n!==n&&a!==a}),de}var Lt=It();const Fe=ft(Lt),Ot="1.7.1";function R(e,n){var a={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&n.indexOf(s)<0&&(a[s]=e[s]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,s=Object.getOwnPropertySymbols(e);o<s.length;o++)n.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(e,s[o])&&(a[s[o]]=e[s[o]]);return a}function ve(e,n,a,s){function o(l){return l instanceof a?l:new a(function(i){i(l)})}return new(a||(a=Promise))(function(l,i){function c(d){try{h(s.next(d))}catch(g){i(g)}}function f(d){try{h(s.throw(d))}catch(g){i(g)}}function h(d){d.done?l(d.value):o(d.value).then(c,f)}h((s=s.apply(e,[])).next())})}const $={NOT_LOADED:"NOT_LOADED",LOADING:"LOADING",LOADED:"LOADED",FAILED:"FAILED",AUTH_FAILURE:"AUTH_FAILURE"},Tt="https://maps.googleapis.com/maps/api/js";class ne{static load(n,a){return ve(this,void 0,void 0,function*(){var s,o;const l=n.libraries?n.libraries.split(","):[],i=this.serializeParams(n);this.listeners.push(a),!((o=(s=window.google)===null||s===void 0?void 0:s.maps)===null||o===void 0)&&o.importLibrary?(this.serializedApiParams||(this.loadingStatus=$.LOADED),this.notifyLoadingStatusListeners()):(this.serializedApiParams=i,this.initImportLibrary(n)),this.serializedApiParams&&this.serializedApiParams!==i&&console.warn("[google-maps-api-loader] The maps API has already been loaded with different parameters and will not be loaded again. Refresh the page for new values to have effect.");const c=["maps",...l];yield Promise.all(c.map(f=>google.maps.importLibrary(f)))})}static serializeParams(n){return[n.v,n.key,n.language,n.region,n.authReferrerPolicy,n.solutionChannel].join("/")}static initImportLibrary(n){if(window.google||(window.google={}),window.google.maps||(window.google.maps={}),window.google.maps.importLibrary){console.error("[google-maps-api-loader-internal]: initImportLibrary must only be called once");return}let a=null;const s=()=>a||(a=new Promise((o,l)=>{var i;const c=document.createElement("script"),f=new URLSearchParams;for(const[h,d]of Object.entries(n)){const g=h.replace(/[A-Z]/g,v=>"_"+v[0].toLowerCase());f.set(g,String(d))}f.set("loading","async"),f.set("callback","__googleMapsCallback__"),c.async=!0,c.src=Tt+"?"+f.toString(),c.nonce=((i=document.querySelector("script[nonce]"))===null||i===void 0?void 0:i.nonce)||"",c.onerror=()=>{this.loadingStatus=$.FAILED,this.notifyLoadingStatusListeners(),l(new Error("The Google Maps JavaScript API could not load."))},window.__googleMapsCallback__=()=>{this.loadingStatus=$.LOADED,this.notifyLoadingStatusListeners(),o()},window.gm_authFailure=()=>{this.loadingStatus=$.AUTH_FAILURE,this.notifyLoadingStatusListeners()},this.loadingStatus=$.LOADING,this.notifyLoadingStatusListeners(),document.head.append(c)}),a);google.maps.importLibrary=o=>s().then(()=>google.maps.importLibrary(o))}static notifyLoadingStatusListeners(){for(const n of this.listeners)n(this.loadingStatus)}}ne.loadingStatus=$.NOT_LOADED;ne.listeners=[];const At="GMP_visgl_rgmlibrary_v1_default",Pt=[`gmp_visgl_reactgooglemaps_v${Ot}`],K=L.createContext(null);function zt(){const[e,n]=r.useState({});return{mapInstances:e,addMapInstance:(l,i="default")=>{n(c=>Object.assign(Object.assign({},c),{[i]:l}))},removeMapInstance:(l="default")=>{n(i=>{var c=l;i[c];var f=R(i,[typeof c=="symbol"?c:c+""]);return f})},clearMapInstances:()=>{n({})}}}function $t(e){const{onLoad:n,onError:a,apiKey:s,version:o,libraries:l=[]}=e,i=R(e,["onLoad","onError","apiKey","version","libraries"]),[c,f]=r.useState(ne.loadingStatus),[h,d]=r.useReducer((m,u)=>m[u.name]?m:Object.assign(Object.assign({},m),{[u.name]:u.value}),{}),g=r.useMemo(()=>l?.join(","),[l]),v=r.useMemo(()=>JSON.stringify(Object.assign({apiKey:s,version:o},i)),[s,o,i]),y=r.useCallback(m=>ve(this,void 0,void 0,function*(){var u;if(h[m])return h[m];if(!(!((u=google==null?void 0:google.maps)===null||u===void 0)&&u.importLibrary))throw new Error("[api-provider-internal] importLibrary was called before google.maps.importLibrary was defined.");const _=yield window.google.maps.importLibrary(m);return d({name:m,value:_}),_}),[h]);return r.useEffect(()=>{ve(this,void 0,void 0,function*(){try{const m=Object.assign({key:s},i);o&&(m.v=o),g?.length>0&&(m.libraries=g),(m.channel===void 0||m.channel<0||m.channel>999)&&delete m.channel,m.solutionChannel===void 0?m.solutionChannel=At:m.solutionChannel===""&&delete m.solutionChannel,yield ne.load(m,u=>f(u));for(const u of["core","maps",...l])yield y(u);n&&n()}catch(m){a?a(m):console.error("<ApiProvider> failed to load the Google Maps JavaScript API",m)}})},[s,g,v]),{status:c,loadedLibraries:h,importLibrary:y}}function qt(e){return r.useMemo(()=>e.disableUsageAttribution?null:Pt,[e.disableUsageAttribution])}const Ft=e=>{const{children:n}=e,a=R(e,["children"]),{mapInstances:s,addMapInstance:o,removeMapInstance:l,clearMapInstances:i}=zt(),{status:c,loadedLibraries:f,importLibrary:h}=$t(a),d=qt(a),g=r.useMemo(()=>({mapInstances:s,addMapInstance:o,removeMapInstance:l,clearMapInstances:i,status:c,loadedLibraries:f,importLibrary:h,internalUsageAttributionIds:d}),[s,o,l,i,c,f,h,d]);return L.createElement(K.Provider,{value:g},n)};function Rt(e,n){for(const a of Gt){const s=n[a],o=Re[a];r.useEffect(()=>{if(!e||!s)return;const l=google.maps.event.addListener(e,o,i=>{s(Bt(o,e,i))});return()=>l.remove()},[e,o,s])}}function Bt(e,n,a){var s;const o={type:e,map:n,detail:{},stoppable:!1,stop:()=>{}};if(Ut.includes(e)){const l=o,i=n.getCenter(),c=n.getZoom(),f=n.getHeading()||0,h=n.getTilt()||0,d=n.getBounds();return(!i||!d||!Number.isFinite(c))&&console.warn("[createEvent] at least one of the values from the map returned undefined. This is not expected to happen. Please report an issue at https://github.com/visgl/react-google-maps/issues/new"),l.detail={center:i?.toJSON()||{lat:0,lng:0},zoom:c||0,heading:f,tilt:h,bounds:d?.toJSON()||{north:90,east:180,south:-90,west:-180}},l}else if(Vt.includes(e)){if(!a)throw new Error("[createEvent] mouse events must provide a srcEvent");const l=o;return l.domEvent=a.domEvent,l.stoppable=!0,l.stop=()=>a.stop(),l.detail={latLng:((s=a.latLng)===null||s===void 0?void 0:s.toJSON())||null,placeId:a.placeId},l}return o}const Re={onBoundsChanged:"bounds_changed",onCenterChanged:"center_changed",onClick:"click",onContextmenu:"contextmenu",onDblclick:"dblclick",onDrag:"drag",onDragend:"dragend",onDragstart:"dragstart",onHeadingChanged:"heading_changed",onIdle:"idle",onIsFractionalZoomEnabledChanged:"isfractionalzoomenabled_changed",onMapCapabilitiesChanged:"mapcapabilities_changed",onMapTypeIdChanged:"maptypeid_changed",onMousemove:"mousemove",onMouseout:"mouseout",onMouseover:"mouseover",onProjectionChanged:"projection_changed",onRenderingTypeChanged:"renderingtype_changed",onTilesLoaded:"tilesloaded",onTiltChanged:"tilt_changed",onZoomChanged:"zoom_changed",onCameraChanged:"bounds_changed"},Ut=["bounds_changed","center_changed","heading_changed","tilt_changed","zoom_changed"],Vt=["click","contextmenu","dblclick","mousemove","mouseout","mouseover"],Gt=Object.keys(Re);function Wt(e){const n=r.useRef(void 0);return r.useEffect(()=>{n.current=e}),n.current}function Be(e,n){const a=Wt(e);return r.useMemo(()=>a&&n(a,e)?a:e,[e,a,n])}function Ht(e,n,a){r.useEffect(e,[Be(n,a)])}function Zt(e,n){Ht(e,n,Fe)}const Kt=new Set(["backgroundColor","clickableIcons","controlSize","disableDefaultUI","disableDoubleClickZoom","draggable","draggableCursor","draggingCursor","fullscreenControl","fullscreenControlOptions","gestureHandling","headingInteractionEnabled","isFractionalZoomEnabled","keyboardShortcuts","mapTypeControl","mapTypeControlOptions","mapTypeId","maxZoom","minZoom","noClear","panControl","panControlOptions","restriction","rotateControl","rotateControlOptions","scaleControl","scaleControlOptions","scrollwheel","streetView","streetViewControl","streetViewControlOptions","styles","tiltInteractionEnabled","zoomControl","zoomControlOptions"]);function Jt(e,n){const a={},s=Object.keys(n);for(const o of s)Kt.has(o)&&(a[o]=n[o]);Zt(()=>{e&&e.setOptions(a)},[a])}function Ue(){var e;return((e=r.useContext(K))===null||e===void 0?void 0:e.status)||$.NOT_LOADED}function Yt(e,n){const{viewport:a,viewState:s}=n,o=!!a;return r.useLayoutEffect(()=>{if(!e||!s)return;const{latitude:l,longitude:i,bearing:c,pitch:f,zoom:h}=s;e.moveCamera({center:{lat:l,lng:i},heading:c,tilt:f,zoom:h+1})},[e,s]),o}function Xt(e){return!e||typeof e!="object"||!("lat"in e&&"lng"in e)?!1:Number.isFinite(e.lat)&&Number.isFinite(e.lng)}function Ve(e){return Xt(e)?e:e.toJSON()}function Qt(e,n,a){const s=a.center?Ve(a.center):null;let o=null,l=null;s&&Number.isFinite(s.lat)&&Number.isFinite(s.lng)&&(o=s.lat,l=s.lng);const i=Number.isFinite(a.zoom)?a.zoom:null,c=Number.isFinite(a.heading)?a.heading:null,f=Number.isFinite(a.tilt)?a.tilt:null;r.useLayoutEffect(()=>{if(!e)return;const h={};let d=!1;o!==null&&l!==null&&(n.current.center.lat!==o||n.current.center.lng!==l)&&(h.center={lat:o,lng:l},d=!0),i!==null&&n.current.zoom!==i&&(h.zoom=i,d=!0),c!==null&&n.current.heading!==c&&(h.heading=c,d=!0),f!==null&&n.current.tilt!==f&&(h.tilt=f,d=!0),d&&e.moveCamera(h)})}const en=()=>{const e={position:"absolute",top:0,left:0,bottom:0,right:0,zIndex:999,display:"flex",flexFlow:"column nowrap",textAlign:"center",justifyContent:"center",fontSize:".8rem",color:"rgba(0,0,0,0.6)",background:"#dddddd",padding:"1rem 1.5rem"};return L.createElement("div",{style:e},L.createElement("h2",null,"Error: AuthFailure"),L.createElement("p",null,"A problem with your API key prevents the map from rendering correctly. Please make sure the value of the ",L.createElement("code",null,"APIProvider.apiKey")," prop is correct. Check the error-message in the console for further details."))};function tn(){const[e,n]=r.useState(null),a=r.useCallback(s=>n(s),[n]);return[e,a]}function Ge(){return Ue()===$.LOADED}function nn(){const[,e]=r.useReducer(n=>n+1,0);return e}function an(e,n){const a=e.getCenter(),s=e.getZoom(),o=e.getHeading()||0,l=e.getTilt()||0,i=e.getBounds();(!a||!i||!Number.isFinite(s))&&console.warn("[useTrackedCameraState] at least one of the values from the map returned undefined. This is not expected to happen. Please report an issue at https://github.com/visgl/react-google-maps/issues/new"),Object.assign(n.current,{center:a?.toJSON()||{lat:0,lng:0},zoom:s||0,heading:o,tilt:l})}function sn(e){const n=nn(),a=r.useRef({center:{lat:0,lng:0},heading:0,tilt:0,zoom:0});return r.useEffect(()=>{if(!e)return;const s=google.maps.event.addListener(e,"bounds_changed",()=>{an(e,a),n()});return()=>s.remove()},[e,n]),a}class Q{static has(n){return this.entries[n]&&this.entries[n].length>0}static pop(n){return this.entries[n]&&this.entries[n].pop()||null}static push(n,a){this.entries[n]||(this.entries[n]=[]),this.entries[n].push(a)}}Q.entries={};function on(e,n){const a=Ge(),[s,o]=r.useState(null),[l,i]=tn(),c=sn(s),{id:f,defaultBounds:h,defaultCenter:d,defaultZoom:g,defaultHeading:v,defaultTilt:y,reuseMaps:m,renderingType:u,colorScheme:_}=e,b=R(e,["id","defaultBounds","defaultCenter","defaultZoom","defaultHeading","defaultTilt","reuseMaps","renderingType","colorScheme"]),C=e.zoom!==void 0||e.defaultZoom!==void 0,x=e.center!==void 0||e.defaultCenter!==void 0;!h&&(!C||!x)&&console.warn("<Map> component is missing configuration. You have to provide zoom and center (via the `zoom`/`defaultZoom` and `center`/`defaultCenter` props) or specify the region to show using `defaultBounds`. See https://visgl.github.io/react-google-maps/docs/api-reference/components/map#required"),!b.center&&d&&(b.center=d),!b.zoom&&Number.isFinite(g)&&(b.zoom=g),!b.heading&&Number.isFinite(v)&&(b.heading=v),!b.tilt&&Number.isFinite(y)&&(b.tilt=y);const j=b.internalUsageAttributionIds;j==null?b.internalUsageAttributionIds=n.internalUsageAttributionIds:b.internalUsageAttributionIds=[...n.internalUsageAttributionIds||[],...j];for(const S of Object.keys(b))b[S]===void 0&&delete b[S];const k=r.useRef(void 0);return r.useEffect(()=>{if(!l||!a)return;const{addMapInstance:S,removeMapInstance:E}=n,{mapId:I}=e,N=`${I||"default"}:${u||"default"}:${_||"LIGHT"}`;let M,D;if(m&&Q.has(N)?(D=Q.pop(N),M=D.getDiv(),l.appendChild(M),D.setOptions(b),setTimeout(()=>D.setCenter(D.getCenter()),0)):(M=document.createElement("div"),M.style.height="100%",l.appendChild(M),D=new google.maps.Map(M,Object.assign(Object.assign(Object.assign({},b),u?{renderingType:u}:{}),_?{colorScheme:_}:{}))),o(D),S(D,f),h){const{padding:T}=h,A=R(h,["padding"]);D.fitBounds(A,T)}else(!C||!x)&&D.fitBounds({east:180,west:-180,south:-90,north:90});if(k.current){const{mapId:T,cameraState:A}=k.current;T!==I&&D.setOptions(A)}return()=>{k.current={mapId:I,cameraState:c.current},M.remove(),m?Q.push(N,D):google.maps.event.clearInstanceListeners(D),o(null),E(f)}},[l,a,f,e.mapId,e.renderingType,e.colorScheme]),[s,i,c]}const We=L.createContext(null),He=e=>{const{children:n,id:a,className:s,style:o}=e,l=r.useContext(K),i=Ue();if(!l)throw new Error("<Map> can only be used inside an <ApiProvider> component.");const[c,f,h]=on(e,l);Qt(c,h,e),Rt(c,e),Jt(c,e);const d=Yt(c,e),g=!!e.controlled;r.useEffect(()=>{if(c)return d&&c.setOptions({disableDefaultUI:!0}),(d||g)&&c.setOptions({gestureHandling:"none",keyboardShortcuts:!1}),()=>{c.setOptions({gestureHandling:e.gestureHandling,keyboardShortcuts:e.keyboardShortcuts})}},[c,d,g,e.gestureHandling,e.keyboardShortcuts]);const v=e.center?Ve(e.center):null;let y=null,m=null;v&&Number.isFinite(v.lat)&&Number.isFinite(v.lng)&&(y=v.lat,m=v.lng);const u=r.useMemo(()=>{var C,x,j;return{center:{lat:y??0,lng:m??0},zoom:(C=e.zoom)!==null&&C!==void 0?C:0,heading:(x=e.heading)!==null&&x!==void 0?x:0,tilt:(j=e.tilt)!==null&&j!==void 0?j:0}},[y,m,e.zoom,e.heading,e.tilt]);r.useLayoutEffect(()=>{if(!c||!g)return;c.moveCamera(u);const C=c.addListener("bounds_changed",()=>{c.moveCamera(u)});return()=>C.remove()},[c,g,u]);const _=r.useMemo(()=>Object.assign({width:"100%",height:"100%",position:"relative",zIndex:d?-1:0},o),[o,d]),b=r.useMemo(()=>({map:c}),[c]);return i===$.AUTH_FAILURE?L.createElement("div",{style:Object.assign({position:"relative"},s?{}:_),className:s},L.createElement(en,null)):L.createElement("div",Object.assign({ref:f,"data-testid":"map",style:s?void 0:_,className:s},a?{id:a}:{}),c?L.createElement(We.Provider,{value:b},n):null)};He.deckGLViewProps=!0;const Oe=new Set;function rn(...e){const n=JSON.stringify(e);Oe.has(n)||(Oe.add(n),console.error(...e))}const ae=(e=null)=>{const n=r.useContext(K),{map:a}=r.useContext(We)||{};if(n===null)return rn("useMap(): failed to retrieve APIProviderContext. Make sure that the <APIProvider> component exists and that the component you are calling `useMap()` from is a sibling of the <APIProvider>."),null;const{mapInstances:s}=n;return e!==null?s[e]||null:a||s.default||null};function Ze(e){const n=Ge(),a=r.useContext(K);return r.useEffect(()=>{!n||!a||a.importLibrary(e)},[n,a,e]),a?.loadedLibraries[e]||null}function U(e,n,a){r.useEffect(()=>{if(!e||!n||!a)return;const s=google.maps.event.addListener(e,n,a);return()=>s.remove()},[e,n,a])}function X(e,n,a){r.useEffect(()=>{e&&(e[n]=a)},[e,n,a])}function Te(e,n,a){r.useEffect(()=>{if(!(!e||!n||!a))return e.addEventListener(n,a),()=>e.removeEventListener(n,a)},[e,n,a])}class ln{constructor(){this.renderedStyles=new Set,this.styleElement=null}getStyleElement(){return this.styleElement||(this.styleElement=document.createElement("style"),this.styleElement.setAttribute("data-rgm-anchor-styles",""),document.head.appendChild(this.styleElement)),this.styleElement}addAdvancedMarkerPointerEventsOverwrite(){if(this.renderedStyles.has("marker-pointer-events"))return;const n=this.getStyleElement();n.textContent+=`
      gmp-advanced-marker[data-origin='rgm'] {
        pointer-events: none !important;
      }
    `,this.renderedStyles.add("marker-pointer-events")}cleanup(){this.styleElement&&(this.styleElement.remove(),this.styleElement=null,this.renderedStyles.clear())}}const cn=new ln;function dn(e,n){var a;if(!(!((a=google==null?void 0:google.maps)===null||a===void 0)&&a.version))return;const s=google.maps.version.split("."),o=parseInt(s[0],10),l=parseInt(s[1],10);return o>e||o===e&&l>=n}const un=L.createContext(null),mn={BOTTOM:["50%","100%"]},Ke=r.forwardRef((e,n)=>{const{children:a,style:s,className:o,anchorPoint:l}=e,[i,c]=gn(e),f=r.useMemo(()=>i?{marker:i}:null,[i]);return r.useImperativeHandle(n,()=>i,[i]),c?L.createElement(un.Provider,{value:f},pe.createPortal(L.createElement(hn,{anchorPoint:l,styles:s,className:o},a),c)):null});Ke.displayName="AdvancedMarker";function fn(){const[e,n]=r.useState(null);return[r.useCallback(s=>{n(s)},[]),e]}function pn(e){return e.content!==void 0}function _e(e){return e.nodeType===Node.ELEMENT_NODE}const hn=({children:e,styles:n,className:a})=>L.createElement("div",{className:a,style:n},e);function gn(e){const[n,a]=r.useState(null),[s,o]=r.useState(null),l=ae(),i=Ze("marker"),{children:c,onClick:f,className:h,onMouseEnter:d,onMouseLeave:g,onDrag:v,onDragStart:y,onDragEnd:m,collisionBehavior:u,clickable:_,draggable:b,position:C,title:x,zIndex:j,anchorPoint:k,anchorLeft:S,anchorTop:E}=e,I=r.Children.count(c);return r.useEffect(()=>{if(!l||!i)return;const N=new i.AdvancedMarkerElement;N.map=l,a(N);let M=null;return I>0&&(M=document.createElement("div"),N.content=M,o(M)),()=>{N.map=null,M?.remove(),a(null),o(null)}},[l,i,I]),r.useEffect(()=>{!n?.content||!_e(n.content)||I>0||(n.content.className=h??"")},[n,h,I]),vn(n,k,S,E,I>0),X(n,"position",C),X(n,"title",x??""),X(n,"zIndex",j),X(n,"collisionBehavior",u),r.useEffect(()=>{n&&(b!==void 0?n.gmpDraggable=b:v||y||m?n.gmpDraggable=!0:n.gmpDraggable=!1)},[n,b,v,m,y]),r.useEffect(()=>{if(!n)return;const N=_!==void 0||!!f||!!d||!!g;n.gmpClickable=N,N&&n?.content&&_e(n.content)&&(n.content.style.pointerEvents="all",f&&(n.content.style.cursor="pointer"))},[n,_,f,d,g]),U(n,"click",f),U(n,"drag",v),U(n,"dragstart",y),U(n,"dragend",m),Te(n?.element,"mouseenter",d),Te(n?.element,"mouseleave",g),[n,s]}function vn(e,n,a,s,o){r.useEffect(()=>{if(!e||!o)return;const l=dn(3,62),i=e.content;if(!(!i||!_e(i))){if(a!==void 0||s!==void 0){l||console.warn(`AdvancedMarker: The anchorLeft and anchorTop props are only supported in Google Maps API version 3.62 and above. The current version is ${google.maps.version}.`),e.anchorLeft=a,e.anchorTop=s,n!==void 0&&console.warn("AdvancedMarker: the anchorPoint prop is ignored when anchorLeft and/or anchorTop are set.");return}if(n!==void 0){const[c,f]=n??mn.BOTTOM,h=`calc(-1 * ${c})`,d=`calc(-1 * ${f})`;l?(e.anchorLeft=h,e.anchorTop=d,i.style.transform=""):(i.style.transform=`translate(50%, 100%) translate(${h}, ${d})`,e.dataset.origin="rgm",cn.addAdvancedMarkerPointerEventsOverwrite())}}},[e,n,a,s,o])}function _n(e,n,a){if(n!=null&&typeof n!="object")throw new Error("The `style` prop expects a mapping from style properties to values, not a string. For example, style={{marginRight: spacing + 'em'}} when using JSX.");const s=e.style;if(a==null){if(n==null)return;for(const o in n)n.hasOwnProperty(o)&&Ae(s,o,n[o]);return}for(const o in a)a.hasOwnProperty(o)&&(n==null||!n.hasOwnProperty(o))&&(o.indexOf("--")===0?s.setProperty(o,""):o==="float"?s.cssFloat="":s[o]="");if(n!=null)for(const o in n){const l=n[o];n.hasOwnProperty(o)&&a[o]!==l&&Ae(s,o,l)}}function Ae(e,n,a){const s=n.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?s?e.setProperty(n,""):n==="float"?e.cssFloat="":e[n]="":s?e.setProperty(n,a):typeof a=="number"&&a!==0&&!bn(n)?e[n]=a+"px":n==="float"?e.cssFloat=a:e[n]=(""+a).trim()}const yn=new Set(["animationIterationCount","aspectRatio","borderImageOutset","borderImageSlice","borderImageWidth","boxFlex","boxFlexGroup","boxOrdinalGroup","columnCount","columns","flex","flexGrow","flexPositive","flexShrink","flexNegative","flexOrder","gridArea","gridRow","gridRowEnd","gridRowSpan","gridRowStart","gridColumn","gridColumnEnd","gridColumnSpan","gridColumnStart","fontWeight","lineClamp","lineHeight","opacity","order","orphans","scale","tabSize","widows","zIndex","zoom","fillOpacity","floodOpacity","stopOpacity","strokeDasharray","strokeDashoffset","strokeMiterlimit","strokeOpacity","strokeWidth"]);function bn(e){return yn.has(e)}const xn=e=>{const{children:n,headerContent:a,style:s,className:o,pixelOffset:l,anchor:i,shouldFocus:c,onClose:f,onCloseClick:h}=e,d=R(e,["children","headerContent","style","className","pixelOffset","anchor","shouldFocus","onClose","onCloseClick"]),g=Ze("maps"),[v,y]=r.useState(null),m=r.useRef(null),u=r.useRef(null),_=Be(d,Fe);r.useEffect(()=>{if(!g)return;m.current=document.createElement("div"),u.current=document.createElement("div");const x=_;l&&(x.pixelOffset=new google.maps.Size(l[0],l[1])),a&&(x.headerContent=typeof a=="string"?a:u.current);const j=new google.maps.InfoWindow(_);return j.setContent(m.current),y(j),()=>{var k,S;j.setContent(null),(k=m.current)===null||k===void 0||k.remove(),(S=u.current)===null||S===void 0||S.remove(),m.current=null,u.current=null,y(null)}},[g]);const b=r.useRef(null);r.useEffect(()=>{!v||!m.current||(_n(m.current,s||null,b.current),b.current=s||null,o!==m.current.className&&(m.current.className=o||""))},[v,o,s]),r.useEffect(()=>{if(!v)return;const x=_;l?x.pixelOffset=new google.maps.Size(l[0],l[1]):x.pixelOffset=null,a?x.headerContent=typeof a=="string"?a:u.current:x.headerContent=null,v.setOptions(_)},[_,l,a]),U(v,"close",f),U(v,"closeclick",h);const C=ae();return r.useEffect(()=>{var x;if(!C||!v||i===null)return;const j=!!i,k={map:C};if(i&&(k.anchor=i,pn(i)&&i.content instanceof Element)){const S=i?.getBoundingClientRect();if(S&&i.dataset.origin==="rgm"){const E=(x=i.content.firstElementChild)===null||x===void 0?void 0:x.firstElementChild,I=E?.getBoundingClientRect(),N=I.x-S.x+(I.width-S.width)/2,M=I.y-S.y,D=_;D.pixelOffset=new google.maps.Size(l?l[0]+N:N,l?l[1]+M:M),v.setOptions(D)}}return c!==void 0&&(k.shouldFocus=c),v.open(k),()=>{j&&v.set("anchor",null),v.close()}},[v,i,C,c,_,l]),L.createElement(L.Fragment,null,m.current&&pe.createPortal(n,m.current),u.current!==null&&pe.createPortal(a,u.current))};function wn(e){const[n,a]=r.useState(null),s=ae(),{onClick:o,onDrag:l,onDragStart:i,onDragEnd:c,onMouseOver:f,onMouseOut:h}=e,d=R(e,["onClick","onDrag","onDragStart","onDragEnd","onMouseOver","onMouseOut"]),{position:g,draggable:v}=d;return r.useEffect(()=>{if(!s){s===void 0&&console.error("<Marker> has to be inside a Map component.");return}const y=new google.maps.Marker(d);return y.setMap(s),a(y),()=>{y.setMap(null),a(null)}},[s]),r.useEffect(()=>{if(!n)return;const y=n,m=google.maps.event;return o&&m.addListener(y,"click",o),l&&m.addListener(y,"drag",l),i&&m.addListener(y,"dragstart",i),c&&m.addListener(y,"dragend",c),f&&m.addListener(y,"mouseover",f),h&&m.addListener(y,"mouseout",h),n.setDraggable(!!v),()=>{m.clearInstanceListeners(y)}},[n,v,o,l,i,c,f,h]),r.useEffect(()=>{n&&d&&n.setOptions(d)},[n,d]),r.useEffect(()=>{v||!g||!n||n.setPosition(g)},[v,g,n]),n}const Cn=r.forwardRef((e,n)=>{const a=wn(e);return r.useImperativeHandle(n,()=>a,[a]),L.createElement(L.Fragment,null)});Cn.displayName="Marker";const Je=({dealer:e,index:n,isSelected:a=!1,isHovered:s=!1,onClick:o,onHover:l,vehicleImage:i,vehicleName:c})=>{const[f,h]=fn(),[d,g]=r.useState(!1),v=r.useCallback(()=>{o?.(),g(!0)},[o]),y=r.useCallback(()=>{g(!1)},[]),m=r.useCallback(()=>{l?.(e),g(!0)},[e,l]),u=r.useCallback(()=>{l?.(null),g(!1)},[l]),b=e.dealScore.isBestDeal?{background:"var(--color-gold, #DBCA8B)",borderColor:"var(--color-gold-dark, #A59143)",scale:a||s?1.3:1.1}:a||s?{background:"var(--color-blue-cobalt, #1B5F8A)",borderColor:"var(--color-blue-cobalt-dark, #154d70)",scale:1.3}:{background:"var(--color-blue-cobalt, #1B5F8A)",borderColor:"var(--color-blue-cobalt-dark, #154d70)",scale:1};return t.jsxs(t.Fragment,{children:[t.jsx(Ke,{ref:f,position:{lat:e.lat,lng:e.lng},onClick:v,title:e.name,children:t.jsxs("div",{className:`dealer-marker ${e.dealScore.isBestDeal?"dealer-marker--best":""} ${a||s?"dealer-marker--selected":""}`,style:{transform:`scale(${b.scale})`},onMouseEnter:m,onMouseLeave:u,children:[t.jsx("div",{className:"dealer-marker__pin",style:{backgroundColor:b.background,borderColor:b.borderColor},children:n!==void 0?t.jsx("span",{className:"dealer-marker__number",children:n}):e.dealScore.isBestDeal?t.jsx(H,{size:16,className:"dealer-marker__icon"}):t.jsx(ee,{size:16,className:"dealer-marker__icon"})}),t.jsx("div",{className:"dealer-marker__tail",style:{borderTopColor:b.borderColor}})]})}),(d||a||s)&&h&&t.jsx(xn,{anchor:h,onCloseClick:y,className:"dealer-info-window",children:t.jsxs("div",{className:"dealer-info-window__content",children:[i&&t.jsx("div",{className:"dealer-info-window__image",children:t.jsx("img",{src:i,alt:c||"Vehicle"})}),t.jsxs("div",{className:"dealer-info-window__body",children:[e.dealScore.isBestDeal&&t.jsxs("span",{className:"dealer-info-window__badge",children:[t.jsx(H,{size:10}),"Best Deal"]}),t.jsx("h3",{className:"dealer-info-window__name",children:e.name}),t.jsxs("div",{className:"dealer-info-window__meta",children:[t.jsxs("div",{className:"dealer-info-window__rating",children:[t.jsx(W,{size:14,fill:"var(--color-gold)",stroke:"var(--color-gold)"}),t.jsx("span",{className:"dealer-info-window__rating-value",children:e.rating.toFixed(1)}),t.jsxs("span",{className:"dealer-info-window__rating-count",children:["(",e.reviewCount," reviews)"]})]}),t.jsx("span",{className:"dealer-info-window__distance",children:ue(e.distance||0)})]}),t.jsx("div",{className:"dealer-info-window__price-row",children:t.jsxs("span",{className:"dealer-info-window__price",children:["from ",ye(e.lowestPrice)]})}),t.jsxs("div",{className:"dealer-info-window__actions",children:[t.jsx("a",{href:`tel:${e.phone.replace(/[^0-9]/g,"")}`,className:"dealer-info-window__action dealer-info-window__action--primary",children:"Call"}),t.jsx("a",{href:`https://www.google.com/maps/dir/?api=1&destination=${encodeURIComponent(`${e.address}, ${e.city}, ${e.state}`)}`,target:"_blank",rel:"noopener noreferrer",className:"dealer-info-window__action dealer-info-window__action--secondary",children:"Directions"})]})]})]})})]})};Je.__docgenInfo={description:"",methods:[],displayName:"DealerMarker",props:{dealer:{required:!0,tsType:{name:"DealerWithScore"},description:""},index:{required:!1,tsType:{name:"number"},description:""},isSelected:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},isHovered:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},onClick:{required:!1,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},onHover:{required:!1,tsType:{name:"signature",type:"function",raw:"(dealer: DealerWithScore | null) => void",signature:{arguments:[{type:{name:"union",raw:"DealerWithScore | null",elements:[{name:"DealerWithScore"},{name:"null"}]},name:"dealer"}],return:{name:"void"}}},description:""},vehicleImage:{required:!1,tsType:{name:"string"},description:""},vehicleName:{required:!1,tsType:{name:"string"},description:""}}};const jn=({dealers:e,center:n,selectedDealerId:a,hoveredDealerId:s,onDealerSelect:o,onDealerHover:l,vehicleImage:i,vehicleName:c})=>{const f=ae();r.useEffect(()=>{f&&f.panTo(n)},[f,n.lat,n.lng]);const h=r.useCallback(g=>{o?.(g),f&&f.panTo({lat:g.lat,lng:g.lng})},[f,o]),d=r.useCallback(g=>{l?.(g)},[l]);return t.jsx(t.Fragment,{children:e.map((g,v)=>t.jsx(Je,{dealer:g,index:v+1,isSelected:a===g.id,isHovered:s===g.id,onClick:()=>h(g),onHover:d,vehicleImage:i,vehicleName:c},g.id))})},Ye=({dealers:e,center:n,selectedDealerId:a,hoveredDealerId:s,onDealerSelect:o,onDealerHover:l,apiKey:i,vehicleImage:c,vehicleName:f,sidebarContent:h,sidebarTitle:d="Dealers",dealerDetailContent:g,isDealerDetailOpen:v=!1,onCloseDealerDetail:y})=>{const[m]=r.useState(null),[u,_]=r.useState(!1),[b,C]=r.useState(!0);return r.useEffect(()=>{const x=()=>{_(!!document.fullscreenElement),document.fullscreenElement&&C(!0)};return document.addEventListener("fullscreenchange",x),document.addEventListener("webkitfullscreenchange",x),()=>{document.removeEventListener("fullscreenchange",x),document.removeEventListener("webkitfullscreenchange",x)}},[]),r.useEffect(()=>{const x=async j=>{if(j.target.closest(".gm-fullscreen-control")){j.preventDefault(),j.stopPropagation();const E=document.querySelector(".google-map-view");try{document.fullscreenElement?await document.exitFullscreen():E&&await E.requestFullscreen()}catch(I){console.error("Fullscreen request failed:",I)}}};return document.addEventListener("click",x,!0),()=>{document.removeEventListener("click",x,!0)}},[]),i?m?t.jsxs("div",{className:"google-map-view google-map-view--error",children:[t.jsx("p",{children:"Unable to load map"}),t.jsx("p",{className:"google-map-view__error-detail",children:m})]}):t.jsxs("div",{className:"google-map-view",children:[t.jsx(Ft,{apiKey:i,onLoad:()=>console.log("Google Maps API loaded"),children:t.jsx(He,{defaultCenter:n,defaultZoom:11,mapId:"dealer-locator-map",gestureHandling:"greedy",disableDefaultUI:!1,zoomControl:!0,mapTypeControl:!1,streetViewControl:!1,fullscreenControl:!0,className:"google-map-view__map",children:t.jsx(jn,{dealers:e,center:n,selectedDealerId:a,hoveredDealerId:s,onDealerSelect:o,onDealerHover:l,vehicleImage:c,vehicleName:f})})}),u&&h&&t.jsxs(t.Fragment,{children:[t.jsxs("button",{className:`dealer-locator__fullscreen-toggle ${b?"dealer-locator__fullscreen-toggle--hidden":""}`,onClick:()=>C(!0),children:[t.jsx($e,{size:18}),t.jsx("span",{children:"Show Dealers"})]}),t.jsxs("div",{className:`dealer-locator__fullscreen-sidebar ${b?"":"dealer-locator__fullscreen-sidebar--hidden"}`,children:[t.jsxs("div",{className:"dealer-locator__fullscreen-sidebar-header",children:[t.jsx("h3",{className:"dealer-locator__fullscreen-sidebar-title",children:d}),t.jsx("button",{className:"dealer-locator__fullscreen-sidebar-close",onClick:()=>C(!1),"aria-label":"Close sidebar",children:t.jsx(fe,{size:18})})]}),t.jsx("div",{className:"dealer-locator__fullscreen-sidebar-content",children:h})]})]}),u&&v&&g&&t.jsxs("div",{className:"dealer-locator__fullscreen-detail",children:[t.jsx("button",{className:"dealer-locator__fullscreen-detail-close",onClick:y,"aria-label":"Close dealer details",children:t.jsx(fe,{size:20})}),t.jsx("div",{className:"dealer-locator__fullscreen-detail-content",children:g})]})]}):t.jsx("div",{className:"google-map-view google-map-view--placeholder",children:t.jsxs("div",{className:"google-map-view__placeholder-content",children:[t.jsxs("svg",{width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[t.jsx("path",{d:"M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"}),t.jsx("circle",{cx:"12",cy:"10",r:"3"})]}),t.jsx("p",{children:"Google Maps"}),t.jsx("p",{className:"google-map-view__placeholder-note",children:"Add VITE_GOOGLE_MAPS_API_KEY to enable interactive map"})]})})};Ye.__docgenInfo={description:"",methods:[],displayName:"GoogleMapView",props:{dealers:{required:!0,tsType:{name:"Array",elements:[{name:"DealerWithScore"}],raw:"DealerWithScore[]"},description:""},center:{required:!0,tsType:{name:"signature",type:"object",raw:"{ lat: number; lng: number }",signature:{properties:[{key:"lat",value:{name:"number",required:!0}},{key:"lng",value:{name:"number",required:!0}}]}},description:""},selectedDealerId:{required:!1,tsType:{name:"union",raw:"string | null",elements:[{name:"string"},{name:"null"}]},description:""},hoveredDealerId:{required:!1,tsType:{name:"union",raw:"string | null",elements:[{name:"string"},{name:"null"}]},description:""},onDealerSelect:{required:!1,tsType:{name:"signature",type:"function",raw:"(dealer: DealerWithScore) => void",signature:{arguments:[{type:{name:"DealerWithScore"},name:"dealer"}],return:{name:"void"}}},description:""},onDealerHover:{required:!1,tsType:{name:"signature",type:"function",raw:"(dealer: DealerWithScore | null) => void",signature:{arguments:[{type:{name:"union",raw:"DealerWithScore | null",elements:[{name:"DealerWithScore"},{name:"null"}]},name:"dealer"}],return:{name:"void"}}},description:""},apiKey:{required:!1,tsType:{name:"string"},description:""},vehicleImage:{required:!1,tsType:{name:"string"},description:""},vehicleName:{required:!1,tsType:{name:"string"},description:""},sidebarContent:{required:!1,tsType:{name:"ReactNode"},description:""},sidebarTitle:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:"'Dealers'",computed:!1}},dealerDetailContent:{required:!1,tsType:{name:"ReactNode"},description:""},isDealerDetailOpen:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},onCloseDealerDetail:{required:!1,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""}}};const Nn=async e=>{if(!window.google?.maps?.places?.Place){if(window.google?.maps&&window.google.maps.importLibrary)try{await window.google.maps.importLibrary("places");return}catch(n){console.warn("Failed to import places library:",n)}return new Promise((n,a)=>{if(document.querySelector('script[src*="maps.googleapis.com/maps/api/js"]')){const l=setInterval(()=>{window.google?.maps?.places?.Place&&(clearInterval(l),n())},100);setTimeout(()=>{clearInterval(l),n()},5e3);return}const o=document.createElement("script");o.src=`https://maps.googleapis.com/maps/api/js?key=${e}&libraries=places`,o.async=!0,o.defer=!0,o.onload=()=>{const l=setInterval(()=>{window.google?.maps?.places?.Place&&(clearInterval(l),n())},50);setTimeout(()=>{clearInterval(l),n()},2e3)},o.onerror=()=>a(new Error("Failed to load Google Maps")),document.head.appendChild(o)})}},kn=({apiKey:e,debounceMs:n=300,types:a=["(cities)"],componentRestrictions:s={country:"us"}})=>{const[o,l]=r.useState([]),[i,c]=r.useState(!1),[f,h]=r.useState(null),[d,g]=r.useState(!1),v=r.useRef(null),y=r.useRef(null);r.useEffect(()=>{Nn(e).then(()=>{v.current=new google.maps.Geocoder,g(!0),h(null),console.log("Google Places Autocomplete ready (New API)")}).catch(C=>{console.error("Failed to load Google Places:",C),h(C.message),g(!1)})},[e]);const m=r.useCallback(async C=>{if(y.current&&clearTimeout(y.current),!C.trim()){l([]),c(!1);return}d&&(c(!0),y.current=setTimeout(async()=>{try{const{AutocompleteSuggestion:x}=await google.maps.importLibrary("places"),j={input:C,includedPrimaryTypes:["locality","postal_code","administrative_area_level_1"],includedRegionCodes:["us"]},{suggestions:k}=await x.fetchAutocompleteSuggestions(j);c(!1),k&&k.length>0?l(k.map(S=>{const E=S.placePrediction;return{placeId:E.placeId,description:E.text?.text||"",mainText:E.mainText?.text||E.text?.text||"",secondaryText:E.secondaryText?.text||""}})):l([])}catch(x){console.warn("Places autocomplete error:",x),c(!1);try{new google.maps.Geocoder().geocode({address:C,componentRestrictions:{country:"US"}},(k,S)=>{S===google.maps.GeocoderStatus.OK&&k&&k.length>0?l(k.slice(0,5).map(E=>({placeId:E.place_id,description:E.formatted_address,mainText:E.formatted_address.split(",")[0],secondaryText:E.formatted_address.split(",").slice(1).join(",").trim()}))):l([])})}catch(j){console.warn("Geocoding fallback error:",j),l([])}}},n))},[d,n]),u=r.useCallback(async C=>{if(!d)throw new Error("Google Places service not ready");try{const{Place:x}=await google.maps.importLibrary("places"),j=new x({id:C});await j.fetchFields({fields:["location","formattedAddress","addressComponents"]});const k=j.addressComponents||[];let S="",E="",I="";for(const N of k)N.types.includes("locality")?S=N.longText||N.shortText:N.types.includes("administrative_area_level_1")?E=N.shortText:N.types.includes("postal_code")&&(I=N.longText||N.shortText);return{lat:j.location?.lat()||0,lng:j.location?.lng()||0,formattedAddress:j.formattedAddress||"",city:S,state:E,zipCode:I}}catch(x){return console.warn("New Places API error, falling back to Geocoder:",x),new Promise((j,k)=>{new google.maps.Geocoder().geocode({placeId:C},(E,I)=>{if(I===google.maps.GeocoderStatus.OK&&E&&E[0]){const N=E[0],M=N.address_components||[];let D="",T="",A="";for(const O of M)O.types.includes("locality")?D=O.long_name:O.types.includes("administrative_area_level_1")?T=O.short_name:O.types.includes("postal_code")&&(A=O.long_name);j({lat:N.geometry.location.lat(),lng:N.geometry.location.lng(),formattedAddress:N.formatted_address||"",city:D,state:T,zipCode:A})}else k(new Error("Failed to get place details"))})})}},[d]),_=r.useCallback((C,x)=>new Promise((j,k)=>{if(!d||!v.current){k(new Error("Geocoder not ready"));return}v.current.geocode({location:{lat:C,lng:x}},(S,E)=>{if(E===google.maps.GeocoderStatus.OK&&S&&S[0]){const I=S[0],N=I.address_components||[];let M="",D="",T="";for(const O of N)O.types.includes("locality")?M=O.long_name:O.types.includes("administrative_area_level_1")?D=O.short_name:O.types.includes("postal_code")&&(T=O.long_name);let A=I.formatted_address;M&&D&&(A=`${M}, ${D}`),j({lat:C,lng:x,formattedAddress:A,city:M,state:D,zipCode:T})}else k(new Error("Failed to reverse geocode"))})}),[d]),b=r.useCallback(()=>{l([])},[]);return r.useEffect(()=>()=>{y.current&&clearTimeout(y.current)},[]),{predictions:o,isLoading:i,error:f,isReady:d,searchPlaces:m,getPlaceDetails:u,reverseGeocode:_,clearPredictions:b}},Pe="AIzaSyBEQULQb-uUX-MRIOxSOiLqjy0beake1QM",ze=[{value:"bestDeal",label:"Best Deal"},{value:"distance",label:"Distance"},{value:"price",label:"Lowest Price"},{value:"rating",label:"Highest Rated"}],Sn=({vehicle:e,initialLocation:n={lat:33.6846,lng:-117.8265},initialZipCode:a="Los Angeles, CA",showVehiclePreview:s=!0,defaultView:o="list",maxResults:l=20,cardVariant:i="full",onDealerSelect:c})=>{const[f,h]=r.useState(o),[d,g]=r.useState("bestDeal"),[v,y]=r.useState(null),[m,u]=r.useState(null),[_,b]=r.useState(!1),[C,x]=r.useState(!1),[j,k]=r.useState(a),[S,E]=r.useState(n),[I,N]=r.useState(n),[M,D]=r.useState(!1),[T,A]=r.useState(""),[O,xe]=r.useState(!1),[B,we]=r.useState(null),[Ce,je]=r.useState(null),[V,F]=r.useState(!1),[Ne,se]=r.useState(!1),[q,G]=r.useState(-1),oe=r.useRef(null),ke=r.useRef(null),{predictions:P,isLoading:Xe,isReady:Qe,searchPlaces:et,getPlaceDetails:tt,reverseGeocode:nt,clearPredictions:J}=kn({apiKey:Pe,debounceMs:300,types:["(regions)"],componentRestrictions:{}}),z=r.useMemo(()=>{const p=ht(e.make,e.model,S.lat,S.lng,e.msrp,100,e.priceMin,e.priceMax);return gt(p,d).slice(0,l)},[e.make,e.model,e.msrp,e.priceMin,e.priceMax,S.lat,S.lng,d,l]),[Se,re]=r.useState(!1);r.useEffect(()=>{if(!Se&&z.length>0){const p=z.find(w=>w.dealScore.isBestDeal)||z[0];p&&(N({lat:p.lat,lng:p.lng}),re(!0))}},[z,Se]);const le=r.useCallback(p=>{y(p),b(!0),c?.(p)},[c]),Ee=r.useCallback(p=>{u(p?.id||null),p&&N({lat:p.lat,lng:p.lng})},[]),at=r.useCallback(p=>{u(p?.id||null)},[]),st=p=>{g(p),x(!1)},ot=()=>{A(""),J(),F(!1),G(-1),D(!0),setTimeout(()=>ke.current?.focus(),100)},rt=p=>{const w=p.target.value;A(w),G(-1),w.trim().length>=2?(et(w),F(!0)):(J(),F(!1))},Y=async p=>{try{const w=await tt(p.placeId);E({lat:w.lat,lng:w.lng}),N({lat:w.lat,lng:w.lng}),k(w.formattedAddress),A(""),J(),F(!1),D(!1),re(!1),console.log("Location updated to:",w.formattedAddress,"Coords:",{lat:w.lat,lng:w.lng})}catch(w){console.error("Error getting place details:",w),alert("Unable to get location details. Please try again.")}},lt=p=>{if(!(!V||P.length===0))switch(p.key){case"ArrowDown":p.preventDefault(),G(w=>w<P.length-1?w+1:w);break;case"ArrowUp":p.preventDefault(),G(w=>w>0?w-1:-1);break;case"Enter":p.preventDefault(),q>=0&&P[q]&&Y(P[q]);break;case"Escape":F(!1),J();break}},it=async p=>{if(p.preventDefault(),q>=0&&P[q]){await Y(P[q]);return}if(P.length>0){await Y(P[0]);return}T.trim()&&alert("Please select a location from the suggestions.")},ct=async()=>{if(!("geolocation"in navigator)){alert("Geolocation is not supported by your browser.");return}se(!0),navigator.geolocation.getCurrentPosition(async p=>{const{latitude:w,longitude:ie}=p.coords,Me={lat:w,lng:ie};try{if(Qe){const ce=await nt(w,ie);k(ce.formattedAddress)}else k("Current Location")}catch(ce){console.error("Reverse geocode failed:",ce),k("Current Location")}E(Me),N(Me),D(!1),re(!1),se(!1),console.log("Using current location:",w,ie)},p=>{se(!1);let w="Unable to get your location.";switch(p.code){case p.PERMISSION_DENIED:w="Location access was denied. Please enable location permissions in your browser settings.";break;case p.POSITION_UNAVAILABLE:w="Location information is unavailable.";break;case p.TIMEOUT:w="Location request timed out. Please try again.";break}alert(w)},{enableHighAccuracy:!0,timeout:1e4,maximumAge:3e5})};r.useEffect(()=>{const p=w=>{oe.current&&!oe.current.contains(w.target)&&F(!1)};return V&&document.addEventListener("mousedown",p),()=>{document.removeEventListener("mousedown",p)}},[V]);const De=r.useCallback((p,w)=>{je(p),we(w),xe(!0)},[]),dt=r.useCallback(p=>{console.log("Offer submitted:",p)},[]),ut=z.reduce((p,w)=>p+w.inventoryCount,0);return t.jsxs("div",{className:"dealer-locator",children:[s&&t.jsx(he,{vehicle:e}),t.jsxs("div",{className:"dealer-locator__toolbar",children:[t.jsxs("div",{className:"dealer-locator__location",children:[t.jsx(ee,{size:16}),t.jsx("span",{children:j}),t.jsx("button",{className:"dealer-locator__change-location",onClick:ot,children:"Change"})]}),t.jsxs("div",{className:"dealer-locator__sort",children:[t.jsx("span",{className:"dealer-locator__sort-label",children:"Sort:"}),t.jsxs("div",{className:"dealer-locator__sort-dropdown",children:[t.jsxs("button",{className:"dealer-locator__sort-trigger",onClick:()=>x(!C),"aria-expanded":C,"aria-haspopup":"listbox",children:[ze.find(p=>p.value===d)?.label,t.jsx(Ct,{size:16,className:C?"rotated":""})]}),C&&t.jsx("ul",{className:"dealer-locator__sort-options",role:"listbox",children:ze.map(p=>t.jsx("li",{children:t.jsx("button",{className:`dealer-locator__sort-option ${d===p.value?"active":""}`,onClick:()=>st(p.value),role:"option","aria-selected":d===p.value,children:p.label})},p.value))})]})]})]}),t.jsxs("div",{className:"dealer-locator__view-toggle",children:[t.jsxs("button",{className:`dealer-locator__view-btn ${f==="list"?"active":""}`,onClick:()=>h("list"),"aria-pressed":f==="list",children:[t.jsx($e,{size:18}),t.jsx("span",{children:"List"})]}),t.jsxs("button",{className:`dealer-locator__view-btn ${f==="map"?"active":""}`,onClick:()=>h("map"),"aria-pressed":f==="map",children:[t.jsx(Mt,{size:18}),t.jsx("span",{children:"Map"})]})]}),t.jsx("div",{className:"dealer-locator__summary",children:t.jsxs("span",{className:"dealer-locator__count",children:[z.length," dealers · ",ut," ",e.model," in stock"]})}),t.jsxs("div",{className:`dealer-locator__content ${_?"dealer-locator__content--panel-open":""}`,children:[t.jsx("div",{className:`dealer-locator__list ${f==="map"?"dealer-locator__list--hidden-mobile":""} ${_?"dealer-locator__list--panel-open":""}`,children:z.length===0?t.jsxs("div",{className:"dealer-locator__empty",children:[t.jsx("p",{children:"No dealers found in your area."}),t.jsx("p",{children:"Try expanding your search radius or changing your location."})]}):t.jsx("ul",{className:`dealer-locator__dealers ${i==="compact"?"dealer-locator__dealers--compact":""}`,role:"list",children:z.map((p,w)=>t.jsx("li",{children:t.jsx(ge,{dealer:p,vehicleModel:e.model,index:w+1,isSelected:v?.id===p.id,isHovered:m===p.id,variant:i,onSelect:le,onHover:Ee})},p.id))})}),t.jsx("div",{className:`dealer-locator__map ${f==="list"?"dealer-locator__map--hidden-mobile":""} ${_?"dealer-locator__map--panel-open":""}`,children:t.jsx(Ye,{dealers:z,center:I,selectedDealerId:v?.id,hoveredDealerId:m,onDealerSelect:le,onDealerHover:at,apiKey:Pe,vehicleImage:e.image,vehicleName:`${e.year} ${e.make} ${e.model}`,sidebarTitle:`${z.length} Dealers Near You`,sidebarContent:z.length===0?t.jsx("div",{className:"dealer-locator__empty",children:t.jsx("p",{children:"No dealers found in your area."})}):t.jsx("ul",{className:`dealer-locator__dealers ${i==="compact"?"dealer-locator__dealers--compact":""}`,role:"list",children:z.map((p,w)=>t.jsx("li",{children:t.jsx(ge,{dealer:p,vehicleModel:e.model,index:w+1,isSelected:v?.id===p.id,isHovered:m===p.id,variant:i,onSelect:le,onHover:Ee})},p.id))}),isDealerDetailOpen:_,onCloseDealerDetail:()=>{b(!1),y(null)},dealerDetailContent:v?t.jsx(be,{dealer:v,vehicleModel:e.model,onMakeOffer:De}):null})}),v&&t.jsx(qe,{dealer:v,vehicleModel:e.model,isOpen:_,onClose:()=>{b(!1),y(null)},onMakeOffer:De})]}),Ce&&B&&t.jsx(wt,{isOpen:O,onClose:()=>{xe(!1),je(null),we(null)},dealer:Ce,vehicle:{year:B.year,make:B.make,model:B.model,trim:B.trim,msrp:B.price},onSubmitOffer:dt}),t.jsx("div",{className:"dealer-locator__sticky-header",children:t.jsx(he,{vehicle:e,variant:"compact"})}),M&&t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"location-modal__backdrop",onClick:()=>D(!1)}),t.jsxs("div",{className:"location-modal",role:"dialog","aria-modal":"true","aria-labelledby":"location-modal-title",children:[t.jsx("h3",{id:"location-modal-title",className:"location-modal__title",children:"Change Location"}),t.jsxs("form",{onSubmit:it,className:"location-modal__form",children:[t.jsx("label",{htmlFor:"location-input",className:"location-modal__label",children:"Enter city, state or ZIP code"}),t.jsxs("div",{className:"location-modal__input-wrapper",ref:oe,children:[t.jsx("input",{ref:ke,id:"location-input",type:"text",className:"location-modal__input",value:T,onChange:rt,onKeyDown:lt,onFocus:()=>{P.length>0&&F(!0)},placeholder:"e.g., Miami, FL or 33101",autoComplete:"off","aria-autocomplete":"list","aria-controls":"location-autocomplete-list","aria-expanded":V&&P.length>0}),Xe&&t.jsx("div",{className:"location-modal__input-loader",children:t.jsx(Ie,{size:18,className:"spinning"})}),V&&P.length>0&&t.jsx("ul",{id:"location-autocomplete-list",className:"location-modal__autocomplete",role:"listbox",children:P.map((p,w)=>t.jsxs("li",{role:"option","aria-selected":w===q,className:`location-modal__autocomplete-item ${w===q?"location-modal__autocomplete-item--selected":""}`,onClick:()=>Y(p),onMouseEnter:()=>G(w),children:[t.jsx(ee,{size:16,className:"location-modal__autocomplete-icon"}),t.jsxs("div",{className:"location-modal__autocomplete-text",children:[t.jsx("span",{className:"location-modal__autocomplete-main",children:p.mainText}),p.secondaryText&&t.jsx("span",{className:"location-modal__autocomplete-secondary",children:p.secondaryText})]})]},p.placeId))})]}),t.jsx("button",{type:"submit",className:"location-modal__submit",disabled:P.length===0&&T.trim().length>0,children:"Update Location"})]}),t.jsx("div",{className:"location-modal__divider",children:t.jsx("span",{children:"or"})}),t.jsx("button",{type:"button",className:"location-modal__current",onClick:ct,disabled:Ne,children:Ne?t.jsxs(t.Fragment,{children:[t.jsx(Ie,{size:18,className:"spinning"}),"Getting location..."]}):t.jsxs(t.Fragment,{children:[t.jsx(te,{size:18}),"Use my current location"]})}),t.jsx("button",{type:"button",className:"location-modal__close",onClick:()=>D(!1),"aria-label":"Close",children:"✕"})]})]})]})};Sn.__docgenInfo={description:"",methods:[],displayName:"DealerLocatorMap",props:{vehicle:{required:!0,tsType:{name:"VehicleInfo"},description:""},initialLocation:{required:!1,tsType:{name:"signature",type:"object",raw:"{ lat: number; lng: number }",signature:{properties:[{key:"lat",value:{name:"number",required:!0}},{key:"lng",value:{name:"number",required:!0}}]}},description:"",defaultValue:{value:"{ lat: 33.6846, lng: -117.8265 }",computed:!1}},initialZipCode:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:"'Los Angeles, CA'",computed:!1}},showVehiclePreview:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"true",computed:!1}},defaultView:{required:!1,tsType:{name:"union",raw:"'map' | 'list'",elements:[{name:"literal",value:"'map'"},{name:"literal",value:"'list'"}]},description:"",defaultValue:{value:"'list'",computed:!1}},maxResults:{required:!1,tsType:{name:"number"},description:"",defaultValue:{value:"20",computed:!1}},cardVariant:{required:!1,tsType:{name:"union",raw:"'full' | 'compact'",elements:[{name:"literal",value:"'full'"},{name:"literal",value:"'compact'"}]},description:"",defaultValue:{value:"'full'",computed:!1}},onDealerSelect:{required:!1,tsType:{name:"signature",type:"function",raw:"(dealer: DealerWithScore) => void",signature:{arguments:[{type:{name:"DealerWithScore"},name:"dealer"}],return:{name:"void"}}},description:""}}};export{H as A,Sn as D,he as V,ge as a};
