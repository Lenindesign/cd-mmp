import{j as t,u as mt,r,g as ft,R as O}from"./iframe-BqD4V8Qv.js";import{S as G}from"./star-D8p_S66t.js";import{f as _e,a as de,b as pt,g as ht,s as gt}from"./dealerService-BucHFuvR.js";import{c as H}from"./createLucideIcon-Czx444dS.js";import{C as vt}from"./chevron-right-DTo1FPXB.js";import{M as Q}from"./map-pin-BnLwrezc.js";import{P as ue}from"./phone-DxHs-KMG.js";import{N as ee}from"./navigation-DiwAR8hv.js";import{D as _t}from"./dollar-sign-BkzFHTC8.js";import{E as yt}from"./ExitIntentModal-BwbQMGmg.js";import{C as bt}from"./clock-tl-wjtAe.js";import{B as xt}from"./bookmark-P_ilvt3E.js";import{X as me}from"./x-CzCrOUtd.js";import{r as fe}from"./index-DWNljunt.js";import{M as wt}from"./MakeOfferModal-DtdW_DG7.js";import{C as Ct}from"./chevron-down-BCsf1hCb.js";const jt=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],W=H("award",jt);const Nt=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],kt=H("external-link",Nt);const St=[["path",{d:"M3 5h.01",key:"18ugdj"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 19h.01",key:"noohij"}],["path",{d:"M8 5h13",key:"1pao27"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 19h13",key:"m83p4d"}]],ze=H("list",St);const Et=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],Me=H("loader-circle",Et);const Dt=[["path",{d:"M14.106 5.553a2 2 0 0 0 1.788 0l3.659-1.83A1 1 0 0 1 21 4.619v12.764a1 1 0 0 1-.553.894l-4.553 2.277a2 2 0 0 1-1.788 0l-4.212-2.106a2 2 0 0 0-1.788 0l-3.659 1.83A1 1 0 0 1 3 19.381V6.618a1 1 0 0 1 .553-.894l4.553-2.277a2 2 0 0 1 1.788 0z",key:"169xi5"}],["path",{d:"M15 5.764v15",key:"1pn4in"}],["path",{d:"M9 3.236v15",key:"1uimfh"}]],Mt=H("map",Dt),pe=({vehicle:e,variant:n="full",className:a=""})=>{const s=l=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",maximumFractionDigits:0}).format(l),o=`${e.year} ${e.make} ${e.model}`;return n==="compact"?t.jsx("div",{className:`vehicle-context vehicle-context--compact ${a}`,children:t.jsxs("div",{className:"vehicle-context__mini",children:[t.jsxs("span",{className:"vehicle-context__mini-name",children:[e.year," ",e.model]}),t.jsxs("div",{className:"vehicle-context__mini-specs",children:[t.jsx("span",{className:"vehicle-context__mini-spec",children:s(e.msrp)}),e.bodyStyle&&t.jsx("span",{className:"vehicle-context__mini-spec",children:e.bodyStyle}),e.mpg&&t.jsxs("span",{className:"vehicle-context__mini-spec",children:[e.mpg," MPG"]}),e.rating&&t.jsxs("span",{className:"vehicle-context__mini-spec",children:[t.jsx(G,{size:12,fill:"var(--color-gold)",stroke:"var(--color-gold)"}),e.rating]})]})]})}):t.jsxs("header",{className:`vehicle-context ${a}`,children:[t.jsxs("h1",{className:"vehicle-context__title",children:["Find Dealers for ",o]}),t.jsx("div",{className:"vehicle-context__content",children:t.jsxs("div",{className:"vehicle-context__details",children:[t.jsxs("div",{className:"vehicle-context__specs",children:[t.jsxs("span",{className:"vehicle-context__spec",children:[t.jsx("strong",{children:"MSRP"})," ",s(e.msrp)]}),e.bodyStyle&&t.jsx("span",{className:"vehicle-context__spec vehicle-context__spec--divider",children:e.bodyStyle}),e.mpg&&t.jsxs("span",{className:"vehicle-context__spec vehicle-context__spec--divider",children:[e.mpg," MPG"]}),e.rating&&t.jsxs("span",{className:"vehicle-context__spec vehicle-context__spec--divider vehicle-context__spec--rating",children:[t.jsx(G,{size:14,fill:"var(--color-gold)",stroke:"var(--color-gold)"}),e.rating," C/D Rating"]})]}),e.trim&&t.jsx("span",{className:"vehicle-context__trim",children:e.trim})]})})]})};pe.__docgenInfo={description:"",methods:[],displayName:"VehicleContextHeader",props:{vehicle:{required:!0,tsType:{name:"VehicleInfo"},description:""},variant:{required:!1,tsType:{name:"union",raw:"'full' | 'compact'",elements:[{name:"literal",value:"'full'"},{name:"literal",value:"'compact'"}]},description:"",defaultValue:{value:"'full'",computed:!1}},className:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:"''",computed:!1}}}};const he=({dealer:e,vehicleModel:n,index:a,isSelected:s=!1,isHovered:o=!1,variant:l="full",onSelect:i,onHover:c,onCallClick:d,onDirectionsClick:g,onMakeOfferClick:m})=>{const h=()=>{i?.(e)},y=v=>{v.stopPropagation(),d?.(e)},w=v=>{v.stopPropagation(),g?.(e)},f=v=>{v.stopPropagation(),m?.(e)},u=v=>t.jsxs("span",{className:"dealer-card__stars",children:[t.jsx(G,{size:14,fill:"var(--color-gold)",stroke:"var(--color-gold)"}),t.jsx("span",{children:v.toFixed(1)})]});return l==="compact"?t.jsxs("button",{className:`dealer-card dealer-card--compact ${s?"dealer-card--selected":""} ${o?"dealer-card--hovered":""}`,onClick:h,onMouseEnter:()=>c?.(e),onMouseLeave:()=>c?.(null),"aria-pressed":s,children:[a!==void 0&&t.jsx("span",{className:`dealer-card__number ${e.dealScore.isBestDeal?"dealer-card__number--best":""}`,children:a}),t.jsxs("div",{className:"dealer-card__info",children:[e.dealScore.isBestDeal&&t.jsxs("span",{className:"dealer-card__badge dealer-card__badge--best",children:[t.jsx(W,{size:12}),"Best Deal"]}),t.jsx("div",{className:"dealer-card__header",children:t.jsx("h3",{className:"dealer-card__name",children:e.name})}),t.jsxs("div",{className:"dealer-card__meta",children:[t.jsxs("span",{className:"dealer-card__inventory",children:[e.inventoryCount," in stock · ",_e(e.lowestPrice)]}),t.jsxs("span",{className:"dealer-card__rating-distance",children:[u(e.rating)," · ",de(e.distance||0)]})]})]}),t.jsx(vt,{size:16,className:"dealer-card__chevron"})]}):t.jsxs("article",{className:`dealer-card ${s?"dealer-card--selected":""} ${o?"dealer-card--hovered":""} ${e.dealScore.isBestDeal?"dealer-card--best-deal":""}`,onClick:h,onMouseEnter:()=>c?.(e),onMouseLeave:()=>c?.(null),role:"button",tabIndex:0,"aria-pressed":s,onKeyDown:v=>{(v.key==="Enter"||v.key===" ")&&(v.preventDefault(),h())},children:[a!==void 0&&t.jsx("span",{className:`dealer-card__number ${e.dealScore.isBestDeal?"dealer-card__number--best":""}`,children:a}),e.dealScore.isBestDeal&&t.jsx("div",{className:"dealer-card__badge-row",children:t.jsxs("span",{className:"dealer-card__badge dealer-card__badge--best",children:[t.jsx(W,{size:14}),"Best Deal"]})}),t.jsxs("div",{className:"dealer-card__content",children:[t.jsx("div",{className:"dealer-card__header",children:t.jsx("h3",{className:"dealer-card__name",children:e.name})}),t.jsx("div",{className:"dealer-card__inventory-row",children:t.jsxs("span",{className:"dealer-card__inventory-count",children:[e.inventoryCount," ",n," in stock"]})}),t.jsx("div",{className:"dealer-card__price-row",children:t.jsx("span",{className:"dealer-card__price",children:pt(e.lowestPrice,e.highestPrice)})}),t.jsxs("div",{className:"dealer-card__meta-row",children:[t.jsxs("span",{className:"dealer-card__rating",children:[u(e.rating),t.jsxs("span",{className:"dealer-card__review-count",children:["(",e.reviewCount,")"]})]}),t.jsxs("span",{className:"dealer-card__distance",children:[t.jsx(Q,{size:14}),de(e.distance||0)]})]}),t.jsxs("div",{className:"dealer-card__address",children:[t.jsx("span",{children:e.address}),t.jsxs("span",{children:[e.city,", ",e.state," ",e.zipCode]})]}),t.jsxs("div",{className:"dealer-card__actions",children:[t.jsxs("a",{href:`tel:${e.phone.replace(/[^0-9]/g,"")}`,className:"dealer-card__action dealer-card__action--call",onClick:y,"aria-label":`Call ${e.name}`,children:[t.jsx(ue,{size:16}),t.jsx("span",{children:"Call"})]}),t.jsxs("a",{href:`https://www.google.com/maps/dir/?api=1&destination=${encodeURIComponent(`${e.address}, ${e.city}, ${e.state} ${e.zipCode}`)}`,target:"_blank",rel:"noopener noreferrer",className:"dealer-card__action dealer-card__action--directions",onClick:w,"aria-label":`Get directions to ${e.name}`,children:[t.jsx(ee,{size:16}),t.jsx("span",{children:"Directions"})]}),m&&t.jsxs("button",{className:"dealer-card__action dealer-card__action--offer",onClick:f,"aria-label":`Make an offer at ${e.name}`,children:[t.jsx(_t,{size:16}),t.jsx("span",{children:"Make Offer"})]})]})]})]})};he.__docgenInfo={description:"",methods:[],displayName:"DealerCard",props:{dealer:{required:!0,tsType:{name:"DealerWithScore"},description:""},vehicleModel:{required:!0,tsType:{name:"string"},description:""},index:{required:!1,tsType:{name:"number"},description:""},isSelected:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},isHovered:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},variant:{required:!1,tsType:{name:"union",raw:"'full' | 'compact'",elements:[{name:"literal",value:"'full'"},{name:"literal",value:"'compact'"}]},description:"",defaultValue:{value:"'full'",computed:!1}},onSelect:{required:!1,tsType:{name:"signature",type:"function",raw:"(dealer: DealerWithScore) => void",signature:{arguments:[{type:{name:"DealerWithScore"},name:"dealer"}],return:{name:"void"}}},description:""},onHover:{required:!1,tsType:{name:"signature",type:"function",raw:"(dealer: DealerWithScore | null) => void",signature:{arguments:[{type:{name:"union",raw:"DealerWithScore | null",elements:[{name:"DealerWithScore"},{name:"null"}]},name:"dealer"}],return:{name:"void"}}},description:""},onCallClick:{required:!1,tsType:{name:"signature",type:"function",raw:"(dealer: DealerWithScore) => void",signature:{arguments:[{type:{name:"DealerWithScore"},name:"dealer"}],return:{name:"void"}}},description:""},onDirectionsClick:{required:!1,tsType:{name:"signature",type:"function",raw:"(dealer: DealerWithScore) => void",signature:{arguments:[{type:{name:"DealerWithScore"},name:"dealer"}],return:{name:"void"}}},description:""},onMakeOfferClick:{required:!1,tsType:{name:"signature",type:"function",raw:"(dealer: DealerWithScore) => void",signature:{arguments:[{type:{name:"DealerWithScore"},name:"dealer"}],return:{name:"void"}}},description:""}}};const ye=({dealer:e,vehicleModel:n,onMakeOffer:a})=>{const{user:s,isAuthenticated:o,addSavedVehicle:l,removeSavedVehicle:i}=mt(),[c,d]=r.useState(!1),[g,m]=r.useState(null),h=u=>{const v=`${u.year} ${u.make} ${u.model} ${u.trim}`;return s?.savedVehicles?.some(_=>_.name===v)||!1},y=u=>{if(!o){m(u),d(!0);return}const v=`${u.year} ${u.make} ${u.model} ${u.trim}`,_=`${u.year}-${u.make}-${u.model}-${u.trim}`.toLowerCase().replace(/\s+/g,"-");if(h(u)){const C=s?.savedVehicles?.find(b=>b.name===v);C&&i(C.id)}else l({id:_,name:v,ownership:"want"})},w=()=>{d(!1),m(null)},f=()=>{if(!e.hours)return"Hours not available";const v=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"][new Date().getDay()];return e.hours[v]||"Closed"};return t.jsxs(t.Fragment,{children:[t.jsxs("header",{className:"bottom-sheet__header",children:[e.dealScore.isBestDeal&&t.jsxs("span",{className:"bottom-sheet__badge",children:[t.jsx(W,{size:14}),"Best Deal"]}),t.jsx("h2",{className:"bottom-sheet__title",children:e.name}),t.jsxs("div",{className:"bottom-sheet__address-row",children:[t.jsxs("address",{className:"bottom-sheet__address",children:[e.address,t.jsx("br",{}),e.city,", ",e.state," ",e.zipCode]}),t.jsxs("div",{className:"bottom-sheet__quick-actions",children:[t.jsxs("a",{href:`https://www.google.com/maps/dir/?api=1&destination=${encodeURIComponent(`${e.address}, ${e.city}, ${e.state} ${e.zipCode}`)}`,target:"_blank",rel:"noopener noreferrer",className:"bottom-sheet__quick-badge bottom-sheet__quick-badge--directions","aria-label":"Get directions",children:[t.jsx(ee,{size:12}),t.jsx("span",{children:"Directions"})]}),t.jsxs("a",{href:`tel:${e.phone.replace(/[^0-9]/g,"")}`,className:"bottom-sheet__quick-badge bottom-sheet__quick-badge--call","aria-label":"Call dealer",children:[t.jsx(ue,{size:12}),t.jsx("span",{children:"Call"})]})]})]}),t.jsxs("div",{className:"bottom-sheet__rating",children:[t.jsx(G,{size:16,fill:"var(--color-gold)",stroke:"var(--color-gold)"}),t.jsx("span",{className:"bottom-sheet__rating-value",children:e.rating.toFixed(1)}),t.jsxs("span",{className:"bottom-sheet__rating-count",children:["(",e.reviewCount.toLocaleString()," reviews)"]})]})]}),t.jsxs("div",{className:"bottom-sheet__hours",children:[t.jsx(bt,{size:16}),t.jsxs("span",{children:["Today: ",f()]})]}),t.jsxs("section",{className:"bottom-sheet__inventory",children:[t.jsxs("h3",{className:"bottom-sheet__section-title",children:["Inventory for ",n]}),t.jsx("ul",{className:"bottom-sheet__inventory-list",children:e.inventory.map((u,v)=>{const _=h(u);return t.jsxs("li",{className:"bottom-sheet__inventory-item",children:[t.jsxs("div",{className:"bottom-sheet__inventory-row",children:[t.jsxs("div",{className:"bottom-sheet__inventory-details",children:[t.jsxs("span",{className:"bottom-sheet__inventory-trim",children:[u.isNew?"New":"Used"," ",u.year," ",u.make," ",u.model," ",u.trim]}),t.jsxs("span",{className:"bottom-sheet__inventory-meta",children:[u.exteriorColor,!u.isNew&&u.mileage&&t.jsxs(t.Fragment,{children:[" · ",u.mileage.toLocaleString()," mi"]})]})]}),t.jsx("span",{className:"bottom-sheet__inventory-price",children:_e(u.price)})]}),t.jsxs("div",{className:"bottom-sheet__inventory-actions",children:[t.jsx("button",{className:"bottom-sheet__inventory-offer",onClick:()=>a?.(e,u),children:"Make an Offer"}),t.jsx("button",{className:`bottom-sheet__inventory-save ${_?"bottom-sheet__inventory-save--saved":""}`,onClick:()=>y(u),"aria-label":_?"Remove from saved":"Save vehicle",title:_?"Remove from saved":"Save vehicle",children:t.jsx(xt,{size:16,fill:_?"currentColor":"none"})})]})]},v)})})]}),e.certifications&&e.certifications.length>0&&t.jsxs("section",{className:"bottom-sheet__certifications",children:[t.jsx("h3",{className:"bottom-sheet__section-title",children:"Certifications"}),t.jsx("ul",{className:"bottom-sheet__cert-list",children:e.certifications.map((u,v)=>t.jsx("li",{className:"bottom-sheet__cert",children:u},v))})]}),t.jsxs("div",{className:"bottom-sheet__actions",children:[t.jsxs("a",{href:`tel:${e.phone.replace(/[^0-9]/g,"")}`,className:"bottom-sheet__action bottom-sheet__action--primary",children:[t.jsx(ue,{size:18}),t.jsx("span",{children:"Call Dealer"})]}),t.jsxs("a",{href:`https://www.google.com/maps/dir/?api=1&destination=${encodeURIComponent(`${e.address}, ${e.city}, ${e.state} ${e.zipCode}`)}`,target:"_blank",rel:"noopener noreferrer",className:"bottom-sheet__action bottom-sheet__action--secondary",children:[t.jsx(ee,{size:18}),t.jsx("span",{children:"Get Directions"})]})]}),e.website&&t.jsxs("a",{href:e.website,target:"_blank",rel:"noopener noreferrer",className:"bottom-sheet__website",children:["Visit Dealer Website",t.jsx(kt,{size:14})]}),t.jsx(yt,{isOpen:c,onClose:w,vehicleName:g?`${g.year} ${g.make} ${g.model} ${g.trim}`:n,animationStyle:"elegant"})]})},$e=({dealer:e,vehicleModel:n,isOpen:a,onClose:s,onMakeOffer:o})=>{const l=r.useRef(null);return r.useEffect(()=>{const i=c=>{c.key==="Escape"&&a&&s()};return document.addEventListener("keydown",i),()=>document.removeEventListener("keydown",i)},[a,s]),r.useEffect(()=>(a?document.body.style.overflow="hidden":document.body.style.overflow="",()=>{document.body.style.overflow=""}),[a]),r.useEffect(()=>{a&&l.current&&l.current.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])')[0]?.focus()},[a]),a?t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"bottom-sheet__backdrop",onClick:s,"aria-hidden":"true"}),t.jsxs("div",{ref:l,className:"bottom-sheet",role:"dialog","aria-modal":"true","aria-labelledby":"dealer-sheet-title",children:[t.jsx("div",{className:"bottom-sheet__handle"}),t.jsx("button",{className:"bottom-sheet__close",onClick:s,"aria-label":"Close dealer details",children:t.jsx(me,{size:20})}),t.jsx("div",{className:"bottom-sheet__content",children:t.jsx(ye,{dealer:e,vehicleModel:n,onMakeOffer:o})})]})]}):null};ye.__docgenInfo={description:"",methods:[],displayName:"DealerDetailContent",props:{dealer:{required:!0,tsType:{name:"DealerWithScore"},description:""},vehicleModel:{required:!0,tsType:{name:"string"},description:""},onMakeOffer:{required:!1,tsType:{name:"signature",type:"function",raw:"(dealer: DealerWithScore, vehicle: VehicleInventoryItem) => void",signature:{arguments:[{type:{name:"DealerWithScore"},name:"dealer"},{type:{name:"VehicleInventoryItem"},name:"vehicle"}],return:{name:"void"}}},description:""}}};$e.__docgenInfo={description:"",methods:[],displayName:"DealerBottomSheet",props:{dealer:{required:!0,tsType:{name:"DealerWithScore"},description:""},vehicleModel:{required:!0,tsType:{name:"string"},description:""},isOpen:{required:!0,tsType:{name:"boolean"},description:""},onClose:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},onMakeOffer:{required:!1,tsType:{name:"signature",type:"function",raw:"(dealer: DealerWithScore, vehicle: VehicleInventoryItem) => void",signature:{arguments:[{type:{name:"DealerWithScore"},name:"dealer"},{type:{name:"VehicleInventoryItem"},name:"vehicle"}],return:{name:"void"}}},description:""}}};var ce,Ie;function It(){return Ie||(Ie=1,ce=function e(n,a){if(n===a)return!0;if(n&&a&&typeof n=="object"&&typeof a=="object"){if(n.constructor!==a.constructor)return!1;var s,o,l;if(Array.isArray(n)){if(s=n.length,s!=a.length)return!1;for(o=s;o--!==0;)if(!e(n[o],a[o]))return!1;return!0}if(n.constructor===RegExp)return n.source===a.source&&n.flags===a.flags;if(n.valueOf!==Object.prototype.valueOf)return n.valueOf()===a.valueOf();if(n.toString!==Object.prototype.toString)return n.toString()===a.toString();if(l=Object.keys(n),s=l.length,s!==Object.keys(a).length)return!1;for(o=s;o--!==0;)if(!Object.prototype.hasOwnProperty.call(a,l[o]))return!1;for(o=s;o--!==0;){var i=l[o];if(!e(n[i],a[i]))return!1}return!0}return n!==n&&a!==a}),ce}var Lt=It();const qe=ft(Lt),Ot="1.7.1";function F(e,n){var a={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&n.indexOf(s)<0&&(a[s]=e[s]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,s=Object.getOwnPropertySymbols(e);o<s.length;o++)n.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(e,s[o])&&(a[s[o]]=e[s[o]]);return a}function ge(e,n,a,s){function o(l){return l instanceof a?l:new a(function(i){i(l)})}return new(a||(a=Promise))(function(l,i){function c(m){try{g(s.next(m))}catch(h){i(h)}}function d(m){try{g(s.throw(m))}catch(h){i(h)}}function g(m){m.done?l(m.value):o(m.value).then(c,d)}g((s=s.apply(e,[])).next())})}const P={NOT_LOADED:"NOT_LOADED",LOADING:"LOADING",LOADED:"LOADED",FAILED:"FAILED",AUTH_FAILURE:"AUTH_FAILURE"},Tt="https://maps.googleapis.com/maps/api/js";class te{static load(n,a){return ge(this,void 0,void 0,function*(){var s,o;const l=n.libraries?n.libraries.split(","):[],i=this.serializeParams(n);this.listeners.push(a),!((o=(s=window.google)===null||s===void 0?void 0:s.maps)===null||o===void 0)&&o.importLibrary?(this.serializedApiParams||(this.loadingStatus=P.LOADED),this.notifyLoadingStatusListeners()):(this.serializedApiParams=i,this.initImportLibrary(n)),this.serializedApiParams&&this.serializedApiParams!==i&&console.warn("[google-maps-api-loader] The maps API has already been loaded with different parameters and will not be loaded again. Refresh the page for new values to have effect.");const c=["maps",...l];yield Promise.all(c.map(d=>google.maps.importLibrary(d)))})}static serializeParams(n){return[n.v,n.key,n.language,n.region,n.authReferrerPolicy,n.solutionChannel].join("/")}static initImportLibrary(n){if(window.google||(window.google={}),window.google.maps||(window.google.maps={}),window.google.maps.importLibrary){console.error("[google-maps-api-loader-internal]: initImportLibrary must only be called once");return}let a=null;const s=()=>a||(a=new Promise((o,l)=>{var i;const c=document.createElement("script"),d=new URLSearchParams;for(const[g,m]of Object.entries(n)){const h=g.replace(/[A-Z]/g,y=>"_"+y[0].toLowerCase());d.set(h,String(m))}d.set("loading","async"),d.set("callback","__googleMapsCallback__"),c.async=!0,c.src=Tt+"?"+d.toString(),c.nonce=((i=document.querySelector("script[nonce]"))===null||i===void 0?void 0:i.nonce)||"",c.onerror=()=>{this.loadingStatus=P.FAILED,this.notifyLoadingStatusListeners(),l(new Error("The Google Maps JavaScript API could not load."))},window.__googleMapsCallback__=()=>{this.loadingStatus=P.LOADED,this.notifyLoadingStatusListeners(),o()},window.gm_authFailure=()=>{this.loadingStatus=P.AUTH_FAILURE,this.notifyLoadingStatusListeners()},this.loadingStatus=P.LOADING,this.notifyLoadingStatusListeners(),document.head.append(c)}),a);google.maps.importLibrary=o=>s().then(()=>google.maps.importLibrary(o))}static notifyLoadingStatusListeners(){for(const n of this.listeners)n(this.loadingStatus)}}te.loadingStatus=P.NOT_LOADED;te.listeners=[];const At="GMP_visgl_rgmlibrary_v1_default",Pt=[`gmp_visgl_reactgooglemaps_v${Ot}`],Z=O.createContext(null);function zt(){const[e,n]=r.useState({});return{mapInstances:e,addMapInstance:(l,i="default")=>{n(c=>Object.assign(Object.assign({},c),{[i]:l}))},removeMapInstance:(l="default")=>{n(i=>{var c=l;i[c];var d=F(i,[typeof c=="symbol"?c:c+""]);return d})},clearMapInstances:()=>{n({})}}}function $t(e){const{onLoad:n,onError:a,apiKey:s,version:o,libraries:l=[]}=e,i=F(e,["onLoad","onError","apiKey","version","libraries"]),[c,d]=r.useState(te.loadingStatus),[g,m]=r.useReducer((f,u)=>f[u.name]?f:Object.assign(Object.assign({},f),{[u.name]:u.value}),{}),h=r.useMemo(()=>l?.join(","),[l]),y=r.useMemo(()=>JSON.stringify(Object.assign({apiKey:s,version:o},i)),[s,o,i]),w=r.useCallback(f=>ge(this,void 0,void 0,function*(){var u;if(g[f])return g[f];if(!(!((u=google==null?void 0:google.maps)===null||u===void 0)&&u.importLibrary))throw new Error("[api-provider-internal] importLibrary was called before google.maps.importLibrary was defined.");const v=yield window.google.maps.importLibrary(f);return m({name:f,value:v}),v}),[g]);return r.useEffect(()=>{ge(this,void 0,void 0,function*(){try{const f=Object.assign({key:s},i);o&&(f.v=o),h?.length>0&&(f.libraries=h),(f.channel===void 0||f.channel<0||f.channel>999)&&delete f.channel,f.solutionChannel===void 0?f.solutionChannel=At:f.solutionChannel===""&&delete f.solutionChannel,yield te.load(f,u=>d(u));for(const u of["core","maps",...l])yield w(u);n&&n()}catch(f){a?a(f):console.error("<ApiProvider> failed to load the Google Maps JavaScript API",f)}})},[s,h,y]),{status:c,loadedLibraries:g,importLibrary:w}}function qt(e){return r.useMemo(()=>e.disableUsageAttribution?null:Pt,[e.disableUsageAttribution])}const Ft=e=>{const{children:n}=e,a=F(e,["children"]),{mapInstances:s,addMapInstance:o,removeMapInstance:l,clearMapInstances:i}=zt(),{status:c,loadedLibraries:d,importLibrary:g}=$t(a),m=qt(a),h=r.useMemo(()=>({mapInstances:s,addMapInstance:o,removeMapInstance:l,clearMapInstances:i,status:c,loadedLibraries:d,importLibrary:g,internalUsageAttributionIds:m}),[s,o,l,i,c,d,g,m]);return O.createElement(Z.Provider,{value:h},n)};function Rt(e,n){for(const a of Gt){const s=n[a],o=Fe[a];r.useEffect(()=>{if(!e||!s)return;const l=google.maps.event.addListener(e,o,i=>{s(Bt(o,e,i))});return()=>l.remove()},[e,o,s])}}function Bt(e,n,a){var s;const o={type:e,map:n,detail:{},stoppable:!1,stop:()=>{}};if(Ut.includes(e)){const l=o,i=n.getCenter(),c=n.getZoom(),d=n.getHeading()||0,g=n.getTilt()||0,m=n.getBounds();return(!i||!m||!Number.isFinite(c))&&console.warn("[createEvent] at least one of the values from the map returned undefined. This is not expected to happen. Please report an issue at https://github.com/visgl/react-google-maps/issues/new"),l.detail={center:i?.toJSON()||{lat:0,lng:0},zoom:c||0,heading:d,tilt:g,bounds:m?.toJSON()||{north:90,east:180,south:-90,west:-180}},l}else if(Vt.includes(e)){if(!a)throw new Error("[createEvent] mouse events must provide a srcEvent");const l=o;return l.domEvent=a.domEvent,l.stoppable=!0,l.stop=()=>a.stop(),l.detail={latLng:((s=a.latLng)===null||s===void 0?void 0:s.toJSON())||null,placeId:a.placeId},l}return o}const Fe={onBoundsChanged:"bounds_changed",onCenterChanged:"center_changed",onClick:"click",onContextmenu:"contextmenu",onDblclick:"dblclick",onDrag:"drag",onDragend:"dragend",onDragstart:"dragstart",onHeadingChanged:"heading_changed",onIdle:"idle",onIsFractionalZoomEnabledChanged:"isfractionalzoomenabled_changed",onMapCapabilitiesChanged:"mapcapabilities_changed",onMapTypeIdChanged:"maptypeid_changed",onMousemove:"mousemove",onMouseout:"mouseout",onMouseover:"mouseover",onProjectionChanged:"projection_changed",onRenderingTypeChanged:"renderingtype_changed",onTilesLoaded:"tilesloaded",onTiltChanged:"tilt_changed",onZoomChanged:"zoom_changed",onCameraChanged:"bounds_changed"},Ut=["bounds_changed","center_changed","heading_changed","tilt_changed","zoom_changed"],Vt=["click","contextmenu","dblclick","mousemove","mouseout","mouseover"],Gt=Object.keys(Fe);function Wt(e){const n=r.useRef(void 0);return r.useEffect(()=>{n.current=e}),n.current}function Re(e,n){const a=Wt(e);return r.useMemo(()=>a&&n(a,e)?a:e,[e,a,n])}function Ht(e,n,a){r.useEffect(e,[Re(n,a)])}function Zt(e,n){Ht(e,n,qe)}const Kt=new Set(["backgroundColor","clickableIcons","controlSize","disableDefaultUI","disableDoubleClickZoom","draggable","draggableCursor","draggingCursor","fullscreenControl","fullscreenControlOptions","gestureHandling","headingInteractionEnabled","isFractionalZoomEnabled","keyboardShortcuts","mapTypeControl","mapTypeControlOptions","mapTypeId","maxZoom","minZoom","noClear","panControl","panControlOptions","restriction","rotateControl","rotateControlOptions","scaleControl","scaleControlOptions","scrollwheel","streetView","streetViewControl","streetViewControlOptions","styles","tiltInteractionEnabled","zoomControl","zoomControlOptions"]);function Jt(e,n){const a={},s=Object.keys(n);for(const o of s)Kt.has(o)&&(a[o]=n[o]);Zt(()=>{e&&e.setOptions(a)},[a])}function Be(){var e;return((e=r.useContext(Z))===null||e===void 0?void 0:e.status)||P.NOT_LOADED}function Yt(e,n){const{viewport:a,viewState:s}=n,o=!!a;return r.useLayoutEffect(()=>{if(!e||!s)return;const{latitude:l,longitude:i,bearing:c,pitch:d,zoom:g}=s;e.moveCamera({center:{lat:l,lng:i},heading:c,tilt:d,zoom:g+1})},[e,s]),o}function Xt(e){return!e||typeof e!="object"||!("lat"in e&&"lng"in e)?!1:Number.isFinite(e.lat)&&Number.isFinite(e.lng)}function Ue(e){return Xt(e)?e:e.toJSON()}function Qt(e,n,a){const s=a.center?Ue(a.center):null;let o=null,l=null;s&&Number.isFinite(s.lat)&&Number.isFinite(s.lng)&&(o=s.lat,l=s.lng);const i=Number.isFinite(a.zoom)?a.zoom:null,c=Number.isFinite(a.heading)?a.heading:null,d=Number.isFinite(a.tilt)?a.tilt:null;r.useLayoutEffect(()=>{if(!e)return;const g={};let m=!1;o!==null&&l!==null&&(n.current.center.lat!==o||n.current.center.lng!==l)&&(g.center={lat:o,lng:l},m=!0),i!==null&&n.current.zoom!==i&&(g.zoom=i,m=!0),c!==null&&n.current.heading!==c&&(g.heading=c,m=!0),d!==null&&n.current.tilt!==d&&(g.tilt=d,m=!0),m&&e.moveCamera(g)})}const en=()=>{const e={position:"absolute",top:0,left:0,bottom:0,right:0,zIndex:999,display:"flex",flexFlow:"column nowrap",textAlign:"center",justifyContent:"center",fontSize:".8rem",color:"rgba(0,0,0,0.6)",background:"#dddddd",padding:"1rem 1.5rem"};return O.createElement("div",{style:e},O.createElement("h2",null,"Error: AuthFailure"),O.createElement("p",null,"A problem with your API key prevents the map from rendering correctly. Please make sure the value of the ",O.createElement("code",null,"APIProvider.apiKey")," prop is correct. Check the error-message in the console for further details."))};function tn(){const[e,n]=r.useState(null),a=r.useCallback(s=>n(s),[n]);return[e,a]}function Ve(){return Be()===P.LOADED}function nn(){const[,e]=r.useReducer(n=>n+1,0);return e}function an(e,n){const a=e.getCenter(),s=e.getZoom(),o=e.getHeading()||0,l=e.getTilt()||0,i=e.getBounds();(!a||!i||!Number.isFinite(s))&&console.warn("[useTrackedCameraState] at least one of the values from the map returned undefined. This is not expected to happen. Please report an issue at https://github.com/visgl/react-google-maps/issues/new"),Object.assign(n.current,{center:a?.toJSON()||{lat:0,lng:0},zoom:s||0,heading:o,tilt:l})}function sn(e){const n=nn(),a=r.useRef({center:{lat:0,lng:0},heading:0,tilt:0,zoom:0});return r.useEffect(()=>{if(!e)return;const s=google.maps.event.addListener(e,"bounds_changed",()=>{an(e,a),n()});return()=>s.remove()},[e,n]),a}class X{static has(n){return this.entries[n]&&this.entries[n].length>0}static pop(n){return this.entries[n]&&this.entries[n].pop()||null}static push(n,a){this.entries[n]||(this.entries[n]=[]),this.entries[n].push(a)}}X.entries={};function on(e,n){const a=Ve(),[s,o]=r.useState(null),[l,i]=tn(),c=sn(s),{id:d,defaultBounds:g,defaultCenter:m,defaultZoom:h,defaultHeading:y,defaultTilt:w,reuseMaps:f,renderingType:u,colorScheme:v}=e,_=F(e,["id","defaultBounds","defaultCenter","defaultZoom","defaultHeading","defaultTilt","reuseMaps","renderingType","colorScheme"]),C=e.zoom!==void 0||e.defaultZoom!==void 0,b=e.center!==void 0||e.defaultCenter!==void 0;!g&&(!C||!b)&&console.warn("<Map> component is missing configuration. You have to provide zoom and center (via the `zoom`/`defaultZoom` and `center`/`defaultCenter` props) or specify the region to show using `defaultBounds`. See https://visgl.github.io/react-google-maps/docs/api-reference/components/map#required"),!_.center&&m&&(_.center=m),!_.zoom&&Number.isFinite(h)&&(_.zoom=h),!_.heading&&Number.isFinite(y)&&(_.heading=y),!_.tilt&&Number.isFinite(w)&&(_.tilt=w);const N=_.internalUsageAttributionIds;N==null?_.internalUsageAttributionIds=n.internalUsageAttributionIds:_.internalUsageAttributionIds=[...n.internalUsageAttributionIds||[],...N];for(const k of Object.keys(_))_[k]===void 0&&delete _[k];const j=r.useRef(void 0);return r.useEffect(()=>{if(!l||!a)return;const{addMapInstance:k,removeMapInstance:S}=n,{mapId:I}=e,D=`${I||"default"}:${u||"default"}:${v||"LIGHT"}`;let M,E;if(f&&X.has(D)?(E=X.pop(D),M=E.getDiv(),l.appendChild(M),E.setOptions(_),setTimeout(()=>E.setCenter(E.getCenter()),0)):(M=document.createElement("div"),M.style.height="100%",l.appendChild(M),E=new google.maps.Map(M,Object.assign(Object.assign(Object.assign({},_),u?{renderingType:u}:{}),v?{colorScheme:v}:{}))),o(E),k(E,d),g){const{padding:L}=g,$=F(g,["padding"]);E.fitBounds($,L)}else(!C||!b)&&E.fitBounds({east:180,west:-180,south:-90,north:90});if(j.current){const{mapId:L,cameraState:$}=j.current;L!==I&&E.setOptions($)}return()=>{j.current={mapId:I,cameraState:c.current},M.remove(),f?X.push(D,E):google.maps.event.clearInstanceListeners(E),o(null),S(d)}},[l,a,d,e.mapId,e.renderingType,e.colorScheme]),[s,i,c]}const Ge=O.createContext(null),We=e=>{const{children:n,id:a,className:s,style:o}=e,l=r.useContext(Z),i=Be();if(!l)throw new Error("<Map> can only be used inside an <ApiProvider> component.");const[c,d,g]=on(e,l);Qt(c,g,e),Rt(c,e),Jt(c,e);const m=Yt(c,e),h=!!e.controlled;r.useEffect(()=>{if(c)return m&&c.setOptions({disableDefaultUI:!0}),(m||h)&&c.setOptions({gestureHandling:"none",keyboardShortcuts:!1}),()=>{c.setOptions({gestureHandling:e.gestureHandling,keyboardShortcuts:e.keyboardShortcuts})}},[c,m,h,e.gestureHandling,e.keyboardShortcuts]);const y=e.center?Ue(e.center):null;let w=null,f=null;y&&Number.isFinite(y.lat)&&Number.isFinite(y.lng)&&(w=y.lat,f=y.lng);const u=r.useMemo(()=>{var C,b,N;return{center:{lat:w??0,lng:f??0},zoom:(C=e.zoom)!==null&&C!==void 0?C:0,heading:(b=e.heading)!==null&&b!==void 0?b:0,tilt:(N=e.tilt)!==null&&N!==void 0?N:0}},[w,f,e.zoom,e.heading,e.tilt]);r.useLayoutEffect(()=>{if(!c||!h)return;c.moveCamera(u);const C=c.addListener("bounds_changed",()=>{c.moveCamera(u)});return()=>C.remove()},[c,h,u]);const v=r.useMemo(()=>Object.assign({width:"100%",height:"100%",position:"relative",zIndex:m?-1:0},o),[o,m]),_=r.useMemo(()=>({map:c}),[c]);return i===P.AUTH_FAILURE?O.createElement("div",{style:Object.assign({position:"relative"},s?{}:v),className:s},O.createElement(en,null)):O.createElement("div",Object.assign({ref:d,"data-testid":"map",style:s?void 0:v,className:s},a?{id:a}:{}),c?O.createElement(Ge.Provider,{value:_},n):null)};We.deckGLViewProps=!0;const Le=new Set;function rn(...e){const n=JSON.stringify(e);Le.has(n)||(Le.add(n),console.error(...e))}const ne=(e=null)=>{const n=r.useContext(Z),{map:a}=r.useContext(Ge)||{};if(n===null)return rn("useMap(): failed to retrieve APIProviderContext. Make sure that the <APIProvider> component exists and that the component you are calling `useMap()` from is a sibling of the <APIProvider>."),null;const{mapInstances:s}=n;return e!==null?s[e]||null:a||s.default||null};function He(e){const n=Ve(),a=r.useContext(Z);return r.useEffect(()=>{!n||!a||a.importLibrary(e)},[n,a,e]),a?.loadedLibraries[e]||null}function B(e,n,a){r.useEffect(()=>{if(!e||!n||!a)return;const s=google.maps.event.addListener(e,n,a);return()=>s.remove()},[e,n,a])}function Y(e,n,a){r.useEffect(()=>{e&&(e[n]=a)},[e,n,a])}function Oe(e,n,a){r.useEffect(()=>{if(!(!e||!n||!a))return e.addEventListener(n,a),()=>e.removeEventListener(n,a)},[e,n,a])}class ln{constructor(){this.renderedStyles=new Set,this.styleElement=null}getStyleElement(){return this.styleElement||(this.styleElement=document.createElement("style"),this.styleElement.setAttribute("data-rgm-anchor-styles",""),document.head.appendChild(this.styleElement)),this.styleElement}addAdvancedMarkerPointerEventsOverwrite(){if(this.renderedStyles.has("marker-pointer-events"))return;const n=this.getStyleElement();n.textContent+=`
      gmp-advanced-marker[data-origin='rgm'] {
        pointer-events: none !important;
      }
    `,this.renderedStyles.add("marker-pointer-events")}cleanup(){this.styleElement&&(this.styleElement.remove(),this.styleElement=null,this.renderedStyles.clear())}}const cn=new ln;function dn(e,n){var a;if(!(!((a=google==null?void 0:google.maps)===null||a===void 0)&&a.version))return;const s=google.maps.version.split("."),o=parseInt(s[0],10),l=parseInt(s[1],10);return o>e||o===e&&l>=n}const un=O.createContext(null),mn={BOTTOM:["50%","100%"]},Ze=r.forwardRef((e,n)=>{const{children:a,style:s,className:o,anchorPoint:l}=e,[i,c]=gn(e),d=r.useMemo(()=>i?{marker:i}:null,[i]);return r.useImperativeHandle(n,()=>i,[i]),c?O.createElement(un.Provider,{value:d},fe.createPortal(O.createElement(hn,{anchorPoint:l,styles:s,className:o},a),c)):null});Ze.displayName="AdvancedMarker";function fn(){const[e,n]=r.useState(null);return[r.useCallback(s=>{n(s)},[]),e]}function pn(e){return e.content!==void 0}function ve(e){return e.nodeType===Node.ELEMENT_NODE}const hn=({children:e,styles:n,className:a})=>O.createElement("div",{className:a,style:n},e);function gn(e){const[n,a]=r.useState(null),[s,o]=r.useState(null),l=ne(),i=He("marker"),{children:c,onClick:d,className:g,onMouseEnter:m,onMouseLeave:h,onDrag:y,onDragStart:w,onDragEnd:f,collisionBehavior:u,clickable:v,draggable:_,position:C,title:b,zIndex:N,anchorPoint:j,anchorLeft:k,anchorTop:S}=e,I=r.Children.count(c);return r.useEffect(()=>{if(!l||!i)return;const D=new i.AdvancedMarkerElement;D.map=l,a(D);let M=null;return I>0&&(M=document.createElement("div"),D.content=M,o(M)),()=>{D.map=null,M?.remove(),a(null),o(null)}},[l,i,I]),r.useEffect(()=>{!n?.content||!ve(n.content)||I>0||(n.content.className=g??"")},[n,g,I]),vn(n,j,k,S,I>0),Y(n,"position",C),Y(n,"title",b??""),Y(n,"zIndex",N),Y(n,"collisionBehavior",u),r.useEffect(()=>{n&&(_!==void 0?n.gmpDraggable=_:y||w||f?n.gmpDraggable=!0:n.gmpDraggable=!1)},[n,_,y,f,w]),r.useEffect(()=>{if(!n)return;const D=v!==void 0||!!d||!!m||!!h;n.gmpClickable=D,D&&n?.content&&ve(n.content)&&(n.content.style.pointerEvents="all",d&&(n.content.style.cursor="pointer"))},[n,v,d,m,h]),B(n,"click",d),B(n,"drag",y),B(n,"dragstart",w),B(n,"dragend",f),Oe(n?.element,"mouseenter",m),Oe(n?.element,"mouseleave",h),[n,s]}function vn(e,n,a,s,o){r.useEffect(()=>{if(!e||!o)return;const l=dn(3,62),i=e.content;if(!(!i||!ve(i))){if(a!==void 0||s!==void 0){l||console.warn(`AdvancedMarker: The anchorLeft and anchorTop props are only supported in Google Maps API version 3.62 and above. The current version is ${google.maps.version}.`),e.anchorLeft=a,e.anchorTop=s,n!==void 0&&console.warn("AdvancedMarker: the anchorPoint prop is ignored when anchorLeft and/or anchorTop are set.");return}if(n!==void 0){const[c,d]=n??mn.BOTTOM,g=`calc(-1 * ${c})`,m=`calc(-1 * ${d})`;l?(e.anchorLeft=g,e.anchorTop=m,i.style.transform=""):(i.style.transform=`translate(50%, 100%) translate(${g}, ${m})`,e.dataset.origin="rgm",cn.addAdvancedMarkerPointerEventsOverwrite())}}},[e,n,a,s,o])}function _n(e,n,a){if(n!=null&&typeof n!="object")throw new Error("The `style` prop expects a mapping from style properties to values, not a string. For example, style={{marginRight: spacing + 'em'}} when using JSX.");const s=e.style;if(a==null){if(n==null)return;for(const o in n)n.hasOwnProperty(o)&&Te(s,o,n[o]);return}for(const o in a)a.hasOwnProperty(o)&&(n==null||!n.hasOwnProperty(o))&&(o.indexOf("--")===0?s.setProperty(o,""):o==="float"?s.cssFloat="":s[o]="");if(n!=null)for(const o in n){const l=n[o];n.hasOwnProperty(o)&&a[o]!==l&&Te(s,o,l)}}function Te(e,n,a){const s=n.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?s?e.setProperty(n,""):n==="float"?e.cssFloat="":e[n]="":s?e.setProperty(n,a):typeof a=="number"&&a!==0&&!bn(n)?e[n]=a+"px":n==="float"?e.cssFloat=a:e[n]=(""+a).trim()}const yn=new Set(["animationIterationCount","aspectRatio","borderImageOutset","borderImageSlice","borderImageWidth","boxFlex","boxFlexGroup","boxOrdinalGroup","columnCount","columns","flex","flexGrow","flexPositive","flexShrink","flexNegative","flexOrder","gridArea","gridRow","gridRowEnd","gridRowSpan","gridRowStart","gridColumn","gridColumnEnd","gridColumnSpan","gridColumnStart","fontWeight","lineClamp","lineHeight","opacity","order","orphans","scale","tabSize","widows","zIndex","zoom","fillOpacity","floodOpacity","stopOpacity","strokeDasharray","strokeDashoffset","strokeMiterlimit","strokeOpacity","strokeWidth"]);function bn(e){return yn.has(e)}const xn=e=>{const{children:n,headerContent:a,style:s,className:o,pixelOffset:l,anchor:i,shouldFocus:c,onClose:d,onCloseClick:g}=e,m=F(e,["children","headerContent","style","className","pixelOffset","anchor","shouldFocus","onClose","onCloseClick"]),h=He("maps"),[y,w]=r.useState(null),f=r.useRef(null),u=r.useRef(null),v=Re(m,qe);r.useEffect(()=>{if(!h)return;f.current=document.createElement("div"),u.current=document.createElement("div");const b=v;l&&(b.pixelOffset=new google.maps.Size(l[0],l[1])),a&&(b.headerContent=typeof a=="string"?a:u.current);const N=new google.maps.InfoWindow(v);return N.setContent(f.current),w(N),()=>{var j,k;N.setContent(null),(j=f.current)===null||j===void 0||j.remove(),(k=u.current)===null||k===void 0||k.remove(),f.current=null,u.current=null,w(null)}},[h]);const _=r.useRef(null);r.useEffect(()=>{!y||!f.current||(_n(f.current,s||null,_.current),_.current=s||null,o!==f.current.className&&(f.current.className=o||""))},[y,o,s]),r.useEffect(()=>{if(!y)return;const b=v;l?b.pixelOffset=new google.maps.Size(l[0],l[1]):b.pixelOffset=null,a?b.headerContent=typeof a=="string"?a:u.current:b.headerContent=null,y.setOptions(v)},[v,l,a]),B(y,"close",d),B(y,"closeclick",g);const C=ne();return r.useEffect(()=>{var b;if(!C||!y||i===null)return;const N=!!i,j={map:C};if(i&&(j.anchor=i,pn(i)&&i.content instanceof Element)){const k=i?.getBoundingClientRect();if(k&&i.dataset.origin==="rgm"){const S=(b=i.content.firstElementChild)===null||b===void 0?void 0:b.firstElementChild,I=S?.getBoundingClientRect(),D=I.x-k.x+(I.width-k.width)/2,M=I.y-k.y,E=v;E.pixelOffset=new google.maps.Size(l?l[0]+D:D,l?l[1]+M:M),y.setOptions(E)}}return c!==void 0&&(j.shouldFocus=c),y.open(j),()=>{N&&y.set("anchor",null),y.close()}},[y,i,C,c,v,l]),O.createElement(O.Fragment,null,f.current&&fe.createPortal(n,f.current),u.current!==null&&fe.createPortal(a,u.current))};function wn(e){const[n,a]=r.useState(null),s=ne(),{onClick:o,onDrag:l,onDragStart:i,onDragEnd:c,onMouseOver:d,onMouseOut:g}=e,m=F(e,["onClick","onDrag","onDragStart","onDragEnd","onMouseOver","onMouseOut"]),{position:h,draggable:y}=m;return r.useEffect(()=>{if(!s){s===void 0&&console.error("<Marker> has to be inside a Map component.");return}const w=new google.maps.Marker(m);return w.setMap(s),a(w),()=>{w.setMap(null),a(null)}},[s]),r.useEffect(()=>{if(!n)return;const w=n,f=google.maps.event;return o&&f.addListener(w,"click",o),l&&f.addListener(w,"drag",l),i&&f.addListener(w,"dragstart",i),c&&f.addListener(w,"dragend",c),d&&f.addListener(w,"mouseover",d),g&&f.addListener(w,"mouseout",g),n.setDraggable(!!y),()=>{f.clearInstanceListeners(w)}},[n,y,o,l,i,c,d,g]),r.useEffect(()=>{n&&m&&n.setOptions(m)},[n,m]),r.useEffect(()=>{y||!h||!n||n.setPosition(h)},[y,h,n]),n}const Cn=r.forwardRef((e,n)=>{const a=wn(e);return r.useImperativeHandle(n,()=>a,[a]),O.createElement(O.Fragment,null)});Cn.displayName="Marker";const Ke=({dealer:e,index:n,isSelected:a=!1,isHovered:s=!1,onClick:o,onHover:l,vehicleImage:i,vehicleName:c})=>{const[d,g]=fn(),[m,h]=r.useState(!1),y=r.useCallback(()=>{o?.(),h(!0)},[o]),w=r.useCallback(()=>{h(!1)},[]),f=r.useCallback(()=>{l?.(e),h(!0)},[e,l]),u=r.useCallback(()=>{l?.(null),h(!1)},[l]),_=e.dealScore.isBestDeal?{background:"var(--color-gold, #DBCA8B)",borderColor:"var(--color-gold-dark, #A59143)",scale:a||s?1.3:1.1}:a||s?{background:"var(--color-blue-cobalt, #1B5F8A)",borderColor:"var(--color-blue-cobalt-dark, #154d70)",scale:1.3}:{background:"var(--color-blue-cobalt, #1B5F8A)",borderColor:"var(--color-blue-cobalt-dark, #154d70)",scale:1};return t.jsxs(t.Fragment,{children:[t.jsx(Ze,{ref:d,position:{lat:e.lat,lng:e.lng},onClick:y,title:e.name,children:t.jsxs("div",{className:`dealer-marker ${e.dealScore.isBestDeal?"dealer-marker--best":""} ${a||s?"dealer-marker--selected":""}`,style:{transform:`scale(${_.scale})`},onMouseEnter:f,onMouseLeave:u,children:[t.jsx("div",{className:"dealer-marker__pin",style:{backgroundColor:_.background,borderColor:_.borderColor},children:n!==void 0?t.jsx("span",{className:"dealer-marker__number",children:n}):e.dealScore.isBestDeal?t.jsx(W,{size:16,className:"dealer-marker__icon"}):t.jsx(Q,{size:16,className:"dealer-marker__icon"})}),t.jsx("div",{className:"dealer-marker__tail",style:{borderTopColor:_.borderColor}})]})}),(m||a||s)&&g&&t.jsx(xn,{anchor:g,onCloseClick:w,className:"dealer-info-window",children:t.jsxs("div",{className:"dealer-info-window__content",children:[i&&t.jsx("div",{className:"dealer-info-window__image",children:t.jsx("img",{src:i,alt:c||"Vehicle"})}),t.jsxs("div",{className:"dealer-info-window__body",children:[e.dealScore.isBestDeal&&t.jsxs("span",{className:"dealer-info-window__badge",children:[t.jsx(W,{size:10}),"Best Deal"]}),t.jsx("h3",{className:"dealer-info-window__name",children:e.name}),t.jsxs("div",{className:"dealer-info-window__meta",children:[t.jsxs("div",{className:"dealer-info-window__rating",children:[t.jsx(G,{size:14,fill:"var(--color-gold)",stroke:"var(--color-gold)"}),t.jsx("span",{className:"dealer-info-window__rating-value",children:e.rating.toFixed(1)}),t.jsxs("span",{className:"dealer-info-window__rating-count",children:["(",e.reviewCount," reviews)"]})]}),t.jsx("span",{className:"dealer-info-window__distance",children:de(e.distance||0)})]}),t.jsx("div",{className:"dealer-info-window__price-row",children:t.jsxs("span",{className:"dealer-info-window__price",children:["from ",_e(e.lowestPrice)]})}),t.jsxs("div",{className:"dealer-info-window__actions",children:[t.jsx("a",{href:`tel:${e.phone.replace(/[^0-9]/g,"")}`,className:"dealer-info-window__action dealer-info-window__action--primary",children:"Call"}),t.jsx("a",{href:`https://www.google.com/maps/dir/?api=1&destination=${encodeURIComponent(`${e.address}, ${e.city}, ${e.state}`)}`,target:"_blank",rel:"noopener noreferrer",className:"dealer-info-window__action dealer-info-window__action--secondary",children:"Directions"})]})]})]})})]})};Ke.__docgenInfo={description:"",methods:[],displayName:"DealerMarker",props:{dealer:{required:!0,tsType:{name:"DealerWithScore"},description:""},index:{required:!1,tsType:{name:"number"},description:""},isSelected:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},isHovered:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},onClick:{required:!1,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},onHover:{required:!1,tsType:{name:"signature",type:"function",raw:"(dealer: DealerWithScore | null) => void",signature:{arguments:[{type:{name:"union",raw:"DealerWithScore | null",elements:[{name:"DealerWithScore"},{name:"null"}]},name:"dealer"}],return:{name:"void"}}},description:""},vehicleImage:{required:!1,tsType:{name:"string"},description:""},vehicleName:{required:!1,tsType:{name:"string"},description:""}}};const jn=({dealers:e,center:n,selectedDealerId:a,hoveredDealerId:s,onDealerSelect:o,onDealerHover:l,vehicleImage:i,vehicleName:c})=>{const d=ne();r.useEffect(()=>{d&&d.panTo(n)},[d,n.lat,n.lng]);const g=r.useCallback(h=>{o?.(h),d&&d.panTo({lat:h.lat,lng:h.lng})},[d,o]),m=r.useCallback(h=>{l?.(h)},[l]);return t.jsx(t.Fragment,{children:e.map((h,y)=>t.jsx(Ke,{dealer:h,index:y+1,isSelected:a===h.id,isHovered:s===h.id,onClick:()=>g(h),onHover:m,vehicleImage:i,vehicleName:c},h.id))})},Je=({dealers:e,center:n,selectedDealerId:a,hoveredDealerId:s,onDealerSelect:o,onDealerHover:l,apiKey:i,vehicleImage:c,vehicleName:d,sidebarContent:g,sidebarTitle:m="Dealers",dealerDetailContent:h,isDealerDetailOpen:y=!1,onCloseDealerDetail:w})=>{const[f]=r.useState(null),[u,v]=r.useState(!1),[_,C]=r.useState(!0);return r.useEffect(()=>{const b=()=>{v(!!document.fullscreenElement),document.fullscreenElement&&C(!0)};return document.addEventListener("fullscreenchange",b),document.addEventListener("webkitfullscreenchange",b),()=>{document.removeEventListener("fullscreenchange",b),document.removeEventListener("webkitfullscreenchange",b)}},[]),r.useEffect(()=>{const b=async N=>{if(N.target.closest(".gm-fullscreen-control")){N.preventDefault(),N.stopPropagation();const S=document.querySelector(".google-map-view");try{document.fullscreenElement?await document.exitFullscreen():S&&await S.requestFullscreen()}catch(I){console.error("Fullscreen request failed:",I)}}};return document.addEventListener("click",b,!0),()=>{document.removeEventListener("click",b,!0)}},[]),i?f?t.jsxs("div",{className:"google-map-view google-map-view--error",children:[t.jsx("p",{children:"Unable to load map"}),t.jsx("p",{className:"google-map-view__error-detail",children:f})]}):t.jsxs("div",{className:"google-map-view",children:[t.jsx(Ft,{apiKey:i,onLoad:()=>console.log("Google Maps API loaded"),children:t.jsx(We,{defaultCenter:n,defaultZoom:11,mapId:"dealer-locator-map",gestureHandling:"greedy",disableDefaultUI:!1,zoomControl:!0,mapTypeControl:!1,streetViewControl:!1,fullscreenControl:!0,className:"google-map-view__map",children:t.jsx(jn,{dealers:e,center:n,selectedDealerId:a,hoveredDealerId:s,onDealerSelect:o,onDealerHover:l,vehicleImage:c,vehicleName:d})})}),u&&g&&t.jsxs(t.Fragment,{children:[t.jsxs("button",{className:`dealer-locator__fullscreen-toggle ${_?"dealer-locator__fullscreen-toggle--hidden":""}`,onClick:()=>C(!0),children:[t.jsx(ze,{size:18}),t.jsx("span",{children:"Show Dealers"})]}),t.jsxs("div",{className:`dealer-locator__fullscreen-sidebar ${_?"":"dealer-locator__fullscreen-sidebar--hidden"}`,children:[t.jsxs("div",{className:"dealer-locator__fullscreen-sidebar-header",children:[t.jsx("h3",{className:"dealer-locator__fullscreen-sidebar-title",children:m}),t.jsx("button",{className:"dealer-locator__fullscreen-sidebar-close",onClick:()=>C(!1),"aria-label":"Close sidebar",children:t.jsx(me,{size:18})})]}),t.jsx("div",{className:"dealer-locator__fullscreen-sidebar-content",children:g})]})]}),u&&y&&h&&t.jsxs("div",{className:"dealer-locator__fullscreen-detail",children:[t.jsx("button",{className:"dealer-locator__fullscreen-detail-close",onClick:w,"aria-label":"Close dealer details",children:t.jsx(me,{size:20})}),t.jsx("div",{className:"dealer-locator__fullscreen-detail-content",children:h})]})]}):t.jsx("div",{className:"google-map-view google-map-view--placeholder",children:t.jsxs("div",{className:"google-map-view__placeholder-content",children:[t.jsxs("svg",{width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[t.jsx("path",{d:"M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"}),t.jsx("circle",{cx:"12",cy:"10",r:"3"})]}),t.jsx("p",{children:"Google Maps"}),t.jsx("p",{className:"google-map-view__placeholder-note",children:"Add VITE_GOOGLE_MAPS_API_KEY to enable interactive map"})]})})};Je.__docgenInfo={description:"",methods:[],displayName:"GoogleMapView",props:{dealers:{required:!0,tsType:{name:"Array",elements:[{name:"DealerWithScore"}],raw:"DealerWithScore[]"},description:""},center:{required:!0,tsType:{name:"signature",type:"object",raw:"{ lat: number; lng: number }",signature:{properties:[{key:"lat",value:{name:"number",required:!0}},{key:"lng",value:{name:"number",required:!0}}]}},description:""},selectedDealerId:{required:!1,tsType:{name:"union",raw:"string | null",elements:[{name:"string"},{name:"null"}]},description:""},hoveredDealerId:{required:!1,tsType:{name:"union",raw:"string | null",elements:[{name:"string"},{name:"null"}]},description:""},onDealerSelect:{required:!1,tsType:{name:"signature",type:"function",raw:"(dealer: DealerWithScore) => void",signature:{arguments:[{type:{name:"DealerWithScore"},name:"dealer"}],return:{name:"void"}}},description:""},onDealerHover:{required:!1,tsType:{name:"signature",type:"function",raw:"(dealer: DealerWithScore | null) => void",signature:{arguments:[{type:{name:"union",raw:"DealerWithScore | null",elements:[{name:"DealerWithScore"},{name:"null"}]},name:"dealer"}],return:{name:"void"}}},description:""},apiKey:{required:!1,tsType:{name:"string"},description:""},vehicleImage:{required:!1,tsType:{name:"string"},description:""},vehicleName:{required:!1,tsType:{name:"string"},description:""},sidebarContent:{required:!1,tsType:{name:"ReactNode"},description:""},sidebarTitle:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:"'Dealers'",computed:!1}},dealerDetailContent:{required:!1,tsType:{name:"ReactNode"},description:""},isDealerDetailOpen:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},onCloseDealerDetail:{required:!1,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""}}};const Nn=async e=>{if(!window.google?.maps?.places?.Place){if(window.google?.maps&&window.google.maps.importLibrary)try{await window.google.maps.importLibrary("places");return}catch(n){console.warn("Failed to import places library:",n)}return new Promise((n,a)=>{if(document.querySelector('script[src*="maps.googleapis.com/maps/api/js"]')){const l=setInterval(()=>{window.google?.maps?.places?.Place&&(clearInterval(l),n())},100);setTimeout(()=>{clearInterval(l),n()},5e3);return}const o=document.createElement("script");o.src=`https://maps.googleapis.com/maps/api/js?key=${e}&libraries=places`,o.async=!0,o.defer=!0,o.onload=()=>{const l=setInterval(()=>{window.google?.maps?.places?.Place&&(clearInterval(l),n())},50);setTimeout(()=>{clearInterval(l),n()},2e3)},o.onerror=()=>a(new Error("Failed to load Google Maps")),document.head.appendChild(o)})}},kn=({apiKey:e,debounceMs:n=300})=>{const[a,s]=r.useState([]),[o,l]=r.useState(!1),[i,c]=r.useState(null),[d,g]=r.useState(!1),m=r.useRef(null),h=r.useRef(null);r.useEffect(()=>{Nn(e).then(()=>{m.current=new window.google.maps.Geocoder,g(!0),c(null),console.log("Google Places Autocomplete ready (New API)")}).catch(v=>{console.error("Failed to load Google Places:",v),c(v.message),g(!1)})},[e]);const y=r.useCallback(async v=>{if(h.current&&clearTimeout(h.current),!v.trim()){s([]),l(!1);return}d&&(l(!0),h.current=setTimeout(async()=>{try{const{AutocompleteSuggestion:_}=await window.google.maps.importLibrary("places"),C={input:v,includedPrimaryTypes:["locality","postal_code","administrative_area_level_1"],includedRegionCodes:["us"]},{suggestions:b}=await _.fetchAutocompleteSuggestions(C);l(!1),b&&b.length>0?s(b.map(N=>{const j=N.placePrediction;return{placeId:j.placeId,description:j.text?.text||"",mainText:j.mainText?.text||j.text?.text||"",secondaryText:j.secondaryText?.text||""}})):s([])}catch(_){console.warn("Places autocomplete error:",_),l(!1);try{new window.google.maps.Geocoder().geocode({address:v,componentRestrictions:{country:"US"}},(b,N)=>{N==="OK"&&b&&b.length>0?s(b.slice(0,5).map(j=>({placeId:j.place_id,description:j.formatted_address,mainText:j.formatted_address.split(",")[0],secondaryText:j.formatted_address.split(",").slice(1).join(",").trim()}))):s([])})}catch(C){console.warn("Geocoding fallback error:",C),s([])}}},n))},[d,n]),w=r.useCallback(async v=>{if(!d)throw new Error("Google Places service not ready");try{const{Place:_}=await window.google.maps.importLibrary("places"),C=new _({id:v});await C.fetchFields({fields:["location","formattedAddress","addressComponents"]});const b=C.addressComponents||[];let N="",j="",k="";for(const S of b)S.types.includes("locality")?N=S.longText||S.shortText:S.types.includes("administrative_area_level_1")?j=S.shortText:S.types.includes("postal_code")&&(k=S.longText||S.shortText);return{lat:C.location?.lat()||0,lng:C.location?.lng()||0,formattedAddress:C.formattedAddress||"",city:N,state:j,zipCode:k}}catch(_){return console.warn("New Places API error, falling back to Geocoder:",_),new Promise((C,b)=>{new window.google.maps.Geocoder().geocode({placeId:v},(j,k)=>{if(k==="OK"&&j&&j[0]){const S=j[0],I=S.address_components||[];let D="",M="",E="";for(const L of I)L.types.includes("locality")?D=L.long_name:L.types.includes("administrative_area_level_1")?M=L.short_name:L.types.includes("postal_code")&&(E=L.long_name);C({lat:S.geometry.location.lat(),lng:S.geometry.location.lng(),formattedAddress:S.formatted_address||"",city:D,state:M,zipCode:E})}else b(new Error("Failed to get place details"))})})}},[d]),f=r.useCallback((v,_)=>new Promise((C,b)=>{if(!d||!m.current){b(new Error("Geocoder not ready"));return}m.current.geocode({location:{lat:v,lng:_}},(N,j)=>{if(j==="OK"&&N&&N[0]){const k=N[0],S=k.address_components||[];let I="",D="",M="";for(const L of S)L.types.includes("locality")?I=L.long_name:L.types.includes("administrative_area_level_1")?D=L.short_name:L.types.includes("postal_code")&&(M=L.long_name);let E=k.formatted_address;I&&D&&(E=`${I}, ${D}`),C({lat:v,lng:_,formattedAddress:E,city:I,state:D,zipCode:M})}else b(new Error("Failed to reverse geocode"))})}),[d]),u=r.useCallback(()=>{s([])},[]);return r.useEffect(()=>()=>{h.current&&clearTimeout(h.current)},[]),{predictions:a,isLoading:o,error:i,isReady:d,searchPlaces:y,getPlaceDetails:w,reverseGeocode:f,clearPredictions:u}},Ae="AIzaSyBEQULQb-uUX-MRIOxSOiLqjy0beake1QM",Pe=[{value:"bestDeal",label:"Best Deal"},{value:"distance",label:"Distance"},{value:"price",label:"Lowest Price"},{value:"rating",label:"Highest Rated"}],Sn=({vehicle:e,initialLocation:n={lat:33.6846,lng:-117.8265},initialZipCode:a="Los Angeles, CA",showVehiclePreview:s=!0,defaultView:o="list",maxResults:l=20,cardVariant:i="full",onDealerSelect:c})=>{const[d,g]=r.useState(o),[m,h]=r.useState("bestDeal"),[y,w]=r.useState(null),[f,u]=r.useState(null),[v,_]=r.useState(!1),[C,b]=r.useState(!1),[N,j]=r.useState(a),[k,S]=r.useState(n),[I,D]=r.useState(n),[M,E]=r.useState(!1),[L,$]=r.useState(""),[Ye,be]=r.useState(!1),[R,xe]=r.useState(null),[we,Ce]=r.useState(null),[U,q]=r.useState(!1),[je,ae]=r.useState(!1),[z,V]=r.useState(-1),se=r.useRef(null),Ne=r.useRef(null),{predictions:T,isLoading:Xe,isReady:Qe,searchPlaces:et,getPlaceDetails:tt,reverseGeocode:nt,clearPredictions:K}=kn({apiKey:Ae,debounceMs:300}),A=r.useMemo(()=>{const p=ht(e.make,e.model,k.lat,k.lng,e.msrp,100,e.priceMin,e.priceMax);return gt(p,m).slice(0,l)},[e.make,e.model,e.msrp,e.priceMin,e.priceMax,k.lat,k.lng,m,l]),[ke,oe]=r.useState(!1);r.useEffect(()=>{if(!ke&&A.length>0){const p=A.find(x=>x.dealScore.isBestDeal)||A[0];p&&(D({lat:p.lat,lng:p.lng}),oe(!0))}},[A,ke]);const re=r.useCallback(p=>{w(p),_(!0),c?.(p)},[c]),Se=r.useCallback(p=>{u(p?.id||null),p&&D({lat:p.lat,lng:p.lng})},[]),at=r.useCallback(p=>{u(p?.id||null)},[]),st=p=>{h(p),b(!1)},ot=()=>{$(""),K(),q(!1),V(-1),E(!0),setTimeout(()=>Ne.current?.focus(),100)},rt=p=>{const x=p.target.value;$(x),V(-1),x.trim().length>=2?(et(x),q(!0)):(K(),q(!1))},J=async p=>{try{const x=await tt(p.placeId);S({lat:x.lat,lng:x.lng}),D({lat:x.lat,lng:x.lng}),j(x.formattedAddress),$(""),K(),q(!1),E(!1),oe(!1),console.log("Location updated to:",x.formattedAddress,"Coords:",{lat:x.lat,lng:x.lng})}catch(x){console.error("Error getting place details:",x),alert("Unable to get location details. Please try again.")}},lt=p=>{if(!(!U||T.length===0))switch(p.key){case"ArrowDown":p.preventDefault(),V(x=>x<T.length-1?x+1:x);break;case"ArrowUp":p.preventDefault(),V(x=>x>0?x-1:-1);break;case"Enter":p.preventDefault(),z>=0&&T[z]&&J(T[z]);break;case"Escape":q(!1),K();break}},it=async p=>{if(p.preventDefault(),z>=0&&T[z]){await J(T[z]);return}if(T.length>0){await J(T[0]);return}L.trim()&&alert("Please select a location from the suggestions.")},ct=async()=>{if(!("geolocation"in navigator)){alert("Geolocation is not supported by your browser.");return}ae(!0),navigator.geolocation.getCurrentPosition(async p=>{const{latitude:x,longitude:le}=p.coords,De={lat:x,lng:le};try{if(Qe){const ie=await nt(x,le);j(ie.formattedAddress)}else j("Current Location")}catch(ie){console.error("Reverse geocode failed:",ie),j("Current Location")}S(De),D(De),E(!1),oe(!1),ae(!1),console.log("Using current location:",x,le)},p=>{ae(!1);let x="Unable to get your location.";switch(p.code){case p.PERMISSION_DENIED:x="Location access was denied. Please enable location permissions in your browser settings.";break;case p.POSITION_UNAVAILABLE:x="Location information is unavailable.";break;case p.TIMEOUT:x="Location request timed out. Please try again.";break}alert(x)},{enableHighAccuracy:!0,timeout:1e4,maximumAge:3e5})};r.useEffect(()=>{const p=x=>{se.current&&!se.current.contains(x.target)&&q(!1)};return U&&document.addEventListener("mousedown",p),()=>{document.removeEventListener("mousedown",p)}},[U]);const Ee=r.useCallback((p,x)=>{Ce(p),xe(x),be(!0)},[]),dt=r.useCallback(p=>{console.log("Offer submitted:",p)},[]),ut=A.reduce((p,x)=>p+x.inventoryCount,0);return t.jsxs("div",{className:"dealer-locator",children:[s&&t.jsx(pe,{vehicle:e}),t.jsxs("div",{className:"dealer-locator__toolbar",children:[t.jsxs("div",{className:"dealer-locator__location",children:[t.jsx(Q,{size:16}),t.jsx("span",{children:N}),t.jsx("button",{className:"dealer-locator__change-location",onClick:ot,children:"Change"})]}),t.jsxs("div",{className:"dealer-locator__sort",children:[t.jsx("span",{className:"dealer-locator__sort-label",children:"Sort:"}),t.jsxs("div",{className:"dealer-locator__sort-dropdown",children:[t.jsxs("button",{className:"dealer-locator__sort-trigger",onClick:()=>b(!C),"aria-expanded":C,"aria-haspopup":"listbox",children:[Pe.find(p=>p.value===m)?.label,t.jsx(Ct,{size:16,className:C?"rotated":""})]}),C&&t.jsx("ul",{className:"dealer-locator__sort-options",role:"listbox",children:Pe.map(p=>t.jsx("li",{children:t.jsx("button",{className:`dealer-locator__sort-option ${m===p.value?"active":""}`,onClick:()=>st(p.value),role:"option","aria-selected":m===p.value,children:p.label})},p.value))})]})]})]}),t.jsxs("div",{className:"dealer-locator__view-toggle",children:[t.jsxs("button",{className:`dealer-locator__view-btn ${d==="list"?"active":""}`,onClick:()=>g("list"),"aria-pressed":d==="list",children:[t.jsx(ze,{size:18}),t.jsx("span",{children:"List"})]}),t.jsxs("button",{className:`dealer-locator__view-btn ${d==="map"?"active":""}`,onClick:()=>g("map"),"aria-pressed":d==="map",children:[t.jsx(Mt,{size:18}),t.jsx("span",{children:"Map"})]})]}),t.jsx("div",{className:"dealer-locator__summary",children:t.jsxs("span",{className:"dealer-locator__count",children:[A.length," dealers · ",ut," ",e.model," in stock"]})}),t.jsxs("div",{className:`dealer-locator__content ${v?"dealer-locator__content--panel-open":""}`,children:[t.jsx("div",{className:`dealer-locator__list ${d==="map"?"dealer-locator__list--hidden-mobile":""} ${v?"dealer-locator__list--panel-open":""}`,children:A.length===0?t.jsxs("div",{className:"dealer-locator__empty",children:[t.jsx("p",{children:"No dealers found in your area."}),t.jsx("p",{children:"Try expanding your search radius or changing your location."})]}):t.jsx("ul",{className:`dealer-locator__dealers ${i==="compact"?"dealer-locator__dealers--compact":""}`,role:"list",children:A.map((p,x)=>t.jsx("li",{children:t.jsx(he,{dealer:p,vehicleModel:e.model,index:x+1,isSelected:y?.id===p.id,isHovered:f===p.id,variant:i,onSelect:re,onHover:Se})},p.id))})}),t.jsx("div",{className:`dealer-locator__map ${d==="list"?"dealer-locator__map--hidden-mobile":""} ${v?"dealer-locator__map--panel-open":""}`,children:t.jsx(Je,{dealers:A,center:I,selectedDealerId:y?.id,hoveredDealerId:f,onDealerSelect:re,onDealerHover:at,apiKey:Ae,vehicleImage:e.image,vehicleName:`${e.year} ${e.make} ${e.model}`,sidebarTitle:`${A.length} Dealers Near You`,sidebarContent:A.length===0?t.jsx("div",{className:"dealer-locator__empty",children:t.jsx("p",{children:"No dealers found in your area."})}):t.jsx("ul",{className:`dealer-locator__dealers ${i==="compact"?"dealer-locator__dealers--compact":""}`,role:"list",children:A.map((p,x)=>t.jsx("li",{children:t.jsx(he,{dealer:p,vehicleModel:e.model,index:x+1,isSelected:y?.id===p.id,isHovered:f===p.id,variant:i,onSelect:re,onHover:Se})},p.id))}),isDealerDetailOpen:v,onCloseDealerDetail:()=>{_(!1),w(null)},dealerDetailContent:y?t.jsx(ye,{dealer:y,vehicleModel:e.model,onMakeOffer:Ee}):null})}),y&&t.jsx($e,{dealer:y,vehicleModel:e.model,isOpen:v,onClose:()=>{_(!1),w(null)},onMakeOffer:Ee})]}),we&&R&&t.jsx(wt,{isOpen:Ye,onClose:()=>{be(!1),Ce(null),xe(null)},dealer:we,vehicle:{year:R.year,make:R.make,model:R.model,trim:R.trim,msrp:R.price},onSubmitOffer:dt}),t.jsx("div",{className:"dealer-locator__sticky-header",children:t.jsx(pe,{vehicle:e,variant:"compact"})}),M&&t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"location-modal__backdrop",onClick:()=>E(!1)}),t.jsxs("div",{className:"location-modal",role:"dialog","aria-modal":"true","aria-labelledby":"location-modal-title",children:[t.jsx("h3",{id:"location-modal-title",className:"location-modal__title",children:"Change Location"}),t.jsxs("form",{onSubmit:it,className:"location-modal__form",children:[t.jsx("label",{htmlFor:"location-input",className:"location-modal__label",children:"Enter city, state or ZIP code"}),t.jsxs("div",{className:"location-modal__input-wrapper",ref:se,children:[t.jsx("input",{ref:Ne,id:"location-input",type:"text",className:"location-modal__input",value:L,onChange:rt,onKeyDown:lt,onFocus:()=>{T.length>0&&q(!0)},placeholder:"e.g., Miami, FL or 33101",autoComplete:"off","aria-autocomplete":"list","aria-controls":"location-autocomplete-list","aria-expanded":U&&T.length>0}),Xe&&t.jsx("div",{className:"location-modal__input-loader",children:t.jsx(Me,{size:18,className:"spinning"})}),U&&T.length>0&&t.jsx("ul",{id:"location-autocomplete-list",className:"location-modal__autocomplete",role:"listbox",children:T.map((p,x)=>t.jsxs("li",{role:"option","aria-selected":x===z,className:`location-modal__autocomplete-item ${x===z?"location-modal__autocomplete-item--selected":""}`,onClick:()=>J(p),onMouseEnter:()=>V(x),children:[t.jsx(Q,{size:16,className:"location-modal__autocomplete-icon"}),t.jsxs("div",{className:"location-modal__autocomplete-text",children:[t.jsx("span",{className:"location-modal__autocomplete-main",children:p.mainText}),p.secondaryText&&t.jsx("span",{className:"location-modal__autocomplete-secondary",children:p.secondaryText})]})]},p.placeId))})]}),t.jsx("button",{type:"submit",className:"location-modal__submit",disabled:T.length===0&&L.trim().length>0,children:"Update Location"})]}),t.jsx("div",{className:"location-modal__divider",children:t.jsx("span",{children:"or"})}),t.jsx("button",{type:"button",className:"location-modal__current",onClick:ct,disabled:je,children:je?t.jsxs(t.Fragment,{children:[t.jsx(Me,{size:18,className:"spinning"}),"Getting location..."]}):t.jsxs(t.Fragment,{children:[t.jsx(ee,{size:18}),"Use my current location"]})}),t.jsx("button",{type:"button",className:"location-modal__close",onClick:()=>E(!1),"aria-label":"Close",children:"✕"})]})]})]})};Sn.__docgenInfo={description:"",methods:[],displayName:"DealerLocatorMap",props:{vehicle:{required:!0,tsType:{name:"VehicleInfo"},description:""},initialLocation:{required:!1,tsType:{name:"signature",type:"object",raw:"{ lat: number; lng: number }",signature:{properties:[{key:"lat",value:{name:"number",required:!0}},{key:"lng",value:{name:"number",required:!0}}]}},description:"",defaultValue:{value:"{ lat: 33.6846, lng: -117.8265 }",computed:!1}},initialZipCode:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:"'Los Angeles, CA'",computed:!1}},showVehiclePreview:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"true",computed:!1}},defaultView:{required:!1,tsType:{name:"union",raw:"'map' | 'list'",elements:[{name:"literal",value:"'map'"},{name:"literal",value:"'list'"}]},description:"",defaultValue:{value:"'list'",computed:!1}},maxResults:{required:!1,tsType:{name:"number"},description:"",defaultValue:{value:"20",computed:!1}},cardVariant:{required:!1,tsType:{name:"union",raw:"'full' | 'compact'",elements:[{name:"literal",value:"'full'"},{name:"literal",value:"'compact'"}]},description:"",defaultValue:{value:"'full'",computed:!1}},onDealerSelect:{required:!1,tsType:{name:"signature",type:"function",raw:"(dealer: DealerWithScore) => void",signature:{arguments:[{type:{name:"DealerWithScore"},name:"dealer"}],return:{name:"void"}}},description:""}}};export{W as A,Sn as D,pe as V,he as a};
