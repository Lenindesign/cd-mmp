import{u as te,r as i,j as e,L as x,k as ie,d as ne}from"./iframe-CCFupnSY.js";import{i as ce,s as de}from"./vehicleService-BNfwZwSS.js";import{u as oe,g as he}from"./useSupabaseRating-pmYcSgSv.js";import{v as j,a as U,c as me,s as ee}from"./index-CR0fvk7o.js";import{B as ue}from"./Button-wnQ2yPJ0.js";import{E as _e}from"./ExitIntentModal-D52mMFTR.js";import{O as D}from"./OptimizedImage-C2XF64Z7.js";import{C as se}from"./clock-0-deK0lu.js";import{B as M}from"./bookmark-S8CeA12s.js";import{C as W}from"./car-C53QNlYQ.js";import{X as P}from"./x-BqMiASkc.js";import{c as X}from"./createLucideIcon-CunauoQi.js";import{C as ae}from"./chevron-right-uUcWZozj.js";import{S as F}from"./search-D4MMLr2W.js";import{P as B}from"./plus-RQQwJ5zt.js";import{U as ve}from"./user-BoV0J9rL.js";const ge=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],xe=X("log-out",ge);const pe=[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]],be=X("menu",pe);const je=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],fe=X("trash-2",je),Ne=(t,l)=>j.find(n=>n.make===t&&n.model===l),we={"avatar-family":{make:"Honda",model:"Pilot",fallback:ee},"avatar-adventure":{make:"Jeep",model:"Wrangler",fallback:ee},"avatar-luxury":{make:"Mercedes-Benz",model:"S-Class",fallback:U},"avatar-eco-friendly":{make:"Tesla",model:"Model 3",fallback:U},"avatar-performance":{make:"Porsche",model:"911",fallback:me},"avatar-commuter":{make:"Toyota",model:"Camry",fallback:U},"avatar-value":{make:"Honda",model:"Civic",fallback:U}},T=t=>{if(!t||t==="initials")return null;const l=we[t];return l&&(Ne(l.make,l.model)||l.fallback[0])?.image||null},re=t=>{if(!t)return"U";const l=t.split(" ");return l.length>=2?`${l[0][0]}${l[1][0]}`.toUpperCase():l[0].substring(0,2).toUpperCase()},Z="recentlyViewedVehicles",ye=20,Ce=()=>{try{const t=localStorage.getItem(Z);return t?JSON.parse(t):[]}catch{return[]}},Pe=t=>{try{const l=Ce(),n={id:t.id,name:`${t.year} ${t.make} ${t.model}`,slug:t.slug,image:t.image,price:t.priceMin,mileage:t.mileage,viewedAt:new Date().toISOString()},f=l.filter(_=>_.id!==t.id&&_.slug!==t.slug),w=[n,...f].slice(0,ye);localStorage.setItem(Z,JSON.stringify(w))}catch(l){console.error("Error saving recently viewed vehicle:",l)}},Se=()=>{try{localStorage.removeItem(Z)}catch(t){console.error("Error clearing recently viewed vehicles:",t)}},le=({isOpen:t,onClose:l})=>{const{user:n,addSavedVehicle:f,removeSavedVehicle:w}=te(),[_,G]=i.useState("recently-viewed"),[u,N]=i.useState([]),[p,R]=i.useState(!1),[y,v]=i.useState(!1),[C,S]=i.useState(""),[E,I]=i.useState(""),[k,b]=i.useState([]),[O,V]=i.useState([]),$=i.useRef(null),z=i.useRef(null);i.useEffect(()=>{const s=localStorage.getItem("recentlyViewedVehicles");if(s)try{const a=JSON.parse(s);N(a.slice(0,10))}catch{N([])}},[t]);const Q=()=>{Se(),N([])},H=s=>{const a=s.split(" ");if(a.length>=1&&/^\d{4}$/.test(a[0])&&a.length>=3){const d=parseInt(a[0]),c=a[1],m=a.slice(2).join(" ");let o=j.find(h=>Number(h.year)===d&&h.make.toLowerCase()===c.toLowerCase()&&h.model.toLowerCase()===m.toLowerCase());return o||(o=j.find(h=>h.make.toLowerCase()===c.toLowerCase()&&h.model.toLowerCase()===m.toLowerCase())),o||(o=j.find(h=>h.make.toLowerCase()===c.toLowerCase()&&(h.model.toLowerCase().includes(m.toLowerCase())||m.toLowerCase().includes(h.model.toLowerCase())))),o}else if(a.length>=2){const d=a[0],c=a.slice(1).join(" ");let m=j.find(o=>o.make.toLowerCase()===d.toLowerCase()&&o.model.toLowerCase()===c.toLowerCase());if(m||(m=j.find(o=>o.make.toLowerCase()===d.toLowerCase()&&(o.model.toLowerCase().includes(c.toLowerCase())||c.toLowerCase().includes(o.model.toLowerCase())))),!m){const o=s.toLowerCase();m=j.find(h=>`${h.make} ${h.model}`.toLowerCase().includes(o)||o.includes(`${h.make} ${h.model}`.toLowerCase()))}return m}return null},g=n?.savedVehicles?.filter(s=>s.ownership==="want")||[],L=n?.savedVehicles?.filter(s=>s.ownership==="own")||[],q=s=>{const a=s.target.value;if(S(a),a.length>=2){const r=j.filter(d=>`${d.year} ${d.make} ${d.model}`.toLowerCase().includes(a.toLowerCase())).slice(0,6);b(r)}else b([])},J=s=>{const a=s.target.value;if(I(a),a.length>=2){const r=j.filter(d=>`${d.year} ${d.make} ${d.model}`.toLowerCase().includes(a.toLowerCase())).slice(0,6);V(r)}else V([])},Y=s=>{f({id:`own-${s.id}`,name:`${s.year} ${s.make} ${s.model}`,ownership:"own",savedAt:new Date().toISOString()}),S(""),b([]),R(!1)},K=s=>{f({id:`want-${s.id}`,name:`${s.year} ${s.make} ${s.model}`,ownership:"want",savedAt:new Date().toISOString()}),I(""),V([]),v(!1)};if(i.useEffect(()=>{p&&$.current&&$.current.focus()},[p]),i.useEffect(()=>{y&&z.current&&z.current.focus()},[y]),i.useEffect(()=>{const s=a=>{a.key==="Escape"&&l()};return t&&(document.addEventListener("keydown",s),document.body.style.overflow="hidden"),()=>{document.removeEventListener("keydown",s),document.body.style.overflow=""}},[t,l]),!t)return null;const A=[{id:"recently-viewed",label:"Recently Viewed",icon:e.jsx(se,{size:16}),count:u.length},{id:"want",label:"Cars I Want",icon:e.jsx(M,{size:16}),count:g.length},{id:"own",label:"Cars I Own",icon:e.jsx(W,{size:16}),count:L.length}];return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"saved-sidebar__overlay",onClick:l}),e.jsxs("aside",{className:"saved-sidebar",role:"dialog","aria-label":"Saved vehicles",children:[e.jsxs("div",{className:"saved-sidebar__header",children:[e.jsxs("div",{className:"saved-sidebar__header-content",children:[e.jsx(M,{size:20,fill:"currentColor",className:"saved-sidebar__header-icon"}),e.jsx("h2",{className:"saved-sidebar__title",children:"My Garage"})]}),e.jsx("button",{className:"saved-sidebar__close",onClick:l,"aria-label":"Close sidebar",children:e.jsx(P,{size:24})})]}),e.jsxs("div",{className:"saved-sidebar__welcome",children:[e.jsx("span",{className:"saved-sidebar__welcome-text",children:"Welcome!"}),e.jsx("p",{className:"saved-sidebar__welcome-desc",children:"Here are the cars you've viewed, followed or own."})]}),e.jsx("div",{className:"saved-sidebar__tabs",children:A.map(s=>e.jsxs("button",{className:`saved-sidebar__tab ${_===s.id?"saved-sidebar__tab--active":""}`,onClick:()=>G(s.id),children:[s.icon,e.jsx("span",{children:s.label}),s.count>0&&e.jsx("span",{className:"saved-sidebar__tab-count",children:s.count})]},s.id))}),e.jsxs("div",{className:"saved-sidebar__content",children:[_==="recently-viewed"&&e.jsx("div",{className:"saved-sidebar__section",children:u.length>0?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"saved-sidebar__section-header",children:[e.jsxs("span",{className:"saved-sidebar__section-title",children:["Recently Viewed (",u.length,")"]}),e.jsxs("div",{className:"saved-sidebar__section-actions",children:[e.jsxs("button",{className:"saved-sidebar__clear-btn",onClick:Q,title:"Clear recently viewed",children:[e.jsx(fe,{size:14}),"Clear"]}),e.jsxs(x,{to:"/vehicles",className:"saved-sidebar__section-link",onClick:l,children:["Shop Now ",e.jsx(ae,{size:14})]})]})]}),e.jsx("div",{className:"saved-sidebar__vehicles",children:u.map((s,a)=>e.jsxs(x,{to:`/${s.slug}`,className:"saved-sidebar__vehicle",onClick:l,children:[e.jsx("div",{className:"saved-sidebar__vehicle-image",children:e.jsx(D,{src:s.image,alt:s.name,width:80,height:60})}),e.jsxs("div",{className:"saved-sidebar__vehicle-info",children:[e.jsx("span",{className:"saved-sidebar__vehicle-name",children:s.name}),e.jsxs("span",{className:"saved-sidebar__vehicle-price",children:["$",s.price.toLocaleString(),s.mileage&&e.jsxs("span",{className:"saved-sidebar__vehicle-mileage",children:["â€¢ ",s.mileage.toLocaleString()," mi"]})]})]}),e.jsx("button",{className:`saved-sidebar__vehicle-favorite ${n?.savedVehicles?.some(r=>r.name===s.name)?"saved-sidebar__vehicle-favorite--active":""}`,onClick:r=>{if(r.preventDefault(),r.stopPropagation(),n?.savedVehicles?.some(c=>c.name===s.name)){const c=n?.savedVehicles?.find(m=>m.name===s.name);c&&w(c.id)}else f({id:`want-${s.id}-${Date.now()}`,name:s.name,ownership:"want",savedAt:new Date().toISOString()})},"aria-label":n?.savedVehicles?.some(r=>r.name===s.name)?"Remove from saved":"Save vehicle",children:e.jsx(M,{size:18,fill:n?.savedVehicles?.some(r=>r.name===s.name)?"currentColor":"none"})})]},`${s.id}-${a}`))})]}):e.jsxs("div",{className:"saved-sidebar__empty",children:[e.jsx(se,{size:48,className:"saved-sidebar__empty-icon"}),e.jsx("h3",{className:"saved-sidebar__empty-title",children:"No recently viewed"}),e.jsx("p",{className:"saved-sidebar__empty-desc",children:"Start browsing vehicles and they'll appear here."}),e.jsx(x,{to:"/vehicles",className:"saved-sidebar__empty-cta",onClick:l,children:"Browse Vehicles"})]})}),_==="want"&&e.jsxs("div",{className:"saved-sidebar__section",children:[g.length>0?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"saved-sidebar__section-header",children:e.jsxs("span",{className:"saved-sidebar__section-title",children:["Cars I Want (",g.length,")"]})}),e.jsx("div",{className:"saved-sidebar__vehicles",children:g.map(s=>{const a=H(s.name);return e.jsxs(x,{to:a?`/${a.slug}`:"/vehicles",className:"saved-sidebar__vehicle",onClick:l,children:[e.jsx("div",{className:"saved-sidebar__vehicle-image",children:a?.image?e.jsx(D,{src:a.image,alt:s.name,width:80,height:60}):e.jsx("div",{className:"saved-sidebar__vehicle-placeholder",children:e.jsx(W,{size:24})})}),e.jsxs("div",{className:"saved-sidebar__vehicle-info",children:[e.jsx("span",{className:"saved-sidebar__vehicle-name",children:s.name}),a&&e.jsxs("span",{className:"saved-sidebar__vehicle-price",children:["Starting at $",a.priceMin.toLocaleString()]})]}),e.jsx("button",{className:"saved-sidebar__vehicle-unsave",onClick:r=>{r.preventDefault(),r.stopPropagation(),w(s.id)},"aria-label":"Remove from saved",title:"Remove from saved",children:e.jsx(M,{size:18,fill:"currentColor"})})]},s.id)})})]}):!y&&e.jsxs("div",{className:"saved-sidebar__empty",children:[e.jsx(M,{size:48,className:"saved-sidebar__empty-icon"}),e.jsx("h3",{className:"saved-sidebar__empty-title",children:"No saved vehicles"}),e.jsx("p",{className:"saved-sidebar__empty-desc",children:'Use the "Add a Vehicle" button below to search and save vehicles you want.'}),e.jsxs(x,{to:"/vehicles",className:"saved-sidebar__empty-cta",onClick:l,children:["Browse All Vehicles ",e.jsx(ae,{size:16})]})]}),y?e.jsxs("div",{className:"saved-sidebar__add-vehicle",children:[e.jsxs("div",{className:"saved-sidebar__search-wrapper",children:[e.jsx(F,{size:18,className:"saved-sidebar__search-icon"}),e.jsx("input",{ref:z,type:"text",className:"saved-sidebar__search-input",placeholder:"Search by year, make, or model...",value:E,onChange:J}),e.jsx("button",{className:"saved-sidebar__search-close",onClick:()=>{v(!1),I(""),V([])},children:e.jsx(P,{size:18})})]}),O.length>0&&e.jsx("div",{className:"saved-sidebar__search-results",children:O.map(s=>e.jsxs("button",{className:"saved-sidebar__search-result",onClick:()=>K(s),children:[e.jsx("div",{className:"saved-sidebar__search-result-image",children:e.jsx(D,{src:s.image,alt:`${s.year} ${s.make} ${s.model}`,width:60,height:45})}),e.jsxs("div",{className:"saved-sidebar__search-result-info",children:[e.jsxs("span",{className:"saved-sidebar__search-result-name",children:[s.year," ",s.make," ",s.model]}),e.jsxs("span",{className:"saved-sidebar__search-result-price",children:["$",s.priceMin.toLocaleString()," - $",s.priceMax.toLocaleString()]})]}),e.jsx(B,{size:18,className:"saved-sidebar__search-result-add"})]},s.id))}),E.length>=2&&O.length===0&&e.jsxs("div",{className:"saved-sidebar__search-no-results",children:['No vehicles found for "',E,'"']})]}):e.jsxs("button",{className:"saved-sidebar__add-btn",onClick:()=>v(!0),children:[e.jsx(B,{size:18}),e.jsx("span",{children:"Add a Vehicle"})]})]}),_==="own"&&e.jsxs("div",{className:"saved-sidebar__section",children:[L.length>0&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"saved-sidebar__section-header",children:e.jsxs("span",{className:"saved-sidebar__section-title",children:["Cars I Own (",L.length,")"]})}),e.jsx("div",{className:"saved-sidebar__vehicles",children:L.map(s=>{const a=H(s.name);return e.jsxs(x,{to:a?`/${a.slug}`:"/vehicles",className:"saved-sidebar__vehicle",onClick:l,children:[e.jsx("div",{className:"saved-sidebar__vehicle-image",children:a?.image?e.jsx(D,{src:a.image,alt:s.name,width:80,height:60}):e.jsx("div",{className:"saved-sidebar__vehicle-placeholder",children:e.jsx(W,{size:24})})}),e.jsxs("div",{className:"saved-sidebar__vehicle-info",children:[e.jsx("span",{className:"saved-sidebar__vehicle-name",children:s.name}),a&&e.jsxs("span",{className:"saved-sidebar__vehicle-price",children:["Starting at $",a.priceMin.toLocaleString()]})]}),e.jsx("button",{className:"saved-sidebar__vehicle-unsave",onClick:r=>{r.preventDefault(),r.stopPropagation(),w(s.id)},"aria-label":"Remove from saved",title:"Remove from saved",children:e.jsx(M,{size:18,fill:"currentColor"})})]},s.id)})})]}),L.length===0&&!p&&e.jsxs("div",{className:"saved-sidebar__empty",children:[e.jsx(W,{size:48,className:"saved-sidebar__empty-icon"}),e.jsx("h3",{className:"saved-sidebar__empty-title",children:"No vehicles added"}),e.jsx("p",{className:"saved-sidebar__empty-desc",children:'Use the "Add a Vehicle" button below to add cars you own.'})]}),p?e.jsxs("div",{className:"saved-sidebar__add-vehicle",children:[e.jsxs("div",{className:"saved-sidebar__search-wrapper",children:[e.jsx(F,{size:18,className:"saved-sidebar__search-icon"}),e.jsx("input",{ref:$,type:"text",className:"saved-sidebar__search-input",placeholder:"Search by year, make, or model...",value:C,onChange:q}),e.jsx("button",{className:"saved-sidebar__search-close",onClick:()=>{R(!1),S(""),b([])},children:e.jsx(P,{size:18})})]}),k.length>0&&e.jsx("div",{className:"saved-sidebar__search-results",children:k.map(s=>e.jsxs("button",{className:"saved-sidebar__search-result",onClick:()=>Y(s),children:[e.jsx("div",{className:"saved-sidebar__search-result-image",children:e.jsx(D,{src:s.image,alt:`${s.year} ${s.make} ${s.model}`,width:60,height:45})}),e.jsxs("div",{className:"saved-sidebar__search-result-info",children:[e.jsxs("span",{className:"saved-sidebar__search-result-name",children:[s.year," ",s.make," ",s.model]}),e.jsxs("span",{className:"saved-sidebar__search-result-price",children:["$",s.priceMin.toLocaleString()," - $",s.priceMax.toLocaleString()]})]}),e.jsx(B,{size:18,className:"saved-sidebar__search-result-add"})]},s.id))}),C.length>=2&&k.length===0&&e.jsxs("div",{className:"saved-sidebar__search-no-results",children:['No vehicles found for "',C,'"']})]}):e.jsxs("button",{className:"saved-sidebar__add-btn",onClick:()=>R(!0),children:[e.jsx(B,{size:18}),e.jsx("span",{children:"Add a Vehicle"})]})]})]}),e.jsx("div",{className:"saved-sidebar__footer",children:e.jsx(x,{to:"/account?tab=saved",className:"saved-sidebar__footer-btn",onClick:l,children:"View All Saved"})})]})]})};le.__docgenInfo={description:"",methods:[],displayName:"SavedVehiclesSidebar",props:{isOpen:{required:!0,tsType:{name:"boolean"},description:""},onClose:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""}}};const ke=()=>{const t=ie(),l=ne(),{user:n,isAuthenticated:f,signOut:w}=te(),[_,G]=i.useState(!1),[u,N]=i.useState(""),[p,R]=i.useState([]),[y,v]=i.useState(!1),[C,S]=i.useState(-1),[E,I]=i.useState(!1),[k,b]=i.useState(!1),[O,V]=i.useState(!1),$=i.useRef(null),z=i.useRef(null),{getRating:Q}=oe(),H="https://d2kde5ohu8qb21.cloudfront.net/files/659f9ed490e84500088bd486/012-2024-lamborghini-revuelto.jpg",g=i.useMemo(()=>{const a=t.pathname.match(/^\/(\d{4})\/([^/]+)\/([^/]+)/);if(a){const[,r,d,c]=a,m=`${r}/${d}/${c}`;return ce(m)}return null},[t.pathname]),L=g?.image||(g?H:void 0),q=a=>Q(a.id,he(a.bodyStyle),a.staffRating),J=[{label:"Browse All Vehicles",href:"/vehicles",isRoute:!0},{label:"Shop New Cars",href:"/",isRoute:!0},{label:"Shop Used Cars",href:"/used-cars",isRoute:!0},{label:"Research Cars",href:"#"},{label:"Expert Reviews",href:"#"},{label:"What's My Car Worth?",href:"#"},{label:"News + Stories",href:"#"}];i.useEffect(()=>{if(u.trim().length>=2){const a=de(u).slice(0,8);R(a),v(!0)}else R([]),v(!1);S(-1)},[u]),i.useEffect(()=>{const a=r=>{$.current&&!$.current.contains(r.target)&&v(!1),z.current&&!z.current.contains(r.target)&&b(!1)};return document.addEventListener("mousedown",a),()=>document.removeEventListener("mousedown",a)},[]);const Y=async()=>{await w(),b(!1),l("/")},K=a=>{a.preventDefault(),u.trim()&&(l(`/vehicles?search=${encodeURIComponent(u.trim())}`),N(""),v(!1))},A=a=>{l(`/${a.slug}`),N(""),v(!1)},s=a=>{!y||p.length===0||(a.key==="ArrowDown"?(a.preventDefault(),S(r=>r<p.length-1?r+1:r)):a.key==="ArrowUp"?(a.preventDefault(),S(r=>r>0?r-1:-1)):a.key==="Enter"&&C>=0?(a.preventDefault(),A(p[C])):a.key==="Escape"&&v(!1))};return e.jsxs("header",{className:"header",children:[e.jsxs("div",{className:"header__container",children:[e.jsxs("div",{className:"header__top",children:[e.jsx("button",{className:"header__mobile-menu-btn",onClick:()=>G(!_),"aria-label":_?"Close menu":"Open menu",children:_?e.jsx(P,{size:24}):e.jsx(be,{size:24})}),e.jsx(x,{to:"/",className:"header__logo","aria-label":"Car and Driver Home",children:e.jsxs("svg",{viewBox:"0 0 1364 263",className:"header__logo-svg",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("path",{className:"header__logo-letter",fill:"currentColor",d:"M76.91 198.564c0 7.861-2.052 13.33-8.888 13.33-7.176 0-9.57-4.787-9.57-13.33V62.862c0-8.887 2.05-12.647 9.23-12.647 7.176 0 9.228 4.445 9.228 12.647v39.308h55.716V60.466c0-33.495-15.038-59.473-60.158-59.473H62.213C16.408.993 0 29.705 0 66.282v129.207c0 38.966 15.04 67.334 62.554 67.334h9.914c44.435 0 60.158-30.42 60.158-62.554v-52.635H76.91z"}),e.jsx("path",{className:"header__logo-letter",fill:"currentColor",d:"M217.63 258.722h54.694l-35.55-254.31h-69.39l-32.473 254.31h48.88l3.76-37.259h25.979zM200.54 93.968l7.862 77.248H192.68z"}),e.jsx("path",{className:"header__logo-letter",fill:"currentColor",d:"M334.666 48.162h8.205c7.52 0 9.229 3.076 9.229 11.966v34.178c0 8.89-3.079 12.31-10.255 12.31h-7.18zm0 106.308h7.861c7.52 0 9.573 3.76 9.573 12.304v73.835c0 9.228 2.049 15.038 4.442 18.113h55.716v-1.708c-1.708-3.42-3.416-8.89-3.416-18.46V154.47c0-19.146-12.648-29.397-22.218-33.158 9.91-4.445 22.218-15.04 22.218-38.625V49.186c0-30.077-17.09-44.774-42.045-44.774h-88.53v254.31h56.399z"}),e.jsx("path",{className:"header__logo-bar",d:"M428.499 64.016h166.27V4.609H428.5z",fill:"#d2232a"}),e.jsx("path",{className:"header__logo-bar",d:"M428.499 258.039h166.27v-59.402H428.5z",fill:"#0061af"}),e.jsx("path",{className:"header__logo-letter",fill:"currentColor",d:"M453.644 183.665h19.441L468.018 78.982h-25.422L430.7 183.665h17.907l1.38-15.34h10.11zm-6.856-70.79 3.476 35.957h-6.354zm32.232-33.893v104.683h17.907V129.07l12.271 54.594h18.158V78.982h-17.658v50.651l-10.644-50.651zm57.382 104.683h29.679c12.145 0 18.532-7.742 18.532-24.063V102.06c0-16.743-7.138-23.08-18.658-23.08h-29.553zm19.819-85.263h3.724c2.755 0 3.632 1.825 3.632 6.05v52.76c0 4.36-.877 6.33-3.883 6.33h-3.473z"}),e.jsx("path",{className:"header__logo-letter",fill:"currentColor",d:"M615.674 258.722h81.008c33.157 0 50.592-18.801 50.592-58.453V60.466c0-40.671-19.484-56.054-50.933-56.054h-80.667zm55.715-207.14h8.544c7.52 0 9.914 4.445 9.914 14.7v128.18c0 10.596-2.393 15.383-10.596 15.383h-7.862z"}),e.jsx("path",{className:"header__logo-letter",fill:"currentColor",d:"M813.307 48.162h8.203c7.52 0 9.228 3.076 9.228 11.966v34.178c0 8.89-3.075 12.31-10.255 12.31h-7.176zm0 106.308h7.862c7.52 0 9.57 3.76 9.57 12.304v73.835c0 9.228 2.051 15.038 4.444 18.113H890.9v-1.708c-1.708-3.42-3.419-8.89-3.419-18.46V154.47c0-19.146-12.648-29.397-22.217-33.158 9.913-4.445 22.217-15.04 22.217-38.625V49.186c0-30.077-17.087-44.774-42.042-44.774h-88.532v254.31h56.401z"}),e.jsx("path",{className:"header__logo-letter",fill:"currentColor",d:"M900.092 258.722h56.4V4.412h-56.4z"}),e.jsx("path",{className:"header__logo-letter",fill:"currentColor",d:"M999.319 258.719h73.832l34.186-254.31h-54.349l-15.385 159.286-15.382-159.286h-59.473z"}),e.jsx("path",{className:"header__logo-letter",fill:"currentColor",d:"M1113.586 4.412v254.31h107.674v-53.664h-51.958V154.47h39.996v-54.008h-39.996V57.05h49.906V4.412z"}),e.jsx("path",{className:"header__logo-letter",fill:"currentColor",d:"M1285.454 48.162h8.2c7.52 0 9.228 3.076 9.228 11.966v34.178c0 8.89-3.075 12.31-10.255 12.31h-7.173zm0 106.308h7.859c7.52 0 9.57 3.76 9.57 12.304v73.835c0 9.228 2.051 15.038 4.444 18.113h55.716v-1.708c-1.708-3.42-3.419-8.89-3.419-18.46V154.47c0-19.146-12.645-29.397-22.217-33.158 9.913-4.445 22.217-15.04 22.217-38.625V49.186c0-30.077-17.087-44.774-42.042-44.774h-88.532v254.31h56.404z"})]})}),e.jsxs("form",{className:"header__search-bar",onSubmit:K,ref:$,children:[e.jsx("input",{type:"text",className:"header__search-input",placeholder:"Search vehicles...",value:u,onChange:a=>N(a.target.value),onKeyDown:s,onFocus:()=>u.trim().length>=2&&v(!0)}),e.jsx("button",{type:"submit",className:"header__search-btn","aria-label":"Search",children:e.jsx(F,{size:20})}),y&&p.length>0&&e.jsxs("div",{className:"header__suggestions",children:[p.map((a,r)=>e.jsxs("div",{className:`header__suggestion ${r===C?"header__suggestion--active":""}`,children:[e.jsx("img",{src:a.image||"/placeholder-car.png",alt:`${a.make} ${a.model}`,className:"header__suggestion-image",onClick:()=>A(a)}),e.jsxs("div",{className:"header__suggestion-info",onClick:()=>A(a),children:[e.jsxs("span",{className:"header__suggestion-name",children:[a.year," ",a.make," ",a.model]}),e.jsx("span",{className:"header__suggestion-price",children:a.priceRange})]}),e.jsxs("span",{className:"header__suggestion-rating",children:[e.jsx("span",{className:"header__suggestion-rating-score",children:q(a)}),"/10"]}),e.jsxs("div",{className:"header__suggestion-ctas",children:[e.jsx("button",{type:"button",className:"header__suggestion-cta header__suggestion-cta--buy",onClick:()=>{l(`/${a.slug}#pricing`),N(""),v(!1)},children:"Buy"}),e.jsx("button",{type:"button",className:"header__suggestion-cta header__suggestion-cta--research",onClick:()=>A(a),children:"Research"})]})]},a.id)),e.jsxs("button",{type:"submit",className:"header__suggestion header__suggestion--all",children:[e.jsx(F,{size:16}),e.jsxs("span",{children:['See all results for "',u,'"']})]})]})]}),e.jsxs("div",{className:"header__actions",children:[f?e.jsxs("button",{className:"header__saved-btn",onClick:()=>V(!0),"aria-label":"My Garage",children:[e.jsx(M,{size:18,fill:"currentColor"}),e.jsx("span",{className:"header__saved-btn-text",children:"My Garage"})]}):e.jsx(ue,{variant:"primary",size:"small",onClick:()=>I(!0),className:"header__subscribe-btn",children:"Subscribe"}),e.jsx("div",{className:"header__user-container",ref:z,children:f&&n?e.jsxs(e.Fragment,{children:[e.jsx("button",{className:"header__user-btn header__user-btn--authenticated",onClick:()=>b(!k),"aria-label":"User menu","aria-expanded":k,children:e.jsx("div",{className:"header__user-avatar",children:T(n.avatar)?e.jsx("img",{src:T(n.avatar),alt:n.name||"User avatar",className:"header__user-avatar-img"}):e.jsx("span",{children:re(n.name)})})}),k&&e.jsxs("div",{className:"header__user-menu",children:[e.jsxs("div",{className:"header__user-menu-header",children:[e.jsx("div",{className:"header__user-menu-avatar",children:T(n.avatar)?e.jsx("img",{src:T(n.avatar),alt:n.name||"User avatar",className:"header__user-menu-avatar-img"}):e.jsx("span",{children:re(n.name)})}),e.jsxs("div",{className:"header__user-menu-info",children:[e.jsx("span",{className:"header__user-menu-name",children:n.name||"Member"}),e.jsx("span",{className:"header__user-menu-email",children:n.email})]})]}),e.jsx("div",{className:"header__user-menu-divider"}),e.jsxs(x,{to:"/account",className:"header__user-menu-item",onClick:()=>b(!1),children:[e.jsx(ve,{size:18}),e.jsx("span",{children:"My Account"})]}),e.jsx("div",{className:"header__user-menu-divider"}),e.jsxs("button",{className:"header__user-menu-item header__user-menu-item--danger",onClick:Y,children:[e.jsx(xe,{size:18}),e.jsx("span",{children:"Sign Out"})]})]})]}):e.jsx(x,{to:"/sign-in",className:"header__user-btn","aria-label":"Sign in",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M21.649 19.875c-1.428-2.468-3.629-4.239-6.196-5.078a6.75 6.75 0 1 0-6.906 0c-2.568.839-4.768 2.609-6.196 5.078a.75.75 0 1 0 1.299.75C5.416 17.573 8.538 15.75 12 15.75c3.462 0 6.584 1.823 8.35 4.875a.75.75 0 1 0 1.299-.75ZM6.749 9a5.25 5.25 0 1 1 10.5 0 5.25 5.25 0 0 1-10.5 0Z",fill:"currentColor"})})})})]})]}),e.jsx("nav",{className:`header__nav ${_?"header__nav--open":""}`,children:e.jsx("ul",{className:"header__nav-list",children:J.map((a,r)=>e.jsx("li",{className:"header__nav-item",children:a.isRoute?e.jsx(x,{to:a.href,className:"header__nav-link",children:a.label}):e.jsx("a",{href:a.href,className:"header__nav-link",children:a.label})},r))})})]}),e.jsx(_e,{isOpen:E,onClose:()=>I(!1),vehicleName:g?`${g.year} ${g.make} ${g.model}`:void 0,vehicleImage:L,enableExitIntent:!0}),e.jsx(le,{isOpen:O,onClose:()=>V(!1)})]})};ke.__docgenInfo={description:"",methods:[],displayName:"Header"};export{ke as H,Pe as a};
