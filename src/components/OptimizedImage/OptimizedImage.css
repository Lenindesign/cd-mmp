/* ============================================
   OPTIMIZED IMAGE - Car and Driver Design System
   ============================================ */

.optimized-image {
  position: relative;
  overflow: hidden;
  background-color: var(--color-gray-100);
  width: 100%;
  height: 100%;
}

/* Placeholder shimmer animation */
.optimized-image__placeholder {
  position: absolute;
  inset: 0;
  background: linear-gradient(
    90deg,
    var(--color-gray-100) 25%,
    var(--color-gray-200) 50%,
    var(--color-gray-100) 75%
  );
  background-size: 200% 100%;
  animation: image-shimmer 1.5s ease-in-out infinite;
}

@keyframes image-shimmer {
  0% {
    background-position: 200% 0;
  }
  100% {
    background-position: -200% 0;
  }
}

/* Image element */
.optimized-image__img {
  display: block;
  width: 100%;
  height: 100%;
  object-fit: cover;
  opacity: 0;
  transition: opacity var(--transition-normal);
}

/* Loaded state */
.optimized-image--loaded .optimized-image__img {
  opacity: 1;
}

.optimized-image--loaded .optimized-image__placeholder {
  opacity: 0;
  pointer-events: none;
}

/* ============================================
   ERROR STATE - Image Placeholder Fallback
   ============================================ */

.optimized-image--error {
  background-color: var(--color-apple-bg-tertiary);
}

.optimized-image__error-fallback {
  position: absolute;
  inset: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  background-color: var(--color-apple-bg-tertiary);
}

.optimized-image__error-icon {
  color: var(--color-apple-text-tertiary);
  width: var(--spacing-16);
  height: var(--spacing-16);
  opacity: 0.7;
}

/* Smaller icon for small containers */
.optimized-image[style*="width: 150px"] .optimized-image__error-icon,
.optimized-image[style*="width: 100px"] .optimized-image__error-icon {
  width: var(--spacing-8);
  height: var(--spacing-8);
}

/* ============================================
   RESPONSIVE IMAGE VARIANTS
   ============================================ */

/* Full-bleed image */
.optimized-image--full-bleed {
  width: 100%;
}

/* Rounded corners */
.optimized-image--rounded {
  border-radius: var(--border-radius-md);
}

.optimized-image--rounded-lg {
  border-radius: var(--border-radius-lg);
}

/* Card image style */
.optimized-image--card {
  border-radius: var(--border-radius-md) var(--border-radius-md) 0 0;
}

/* Hero image style */
.optimized-image--hero {
  border-radius: var(--border-radius-lg);
}

/* ============================================
   HOVER EFFECTS
   ============================================ */

.optimized-image--hover-zoom .optimized-image__img {
  transition: transform var(--transition-slow), opacity var(--transition-normal);
}

.optimized-image--hover-zoom:hover .optimized-image__img {
  transform: scale(1.05);
}

/* ============================================
   REDUCED MOTION
   ============================================ */

@media (prefers-reduced-motion: reduce) {
  .optimized-image__placeholder {
    animation: none;
    background: var(--color-gray-200);
  }
  
  .optimized-image__img {
    transition: none;
  }
  
  .optimized-image--hover-zoom:hover .optimized-image__img {
    transform: none;
  }
}
